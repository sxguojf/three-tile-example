var Gc=Object.defineProperty;var vc=(e,t,r)=>t in e?Gc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xt=(e,t,r)=>(vc(e,typeof t!="symbol"?t+"":t,r),r);import"./modulepreload-polyfill-3cfb730f.js";import{E as Lc,v as xc,V as z,w as Io,s as D,F as ln,W as Eo,y as Oc,c as Uc,z as Nc,H as Pc,ag as Jc,ah as ls,ai as Hc,Q as _t,aj as kc,ak as mo,al as ri,am as qc,an as ie,ao as Kc,ap as jc,aq as Vc,ar as Yc,as as Wc,at as Xc,au as zc,av as Zc,aw as $c,ax as Ne,ay as Sr,az as th,aA as eh,aB as rh,aC as sh,aD as ih,aE as nh,aF as gn,aG as Le,aH as xe,aI as Bn,aJ as Ti,ab as po,aK as _i,r as Ah,aL as fn,G as Tr,b as yo,I as si,e as it,ac as gs,f as ii,Y as Qo,a9 as xr,a5 as wo,aM as oh,P as ah,d as ch,B as hh,aN as uh,aO as lh,a8 as gh,aP as Bh,aQ as dn,aR as Cn,aS as fh,a7 as dh,m as Ch,a as Ih}from"./mapSource-0f357340.js";import{c as Eh,d as mh,b as ph,s as yh,g as Qh,h as wh,f as bh}from"./util-093ada9b.js";import{M as Dh}from"./MapControls-391aa788.js";import{G as Rh}from"./GLTFLoader-4f96de57.js";import{D as Sh}from"./DRACOLoader-47e38c2a.js";class Th extends Lc{constructor(r,s={centerPostion:new z(0,0,-3e3),cameraPosition:new z(0,3e4,0)}){super();xt(this,"scene");xt(this,"renderer");xt(this,"camera");xt(this,"controls");xt(this,"ambLight");xt(this,"dirLight");xt(this,"container");xt(this,"_clock",new xc);xt(this,"_fogFactor",1);const i=typeof r=="string"?document.querySelector(r):r;if(i instanceof HTMLElement)this.container=i,this.renderer=this._createRenderer(),this.scene=this._createScene(),this.camera=this._createCamera(s.cameraPosition),this.controls=this._createControls(s.centerPostion),this.ambLight=this._createAmbLight(),this.scene.add(this.ambLight),this.dirLight=this._createDirLight(s.centerPostion),this.scene.add(this.dirLight),this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.renderer.setAnimationLoop(this.animate.bind(this));else throw`${r} not found!}`}get fogFactor(){return this._fogFactor}set fogFactor(r){this._fogFactor=r,this.controls.dispatchEvent({type:"change"})}get width(){return this.container.clientWidth}get height(){return this.container.clientHeight}_createScene(){const r=new Io,s=14414079;return r.background=new D(s),r.fog=new ln(s,0),r}_createRenderer(){const r=new Eo({antialias:!1,alpha:!0,precision:"highp"});return r.debug.checkShaderErrors=!0,r.sortObjects=!0,r.setPixelRatio(window.devicePixelRatio),r}_createCamera(r){const s=new Oc(70,1,.1,5e4);return s.position.copy(r),s}_createControls(r){const s=new Dh(this.camera,this.container);return s.target.copy(r),s.screenSpacePanning=!1,s.minDistance=.1,s.maxDistance=3e6,s.enableDamping=!0,s.keyPanSpeed=5,s.listenToKeyEvents(window),s.addEventListener("change",()=>{const i=Math.max(this.controls.getPolarAngle(),.1),n=Math.max(this.controls.getDistance(),.1);s.zoomSpeed=Math.max(Math.log(n),1.8),this.camera.far=Uc.clamp(n/i*8e3,100,5e7),this.camera.near=this.camera.far/1e5,this.camera.updateProjectionMatrix(),this.scene.fog instanceof ln&&(this.scene.fog.density=i/n*this.fogFactor*.06)}),s}_createAmbLight(){return new Nc(16777215,1)}_createDirLight(r){const s=new Pc(16777215,1);return s.position.set(0,2e3,1e3),s.target.position.copy(r),s}resize(){const r=this.width,s=this.height;return this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(r,s),this.camera.aspect=r/s,this.camera.updateProjectionMatrix(),this}animate(){this.dispatchEvent({type:"update",delta:this._clock.getDelta()}),this.controls.update(),this.renderer.render(this.scene,this.camera)}}class _h{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=r}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,r){const s=this.workersResolve[t];if(s&&s(r),this.queue.length){const{resolve:i,msg:n,transfer:A}=this.queue.shift();this.workersResolve[t]=i,this.workers[t].postMessage(n,A)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,r){return new Promise(s=>{const i=this._getIdleWorker();i!==-1?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=s,this.workers[i].postMessage(t,r)):this.queue.push({resolve:s,msg:t,transfer:r})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const Mh=0,In=2,Fh=1,En=2,Gh=0,vh=1,Lh=10,xh=0,bo=9,Do=15,Ro=16,So=22,To=37,_o=43,Mo=76,Fo=83,Go=97,vo=100,Lo=103,xo=109,Oo=165,Uo=166;let Oh=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},Re=class{constructor(t,r,s,i){this._dataView=new DataView(t.buffer,t.byteOffset+r,s),this._littleEndian=i,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,r=0){const s=this._offset;let i=0;for(;this._dataView.getUint8(this._offset)!==r&&i<t;)i++,this._offset++;return i<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+s,i)}};const lt=[171,75,84,88,32,50,48,187,13,10,26,10];function mn(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Buffer.from(e).toString("utf8")}function Uh(e){const t=new Uint8Array(e.buffer,e.byteOffset,lt.length);if(t[0]!==lt[0]||t[1]!==lt[1]||t[2]!==lt[2]||t[3]!==lt[3]||t[4]!==lt[4]||t[5]!==lt[5]||t[6]!==lt[6]||t[7]!==lt[7]||t[8]!==lt[8]||t[9]!==lt[9]||t[10]!==lt[10]||t[11]!==lt[11])throw new Error("Missing KTX 2.0 identifier.");const r=new Oh,s=17*Uint32Array.BYTES_PER_ELEMENT,i=new Re(e,lt.length,s,!0);r.vkFormat=i._nextUint32(),r.typeSize=i._nextUint32(),r.pixelWidth=i._nextUint32(),r.pixelHeight=i._nextUint32(),r.pixelDepth=i._nextUint32(),r.layerCount=i._nextUint32(),r.faceCount=i._nextUint32();const n=i._nextUint32();r.supercompressionScheme=i._nextUint32();const A=i._nextUint32(),o=i._nextUint32(),a=i._nextUint32(),c=i._nextUint32(),h=i._nextUint64(),u=i._nextUint64(),g=new Re(e,lt.length+s,3*n*8,!0);for(let W=0;W<n;W++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+g._nextUint64(),g._nextUint64()),uncompressedByteLength:g._nextUint64()});const l=new Re(e,A,o,!0),B={vendorId:l._skip(4)._nextUint16(),descriptorType:l._nextUint16(),versionNumber:l._nextUint16(),descriptorBlockSize:l._nextUint16(),colorModel:l._nextUint8(),colorPrimaries:l._nextUint8(),transferFunction:l._nextUint8(),flags:l._nextUint8(),texelBlockDimension:[l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8()],bytesPlane:[l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8()],samples:[]},f=(B.descriptorBlockSize/4-6)/4;for(let W=0;W<f;W++){const j={bitOffset:l._nextUint16(),bitLength:l._nextUint8(),channelType:l._nextUint8(),samplePosition:[l._nextUint8(),l._nextUint8(),l._nextUint8(),l._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&j.channelType?(j.sampleLower=l._nextInt32(),j.sampleUpper=l._nextInt32()):(j.sampleLower=l._nextUint32(),j.sampleUpper=l._nextUint32()),B.samples[W]=j}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(B);const C=new Re(e,a,c,!0);for(;C._offset<c;){const W=C._nextUint32(),j=C._scan(W),ut=mn(j),X=C._scan(W-j.byteLength);r.keyValue[ut]=ut.match(/^ktx/i)?mn(X):X,C._offset%4&&C._skip(4-C._offset%4)}if(u<=0)return r;const m=new Re(e,h,u,!0),Q=m._nextUint16(),I=m._nextUint16(),p=m._nextUint32(),R=m._nextUint32(),y=m._nextUint32(),_=m._nextUint32(),G=[];for(let W=0;W<n;W++)G.push({imageFlags:m._nextUint32(),rgbSliceByteOffset:m._nextUint32(),rgbSliceByteLength:m._nextUint32(),alphaSliceByteOffset:m._nextUint32(),alphaSliceByteLength:m._nextUint32()});const T=h+m._offset,v=T+p,P=v+R,K=P+y,H=new Uint8Array(e.buffer,e.byteOffset+T,p),x=new Uint8Array(e.buffer,e.byteOffset+v,R),Y=new Uint8Array(e.buffer,e.byteOffset+P,y),mt=new Uint8Array(e.buffer,e.byteOffset+K,_);return r.globalData={endpointCount:Q,selectorCount:I,imageDescs:G,endpointsData:H,selectorsData:x,tablesData:Y,extendedData:mt},r}let Bs,qt,ni;const fs={env:{emscripten_notify_memory_growth:function(e){ni=new Uint8Array(qt.exports.memory.buffer)}}};class Nh{init(){return Bs||(Bs=typeof fetch<"u"?fetch("data:application/wasm;base64,"+pn).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,fs)).then(this._init):WebAssembly.instantiate(Buffer.from(pn,"base64"),fs).then(this._init),Bs)}_init(t){qt=t.instance,fs.env.emscripten_notify_memory_growth(0)}decode(t,r=0){if(!qt)throw new Error("ZSTDDecoder: Await .init() before decoding.");const s=t.byteLength,i=qt.exports.malloc(s);ni.set(t,i),r=r||Number(qt.exports.ZSTD_findDecompressedSize(i,s));const n=qt.exports.malloc(r),A=qt.exports.ZSTD_decompress(n,r,i,s),o=ni.slice(n,n+A);return qt.exports.free(i),qt.exports.free(n),o}}const pn="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",ds=new WeakMap;let Cs=0,Is;class Pt extends Jc{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new _h,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}async detectSupportAsync(t){return this.workerConfig={astcSupported:await t.hasFeatureAsync("texture-compression-astc"),etc1Supported:await t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await t.hasFeatureAsync("texture-compression-bc"),bptcSupported:await t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await t.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const t=new ls(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);const r=t.loadAsync("basis_transcoder.js"),s=new ls(this.manager);s.setPath(this.transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const i=s.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([r,i]).then(([n,A])=>{const o=Pt.BasisWorker.toString(),a=["/* constants */","let _EngineFormat = "+JSON.stringify(Pt.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Pt.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Pt.BasisFormat),"/* basis_transcoder.js */",n,"/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a])),this.transcoderBinary=A,this.workerPool.setWorkerCreator(()=>{const c=new Worker(this.workerSourceURL),h=this.transcoderBinary.slice(0);return c.postMessage({type:"init",config:this.workerConfig,transcoderBinary:h},[h]),c})}),Cs>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Cs++}return this.transcoderPending}load(t,r,s,i){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const n=new ls(this.manager);n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials),n.load(t,A=>{if(ds.has(A))return ds.get(A).promise.then(r).catch(i);this._createTexture(A).then(o=>r?r(o):null).catch(i)},s,i)}_createTextureFrom(t,r){const{faces:s,width:i,height:n,format:A,type:o,error:a,dfdFlags:c}=t;if(o==="error")return Promise.reject(a);let h;if(r.faceCount===6)h=new Hc(s,A,_t);else{const u=s[0].mipmaps;h=r.layerCount>1?new kc(u,i,n,r.layerCount,A,_t):new mo(u,i,n,A,_t)}return h.minFilter=s[0].mipmaps.length===1?ri:qc,h.magFilter=ri,h.generateMipmaps=!1,h.needsUpdate=!0,h.colorSpace=No(r),h.premultiplyAlpha=!!(c&Fh),h}async _createTexture(t,r={}){const s=Uh(new Uint8Array(t));if(s.vkFormat!==xh)return Jh(s);const i=r,n=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:i},[t])).then(A=>this._createTextureFrom(A.data,s));return ds.set(t,{promise:n}),n}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Cs--,this}}Pt.BasisFormat={ETC1S:0,UASTC_4x4:1};Pt.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};Pt.EngineFormat={RGBAFormat:ie,RGBA_ASTC_4x4_Format:Kc,RGBA_BPTC_Format:jc,RGBA_ETC2_EAC_Format:Vc,RGBA_PVRTC_4BPPV1_Format:Yc,RGBA_S3TC_DXT5_Format:Wc,RGB_ETC1_Format:Xc,RGB_ETC2_Format:zc,RGB_PVRTC_4BPPV1_Format:Zc,RGBA_S3TC_DXT1_Format:$c};Pt.BasisWorker=function(){let e,t,r;const s=_EngineFormat,i=_TranscoderFormat,n=_BasisFormat;self.addEventListener("message",function(B){const f=B.data;switch(f.type){case"init":e=f.config,A(f.transcoderBinary);break;case"transcode":t.then(()=>{try{const{faces:C,buffers:m,width:Q,height:I,hasAlpha:p,format:R,dfdFlags:y}=o(f.buffer);self.postMessage({type:"transcode",id:f.id,faces:C,width:Q,height:I,hasAlpha:p,format:R,dfdFlags:y},m)}catch(C){console.error(C),self.postMessage({type:"error",id:f.id,error:C.message})}});break}});function A(B){t=new Promise(f=>{r={wasmBinary:B,onRuntimeInitialized:f},BASIS(r)}).then(()=>{r.initializeBasis(),r.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function o(B){const f=new r.KTX2File(new Uint8Array(B));function C(){f.close(),f.delete()}if(!f.isValid())throw C(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const m=f.isUASTC()?n.UASTC_4x4:n.ETC1S,Q=f.getWidth(),I=f.getHeight(),p=f.getLayers()||1,R=f.getLevels(),y=f.getFaces(),_=f.getHasAlpha(),G=f.getDFDFlags(),{transcoderFormat:T,engineFormat:v}=u(m,Q,I,_);if(!Q||!I||!R)throw C(),new Error("THREE.KTX2Loader:	Invalid texture");if(!f.startTranscoding())throw C(),new Error("THREE.KTX2Loader: .startTranscoding failed");const P=[],K=[];for(let H=0;H<y;H++){const x=[];for(let Y=0;Y<R;Y++){const mt=[];let W,j;for(let X=0;X<p;X++){const gt=f.getImageLevelInfo(Y,X,H);H===0&&Y===0&&X===0&&(gt.origWidth%4!==0||gt.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),R>1?(W=gt.origWidth,j=gt.origHeight):(W=gt.width,j=gt.height);const ee=new Uint8Array(f.getImageTranscodedSizeInBytes(Y,X,0,T));if(!f.transcodeImage(ee,Y,X,H,T,0,-1,-1))throw C(),new Error("THREE.KTX2Loader: .transcodeImage failed.");mt.push(ee)}const ut=l(mt);x.push({data:ut,width:W,height:j}),K.push(ut.buffer)}P.push({mipmaps:x,width:Q,height:I,format:v})}return C(),{faces:P,buffers:K,width:Q,height:I,hasAlpha:_,format:v,dfdFlags:G}}const a=[{if:"astcSupported",basisFormat:[n.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[s.RGBA_ASTC_4x4_Format,s.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[s.RGBA_BPTC_Format,s.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[s.RGBA_S3TC_DXT1_Format,s.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[s.RGB_ETC2_Format,s.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[s.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[n.ETC1S,n.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[s.RGB_PVRTC_4BPPV1_Format,s.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],c=a.sort(function(B,f){return B.priorityETC1S-f.priorityETC1S}),h=a.sort(function(B,f){return B.priorityUASTC-f.priorityUASTC});function u(B,f,C,m){let Q,I;const p=B===n.ETC1S?c:h;for(let R=0;R<p.length;R++){const y=p[R];if(e[y.if]&&y.basisFormat.includes(B)&&!(m&&y.transcoderFormat.length<2)&&!(y.needsPowerOfTwo&&!(g(f)&&g(C))))return Q=y.transcoderFormat[m?1:0],I=y.engineFormat[m?1:0],{transcoderFormat:Q,engineFormat:I}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),Q=i.RGBA32,I=s.RGBAFormat,{transcoderFormat:Q,engineFormat:I}}function g(B){return B<=2?!0:(B&B-1)===0&&B!==0}function l(B){if(B.length===1)return B[0];let f=0;for(let Q=0;Q<B.length;Q++){const I=B[Q];f+=I.byteLength}const C=new Uint8Array(f);let m=0;for(let Q=0;Q<B.length;Q++){const I=B[Q];C.set(I,m),m+=I.byteLength}return C}};const Ph=new Set([ie,Le,xe]),Es={[xo]:ie,[Go]:ie,[To]:ie,[_o]:ie,[Lo]:Le,[Fo]:Le,[Ro]:Le,[So]:Le,[vo]:xe,[Mo]:xe,[Do]:xe,[bo]:xe,[Uo]:Bn,[Oo]:Bn},ms={[xo]:Ne,[Go]:Sr,[To]:_t,[_o]:_t,[Lo]:Ne,[Fo]:Sr,[Ro]:_t,[So]:_t,[vo]:Ne,[Mo]:Sr,[Do]:_t,[bo]:_t,[Uo]:_t,[Oo]:_t};async function Jh(e){const{vkFormat:t}=e;if(Es[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let r;e.supercompressionScheme===In&&(Is||(Is=new Promise(async n=>{const A=new Nh;await A.init(),n(A)})),r=await Is);const s=[];for(let n=0;n<e.levels.length;n++){const A=Math.max(1,e.pixelWidth>>n),o=Math.max(1,e.pixelHeight>>n),a=e.pixelDepth?Math.max(1,e.pixelDepth>>n):0,c=e.levels[n];let h;if(e.supercompressionScheme===Mh)h=c.levelData;else if(e.supercompressionScheme===In)h=r.decode(c.levelData,c.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let u;ms[t]===Ne?u=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):ms[t]===Sr?u=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):u=h,s.push({data:u,width:A,height:o,depth:a})}let i;if(Ph.has(Es[t]))i=e.pixelDepth===0?new th(s[0].data,e.pixelWidth,e.pixelHeight):new eh(s[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");i=new mo(s,e.pixelWidth,e.pixelHeight)}return i.mipmaps=s,i.type=ms[t],i.format=Es[t],i.colorSpace=No(e),i.needsUpdate=!0,Promise.resolve(i)}function No(e){const t=e.dataFormatDescriptor[0];return t.colorPrimaries===vh?t.transferFunction===En?rh:sh:t.colorPrimaries===Lh?t.transferFunction===En?ih:nh:t.colorPrimaries===Gh?gn:(console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),gn)}var Hh=Object.defineProperty,kh=(e,t,r)=>t in e?Hh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t,r)=>kh(e,typeof t!="symbol"?t+"":t,r);async function tr(e,t,r,s){return s._parse(e,t,r,s)}function Z(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const zr=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),yn=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);yn&&parseFloat(yn[1]);function qh(e,t){return Po(e||{},t)}function Po(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(r>3)return t;const s={...e};for(const[i,n]of Object.entries(t))n&&typeof n=="object"&&!Array.isArray(n)?s[i]=Po(s[i]||{},t[i],r+1):s[i]=t[i];return s}const Kh="latest";function jh(){var e;return(e=globalThis._loadersgl_)!==null&&e!==void 0&&e.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.1.1"),globalThis._loadersgl_.version}const Jo=jh();function Yt(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const Ht=typeof process!="object"||String(process)!=="[object process]"||process.browser,Mi=typeof importScripts=="function",Vh=typeof window<"u"&&typeof window.orientation<"u",Qn=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);Qn&&parseFloat(Qn[1]);class Yh{constructor(t,r){this.name=void 0,this.workerThread=void 0,this.isRunning=!0,this.result=void 0,this._resolve=()=>{},this._reject=()=>{},this.name=t,this.workerThread=r,this.result=new Promise((s,i)=>{this._resolve=s,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){Yt(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Yt(this.isRunning),this.isRunning=!1,this._reject(t)}}class ps{terminate(){}}const ys=new Map;function Wh(e){Yt(e.source&&!e.url||!e.source&&e.url);let t=ys.get(e.source||e.url);return t||(e.url&&(t=Xh(e.url),ys.set(e.url,t)),e.source&&(t=Ho(e.source),ys.set(e.source,t))),Yt(t),t}function Xh(e){if(!e.startsWith("http"))return e;const t=zh(e);return Ho(t)}function Ho(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function zh(e){return`try {
  importScripts('${e}');
} catch (error) {
  console.error(error);
  throw error;
}`}function ko(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2?arguments[2]:void 0;const s=r||new Set;if(e){if(wn(e))s.add(e);else if(wn(e.buffer))s.add(e.buffer);else if(!ArrayBuffer.isView(e)&&t&&typeof e=="object")for(const i in e)ko(e[i],t,s)}return r===void 0?Array.from(s):[]}function wn(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const Qs=()=>{};class Ai{static isSupported(){return typeof Worker<"u"&&Ht||typeof ps<"u"&&!Ht}constructor(t){this.name=void 0,this.source=void 0,this.url=void 0,this.terminated=!1,this.worker=void 0,this.onMessage=void 0,this.onError=void 0,this._loadableURL="";const{name:r,source:s,url:i}=t;Yt(s||i),this.name=r,this.source=s,this.url=i,this.onMessage=Qs,this.onError=n=>console.log(n),this.worker=Ht?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Qs,this.onError=Qs,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,r){r=r||ko(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+=`worker ${this.name} from ${this.url}. `,t.message&&(r+=`${t.message} in `),t.lineno&&(r+=`:${t.lineno}:${t.colno}`),new Error(r)}_createBrowserWorker(){this._loadableURL=Wh({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;t=new ps(r,{eval:!1})}else if(this.source)t=new ps(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class Zh{static isSupported(){return Ai.isSupported()}constructor(t){this.name="unnamed",this.source=void 0,this.url=void 0,this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=()=>{},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(n,A,o)=>n.done(o),s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(n,A)=>n.error(A);const i=new Promise(n=>(this.jobQueue.push({name:t,onMessage:r,onError:s,onStart:n}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const s=new Yh(r.name,t);t.onMessage=i=>r.onMessage(s,i.type,i.payload),t.onError=i=>r.onError(s,i),r.onStart(s);try{await s.result}catch(i){console.error(`Worker exception: ${i}`)}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){!Ht||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Ai({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Vh?this.maxMobileConcurrency:this.maxConcurrency}}const $h={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Kt{static isSupported(){return Ai.isSupported()}static getWorkerFarm(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Kt._workerFarm=Kt._workerFarm||new Kt({}),Kt._workerFarm.setProps(t),Kt._workerFarm}constructor(t){this.props=void 0,this.workerPools=new Map,this.props={...$h},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:s,url:i}=t;let n=this.workerPools.get(r);return n||(n=new Zh({name:r,source:s,url:i}),n.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,n)),n}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Kt._workerFarm=void 0;function tu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=t[e.id]||{},s=Ht?`${e.id}-worker.js`:`${e.id}-worker-node.js`;let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(Ht?i=`modules/${e.module}/dist/${s}`:i=`modules/${e.module}/src/workers/${e.id}-worker-node.ts`),!i){let n=e.version;n==="latest"&&(n=Kh);const A=n?`@${n}`:"";i=`https://unpkg.com/@loaders.gl/${e.module}${A}/dist/${s}`}return Yt(i),i}function eu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jo;Yt(e,"no worker provided");const r=e.version;return!(!t||!r)}const ru={},su=Object.freeze(Object.defineProperty({__proto__:null,default:ru},Symbol.toStringTag,{value:"Module"})),ws={};async function oe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return t&&(e=iu(e,t,r,s)),ws[e]=ws[e]||nu(e),await ws[e]}function iu(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!r.useLocalLibraries&&e.startsWith("http"))return e;s=s||e;const i=r.modules||{};return i[s]?i[s]:Ht?r.CDN?(Yt(r.CDN.startsWith("http")),`${r.CDN}/${t}@${Jo}/dist/libs/${s}`):Mi?`../src/libs/${s}`:`modules/${t}/src/libs/${s}`:`modules/${t}/dist/libs/${s}`}async function nu(e){if(e.endsWith("wasm"))return await ou(e);if(!Ht)try{return su&&void 0}catch(r){return console.error(r),null}if(Mi)return importScripts(e);const t=await au(e);return Au(t,e)}function Au(e,t){if(!Ht)return;if(Mi)return eval.call(globalThis,e),null;const r=document.createElement("script");r.id=t;try{r.appendChild(document.createTextNode(e))}catch{r.text=e}return document.body.appendChild(r),null}async function ou(e){return await(await fetch(e)).arrayBuffer()}async function au(e){return await(await fetch(e)).text()}function cu(e,t){return!Kt.isSupported()||!Ht&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function hu(e,t,r,s,i){const n=e.id,A=tu(e,r),o=Kt.getWorkerFarm(r).getWorkerPool({name:n,url:A});r=JSON.parse(JSON.stringify(r)),s=JSON.parse(JSON.stringify(s||{}));const a=await o.startJob("process-on-worker",uu.bind(null,i));return a.postMessage("process",{input:t,options:r,context:s}),await(await a.result).result}async function uu(e,t,r,s){switch(r){case"done":t.done(s);break;case"error":t.error(new Error(s.error));break;case"process":const{id:i,input:n,options:A}=s;try{const o=await e(n,A);t.postMessage("done",{id:i,result:o})}catch(o){const a=o instanceof Error?o.message:"unknown error";t.postMessage("error",{id:i,error:a})}break;default:console.warn(`parse-with-worker unknown message ${r}`)}}function lu(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?bn(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?bn(e,0,t):""}function bn(e,t,r){if(e.byteLength<=t+r)return"";const s=new DataView(e);let i="";for(let n=0;n<r;n++)i+=String.fromCharCode(s.getUint8(t+n));return i}function gu(e){try{return JSON.parse(e)}catch{throw new Error(`Failed to parse JSON from data starting with "${lu(e)}"`)}}function Bu(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const s=new Uint8Array(e),i=new Uint8Array(t);for(let n=0;n<s.length;++n)if(s[n]!==i[n])return!1;return!0}function fu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return du(t)}function du(e){const t=e.map(n=>n instanceof ArrayBuffer?new Uint8Array(n):n),r=t.reduce((n,A)=>n+A.byteLength,0),s=new Uint8Array(r);let i=0;for(const n of t)s.set(n,i),i+=n.byteLength;return s.buffer}function Fi(e,t,r){const s=r!==void 0?new Uint8Array(e).subarray(t,t+r):new Uint8Array(e).subarray(t);return new Uint8Array(s).buffer}function er(e,t){return Z(e>=0),Z(t>0),e+(t-1)&~(t-1)}function Cu(e,t,r){let s;if(e instanceof ArrayBuffer)s=new Uint8Array(e);else{const i=e.byteOffset,n=e.byteLength;s=new Uint8Array(e.buffer||e.arrayBuffer,i,n)}return t.set(s,r),r+er(s.byteLength,4)}async function Iu(e){const t=[];for await(const r of e)t.push(r);return fu(...t)}function Dn(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class Rn{constructor(t,r){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=t,this.type=r,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Dn(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Dn()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class qo{constructor(t){this.id=void 0,this.stats={},this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t of Object.values(this.stats))t.reset();return this}forEach(t){for(const r of Object.values(this.stats))t(r)}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(t){const{name:r,type:s}=t;let i=this.stats[r];return i||(t instanceof Rn?i=t:i=new Rn(r,s),this.stats[r]=i),i}}let Eu="";const Sn={};function mu(e){for(const t in Sn)if(e.startsWith(t)){const r=Sn[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e=`${Eu}${e}`),e}function pu(e){return e&&typeof e=="object"&&e.isBuffer}function Ko(e){if(pu(e)||e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function yu(){var e;if(typeof process<"u"&&typeof process.cwd<"u")return process.cwd();const t=(e=window.location)===null||e===void 0?void 0:e.pathname;return(t==null?void 0:t.slice(0,t.lastIndexOf("/")+1))||""}function jo(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(t+1):""}function Vo(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}function Qu(){const e=[];for(let i=0;i<arguments.length;i++)e[i]=i<0||arguments.length<=i?void 0:arguments[i];let t="",r=!1,s;for(let i=e.length-1;i>=-1&&!r;i--){let n;i>=0?n=e[i]:(s===void 0&&(s=yu()),n=s),n.length!==0&&(t=`${n}/${t}`,r=n.charCodeAt(0)===Oe)}return t=wu(t,!r),r?`/${t}`:t.length>0?t:"."}const Oe=47,bs=46;function wu(e,t){let r="",s=-1,i=0,n,A=!1;for(let o=0;o<=e.length;++o){if(o<e.length)n=e.charCodeAt(o);else{if(n===Oe)break;n=Oe}if(n===Oe){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(r.length<2||!A||r.charCodeAt(r.length-1)!==bs||r.charCodeAt(r.length-2)!==bs){if(r.length>2){const a=r.length-1;let c=a;for(;c>=0&&r.charCodeAt(c)!==Oe;--c);if(c!==a){r=c===-1?"":r.slice(0,c),s=o,i=0,A=!1;continue}}else if(r.length===2||r.length===1){r="",s=o,i=0,A=!1;continue}}t&&(r.length>0?r+="/..":r="..",A=!0)}else{const a=e.slice(s+1,o);r.length>0?r+=`/${a}`:r=a,A=!1}s=o,i=0}else n===bs&&i!==-1?++i:i=-1}return r}const bu=e=>typeof e=="boolean",Pe=e=>typeof e=="function",rr=e=>e!==null&&typeof e=="object",Tn=e=>rr(e)&&e.constructor==={}.constructor,Du=e=>!!e&&typeof e[Symbol.iterator]=="function",Ru=e=>e&&typeof e[Symbol.asyncIterator]=="function",ue=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,le=e=>typeof Blob<"u"&&e instanceof Blob,Su=e=>e&&typeof e=="object"&&e.isBuffer,Tu=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||rr(e)&&Pe(e.tee)&&Pe(e.cancel)&&Pe(e.getReader),_u=e=>rr(e)&&Pe(e.read)&&Pe(e.pipe)&&bu(e.readable),Yo=e=>Tu(e)||_u(e),Mu=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Fu=/^([-\w.]+\/[-\w.+]+)/;function Gu(e){const t=Fu.exec(e);return t?t[1]:e}function _n(e){const t=Mu.exec(e);return t?t[1]:""}const Wo=/\?.*/;function vu(e){const t=e.match(Wo);return t&&t[0]}function Gi(e){return e.replace(Wo,"")}function Zr(e){return ue(e)?e.url:le(e)?e.name||"":typeof e=="string"?e:""}function vi(e){if(ue(e)){const t=e,r=t.headers.get("content-type")||"",s=Gi(t.url);return Gu(r)||_n(s)}return le(e)?e.type||"":typeof e=="string"?_n(e):""}function Lu(e){return ue(e)?e.headers["content-length"]||-1:le(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}async function Xo(e){if(ue(e))return e;const t={},r=Lu(e);r>=0&&(t["content-length"]=String(r));const s=Zr(e),i=vi(e);i&&(t["content-type"]=i);const n=await Uu(e);n&&(t["x-first-bytes"]=n),typeof e=="string"&&(e=new TextEncoder().encode(e));const A=new Response(e,{headers:t});return Object.defineProperty(A,"url",{value:s}),A}async function xu(e){if(!e.ok){const t=await Ou(e);throw new Error(t)}}async function Ou(e){let t=`Failed to fetch resource ${e.url} (${e.status}): `;try{const r=e.headers.get("Content-Type");let s=e.statusText;r!=null&&r.includes("application/json")&&(s+=` ${await e.text()}`),t+=s,t=t.length>60?`${t.slice(0,60)}...`:t}catch{}return t}async function Uu(e){if(typeof e=="string")return`data:,${e.slice(0,5)}`;if(e instanceof Blob){const t=e.slice(0,5);return await new Promise(r=>{const s=new FileReader;s.onload=i=>{var n;return r(i==null||(n=i.target)===null||n===void 0?void 0:n.result)},s.readAsDataURL(t)})}if(e instanceof ArrayBuffer){const t=e.slice(0,5);return`data:base64,${Nu(t)}`}return null}function Nu(e){let t="";const r=new Uint8Array(e);for(let s=0;s<r.byteLength;s++)t+=String.fromCharCode(r[s]);return btoa(t)}function Pu(e){return!Ju(e)&&!Hu(e)}function Ju(e){return e.startsWith("http:")||e.startsWith("https:")}function Hu(e){return e.startsWith("data:")}async function je(e,t){if(typeof e=="string"){const i=mu(e);if(Pu(i)){var r;if((r=globalThis.loaders)!==null&&r!==void 0&&r.fetchNode){var s;return(s=globalThis.loaders)===null||s===void 0?void 0:s.fetchNode(i,t)}}return await fetch(i,t)}return await Xo(e)}const Ds=globalThis,or=globalThis.process||{};function ku(e){var t,r;if(typeof window<"u"&&((t=window.process)==null?void 0:t.type)==="renderer"||typeof process<"u"&&(r=process.versions)!=null&&r.electron)return!0;const s=typeof navigator<"u"&&navigator.userAgent;return!!(s&&s.indexOf("Electron")>=0)}function Li(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||ku()}const zo="4.0.7";function qu(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class Ku{constructor(t,r,s="sessionStorage"){this.storage=qu(s),this.id=t,this.config=r,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function ju(e){let t;return e<10?t=`${e.toFixed(2)}ms`:e<100?t=`${e.toFixed(1)}ms`:e<1e3?t=`${e.toFixed(0)}ms`:t=`${(e/1e3).toFixed(2)}s`,t}function Vu(e,t=8){const r=Math.max(t-e.length,0);return`${" ".repeat(r)}${e}`}var Or;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Or||(Or={}));const Yu=10;function Mn(e){return typeof e!="string"?e:(e=e.toUpperCase(),Or[e]||Or.WHITE)}function Wu(e,t,r){return!Li&&typeof e=="string"&&(t&&(e=`\x1B[${Mn(t)}m${e}\x1B[39m`),r&&(e=`\x1B[${Mn(r)+Yu}m${e}\x1B[49m`)),e}function Xu(e,t=["constructor"]){const r=Object.getPrototypeOf(e),s=Object.getOwnPropertyNames(r),i=e;for(const n of s){const A=i[n];typeof A=="function"&&(t.find(o=>n===o)||(i[n]=A.bind(e)))}}function xi(e,t){if(!e)throw new Error("Assertion failed")}function Be(){var e,t,r;let s;if(Li()&&Ds.performance)s=(t=(e=Ds==null?void 0:Ds.performance)==null?void 0:e.now)==null?void 0:t.call(e);else if("hrtime"in or){const i=(r=or==null?void 0:or.hrtime)==null?void 0:r.call(or);s=i[0]*1e3+i[1]/1e6}else s=Date.now();return s}const fe={debug:Li()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},zu={enabled:!0,level:0};function de(){}const Fn={},Gn={once:!0};class $r{constructor({id:t}={id:""}){this.VERSION=zo,this._startTs=Be(),this._deltaTs=Be(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=t,this.userData={},this._storage=new Ku(`__probe-${this.id}__`,zu),this.timeStamp(`${this.id} started`),Xu(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Be()-this._startTs).toPrecision(10))}getDelta(){return Number((Be()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(t=!0){return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.setConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){if(!t)throw new Error(r||"Assertion failed")}warn(t){return this._getLogFunction(0,t,fe.warn,arguments,Gn)}error(t){return this._getLogFunction(0,t,fe.error,arguments)}deprecated(t,r){return this.warn(`\`${t}\` is deprecated and will be removed in a later version. Use \`${r}\` instead`)}removed(t,r){return this.error(`\`${t}\` has been removed. Use \`${r}\` instead`)}probe(t,r){return this._getLogFunction(t,r,fe.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,fe.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){return this._getLogFunction(t,r,fe.debug||fe.info,arguments,Gn)}table(t,r,s){return r?this._getLogFunction(t,r,console.table||de,s&&[s],{tag:$u(r)}):de}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||de)}group(t,r,s={collapsed:!1}){const i=vn({logLevel:t,message:r,opts:s}),{collapsed:n}=s;return i.method=(n?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r,s={}){return this.group(t,r,Object.assign({},s,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||de)}withGroup(t,r,s){this.group(t,r)();try{s()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Zo(t)}_getLogFunction(t,r,s,i,n){if(this._shouldLog(t)){n=vn({logLevel:t,message:r,args:i,opts:n}),s=s||n.method,xi(s),n.total=this.getTotal(),n.delta=this.getDelta(),this._deltaTs=Be();const A=n.tag||n.message;if(n.once&&A)if(!Fn[A])Fn[A]=Be();else return de;return r=Zu(this.id,n.message,n),s.bind(console,r,...n.args)}return de}}$r.VERSION=zo;function Zo(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return xi(Number.isFinite(t)&&t>=0),t}function vn(e){const{logLevel:t,message:r}=e;e.logLevel=Zo(t);const s=e.args?Array.from(e.args):[];for(;s.length&&s.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&s.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return xi(i==="string"||i==="object"),Object.assign(e,{args:s},e.opts)}function Zu(e,t,r){if(typeof t=="string"){const s=r.time?Vu(ju(r.total)):"";t=r.time?`${e}: ${s}  ${t}`:`${e}: ${t}`,t=Wu(t,r.color,r.background)}return t}function $u(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}globalThis.probe={};const $o=new $r({id:"@probe.gl/log"}),Ln=new $r({id:"loaders.gl"});class tl{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class el{constructor(){this.console=void 0,this.console=console}log(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return this.console.log.bind(this.console,...r)}info(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return this.console.info.bind(this.console,...r)}warn(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return this.console.warn.bind(this.console,...r)}error(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return this.console.error.bind(this.console,...r)}}const ta={fetch:null,mimeType:void 0,nothrow:!1,log:new el,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:zr,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},rl={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function ea(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}function ra(){const e=ea();return e.globalOptions=e.globalOptions||{...ta},e.globalOptions}function sl(e,t,r,s){return r=r||[],r=Array.isArray(r)?r:[r],il(e,r),Al(t,e,s)}function il(e,t){xn(e,null,ta,rl,t);for(const r of t){const s=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},n=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};xn(s,r.id,i,n,t)}}function xn(e,t,r,s,i){const n=t||"Top level",A=t?`${t}.`:"";for(const o in e){const a=!t&&rr(e[o]),c=o==="baseUri"&&!t,h=o==="workerUrl"&&t;if(!(o in r)&&!c&&!h){if(o in s)Ln.warn(`${n} loader option '${A}${o}' no longer supported, use '${s[o]}'`)();else if(!a){const u=nl(o,i);Ln.warn(`${n} loader option '${A}${o}' not recognized. ${u}`)()}}}}function nl(e,t){const r=e.toLowerCase();let s="";for(const i of t)for(const n in i.options){if(e===n)return`Did you mean '${i.id}.${n}'?`;const A=n.toLowerCase();(r.startsWith(A)||A.startsWith(r))&&(s=s||`Did you mean '${i.id}.${n}'?`)}return s}function Al(e,t,r){const s={...e.options||{}};return ol(s,r),s.log===null&&(s.log=new tl),On(s,ra()),On(s,t),s}function On(e,t){for(const r in t)if(r in t){const s=t[r];Tn(s)&&Tn(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function ol(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function Oi(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function sa(e){var t,r;Z(e,"null loader"),Z(Oi(e),"invalid loader");let s;return Array.isArray(e)&&(s=e[1],e=e[0],e={...e,options:{...e.options,...s}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const al=()=>{const e=ea();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function cl(){return al()}const hl=new $r({id:"loaders.gl"}),ul=/\.([^.]+)$/;async function ll(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(!ia(e))return null;let i=Un(e,t,{...r,nothrow:!0},s);if(i)return i;if(le(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Un(e,t,r,s)),!i&&!(r!=null&&r.nothrow))throw new Error(na(e));return i}function Un(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(!ia(e))return null;if(t&&!Array.isArray(t))return sa(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...cl()),Bl(i);const n=gl(e,i,r,s);if(!n&&!(r!=null&&r.nothrow))throw new Error(na(e));return n}function gl(e,t,r,s){const i=Zr(e),n=vi(e),A=Gi(i)||(s==null?void 0:s.url);let o=null,a="";if(r!=null&&r.mimeType&&(o=Rs(t,r==null?void 0:r.mimeType),a=`match forced by supplied MIME type ${r==null?void 0:r.mimeType}`),o=o||fl(t,A),a=a||(o?`matched url ${A}`:""),o=o||Rs(t,n),a=a||(o?`matched MIME type ${n}`:""),o=o||Cl(t,e),a=a||(o?`matched initial data ${Aa(e)}`:""),r!=null&&r.fallbackMimeType&&(o=o||Rs(t,r==null?void 0:r.fallbackMimeType),a=a||(o?`matched fallback MIME type ${n}`:"")),a){var c;hl.log(1,`selectLoader selected ${(c=o)===null||c===void 0?void 0:c.name}: ${a}.`)}return o}function ia(e){return!(e instanceof Response&&e.status===204)}function na(e){const t=Zr(e),r=vi(e);let s="No valid loader found (";s+=t?`${jo(t)}, `:"no url provided, ",s+=`MIME type: ${r?`"${r}"`:"not provided"}, `;const i=e?Aa(e):"";return s+=i?` first bytes: "${i}"`:"first bytes: not available",s+=")",s}function Bl(e){for(const t of e)sa(t)}function fl(e,t){const r=t&&ul.exec(t),s=r&&r[1];return s?dl(e,s):null}function dl(e,t){t=t.toLowerCase();for(const r of e)for(const s of r.extensions)if(s.toLowerCase()===t)return r;return null}function Rs(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t===`application/x.${r.id}`)return r;return null}function Cl(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(Il(t,r))return r}else if(ArrayBuffer.isView(t)){if(Nn(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Nn(t,0,r))return r;return null}function Il(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>e.startsWith(r))}function Nn(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(s=>El(e,t,r,s))}function El(e,t,r,s){if(s instanceof ArrayBuffer)return Bu(s,e,s.byteLength);switch(typeof s){case"function":return s(e);case"string":const i=oi(e,t,s.length);return s===i;default:return!1}}function Aa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?oi(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?oi(e,0,t):""}function oi(e,t,r){if(e.byteLength<t+r)return"";const s=new DataView(e);let i="";for(let n=0;n<r;n++)i+=String.fromCharCode(s.getUint8(t+n));return i}const ml=256*1024;function*pl(e,t){const r=(t==null?void 0:t.chunkSize)||ml;let s=0;const i=new TextEncoder;for(;s<e.length;){const n=Math.min(e.length-s,r),A=e.slice(s,s+n);s+=n,yield i.encode(A)}}const yl=256*1024;function Ql(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:r=yl}=t;let s=0;for(;s<e.byteLength;){const i=Math.min(e.byteLength-s,r),n=new ArrayBuffer(i),A=new Uint8Array(e,s,i);new Uint8Array(n).set(A),s+=i,yield n}}()}const wl=1024*1024;async function*bl(e,t){const r=(t==null?void 0:t.chunkSize)||wl;let s=0;for(;s<e.size;){const i=s+r,n=await e.slice(s,i).arrayBuffer();s=i,yield n}}function Pn(e,t){return zr?Dl(e,t):Rl(e)}async function*Dl(e,t){const r=e.getReader();let s;try{for(;;){const i=s||r.read();t!=null&&t._streamReadAhead&&(s=r.read());const{done:n,value:A}=await i;if(n)return;yield Ko(A)}}catch{r.releaseLock()}}async function*Rl(e,t){for await(const r of e)yield Ko(r)}function Sl(e,t){if(typeof e=="string")return pl(e,t);if(e instanceof ArrayBuffer)return Ql(e,t);if(le(e))return bl(e,t);if(Yo(e))return Pn(e,t);if(ue(e))return Pn(e.body,t);throw new Error("makeIterator")}const oa="Cannot convert supplied data type";function Tl(e,t,r){if(t.text&&typeof e=="string")return e;if(Su(e)&&(e=e.buffer),e instanceof ArrayBuffer){const s=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(s):s}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let s=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==s.byteLength)&&(s=s.slice(e.byteOffset,e.byteOffset+i)),s}throw new Error(oa)}async function _l(e,t,r){const s=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||s)return Tl(e,t);if(le(e)&&(e=await Xo(e)),ue(e)){const i=e;return await xu(i),t.binary?await i.arrayBuffer():await i.text()}if(Yo(e)&&(e=Sl(e,r)),Du(e)||Ru(e))return Iu(e);throw new Error(oa)}function aa(e,t){const r=ra(),s=e||r;return typeof s.fetch=="function"?s.fetch:rr(s.fetch)?i=>je(i,s.fetch):t!=null&&t.fetch?t==null?void 0:t.fetch:je}function Ml(e,t,r){if(r)return r;const s={fetch:aa(t,e),...e};if(s.url){const i=Gi(s.url);s.baseUrl=i,s.queryString=vu(s.url),s.filename=jo(i),s.baseUrl=Vo(i)}return Array.isArray(s.loaders)||(s.loaders=null),s}function Fl(e,t){if(e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const s=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...s]:s}return r&&r.length?r:void 0}async function Ur(e,t,r,s){t&&!Array.isArray(t)&&!Oi(t)&&(s=void 0,r=t,t=void 0),e=await e,r=r||{};const i=Zr(e),n=Fl(t,s),A=await ll(e,n,r);return A?(r=sl(r,A,n,i),s=Ml({url:i,_parse:Ur,loaders:n},r,s||null),await Gl(A,e,r,s)):null}async function Gl(e,t,r,s){if(eu(e),r=qh(e.options,r),ue(t)){const n=t,{ok:A,redirected:o,status:a,statusText:c,type:h,url:u}=n,g=Object.fromEntries(n.headers.entries());s.response={headers:g,ok:A,redirected:o,status:a,statusText:c,type:h,url:u}}t=await _l(t,e,r);const i=e;if(i.parseTextSync&&typeof t=="string")return i.parseTextSync(t,r,s);if(cu(e,r))return await hu(e,t,r,s,Ur);if(i.parseText&&typeof t=="string")return await i.parseText(t,r,s);if(i.parse)return await i.parse(t,r,s);throw Yt(!i.parseSync),new Error(`${e.id} loader - no parser found and worker is disabled`)}function vl(e){switch(e.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function Ll(e){let t=1/0,r=1/0,s=1/0,i=-1/0,n=-1/0,A=-1/0;const o=e.POSITION?e.POSITION.value:[],a=o&&o.length;for(let c=0;c<a;c+=3){const h=o[c],u=o[c+1],g=o[c+2];t=h<t?h:t,r=u<r?u:r,s=g<s?g:s,i=h>i?h:i,n=u>n?u:n,A=g>A?g:A}return[[t,r,s],[i,n,A]]}function xl(e,t,r){const s=vl(t.value),i=r||Ol(t);return{name:e,type:{type:"fixed-size-list",listSize:t.size,children:[{name:"value",type:s}]},nullable:!1,metadata:i}}function Ol(e){const t={};return"byteOffset"in e&&(t.byteOffset=e.byteOffset.toString(10)),"byteStride"in e&&(t.byteStride=e.byteStride.toString(10)),"normalized"in e&&(t.normalized=e.normalized.toString()),t}async function we(e,t,r,s){let i,n;!Array.isArray(t)&&!Oi(t)?(i=[],n=t):(i=t,n=r);const A=aa(n);let o=e;return typeof e=="string"&&(o=await A(e)),le(e)&&(o=await A(e)),Array.isArray(i)?await Ur(o,i,n):await Ur(o,i,n)}const Ul=1/Math.PI*180,Nl=1/180*Math.PI,Pl={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...Pl}};const nt=globalThis.mathgl.config;function Jl(e,{precision:t=nt.precision}={}){return e=jl(e),"".concat(parseFloat(e.toPrecision(t)))}function ce(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Hl(e){return ql(e)}function kl(e){return Mt(e)}function ql(e,t){return Ui(e,r=>r*Nl,t)}function Mt(e,t){return Ui(e,r=>r*Ul,t)}function Kl(e,t,r){return Ui(e,s=>Math.max(t,Math.min(r,s)))}function $t(e,t,r){const s=nt.EPSILON;r&&(nt.EPSILON=r);try{if(e===t)return!0;if(ce(e)&&ce(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!$t(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=nt.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{nt.EPSILON=s}}function jl(e){return Math.round(e/nt.EPSILON)*nt.EPSILON}function Vl(e){return e.clone?e.clone():new Array(e.length)}function Ui(e,t,r){if(ce(e)){const s=e;r=r||Vl(s);for(let i=0;i<r.length&&i<s.length;++i){const n=typeof e=="number"?e:e[i];r[i]=t(n,i,r)}return r}return t(e)}function Yl(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class Ni extends Yl(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let s=0;s<this.ELEMENTS;++s)this[s]=t[s+r];return this.check()}toArray(t=[],r=0){for(let s=0;s<this.ELEMENTS;++s)t[r+s]=this[s];return t}toObject(t){return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:ce(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(nt)}formatString(t){let r="";for(let s=0;s<this.ELEMENTS;++s)r+=(s>0?", ":"")+Jl(this[s],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!$t(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,s){if(s===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const n=t[i],A=typeof r=="number"?r:r[i];this[i]=n+s*(A-n)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t[s]),r[s]);return this.check()}add(...t){for(const r of t)for(let s=0;s<this.ELEMENTS;++s)this[s]+=r[s];return this.check()}subtract(...t){for(const r of t)for(let s=0;s<this.ELEMENTS;++s)this[s]-=r[s];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(nt.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let s=0;s<this.ELEMENTS;++s)this[s]=Math.min(Math.max(this[s],t),r);return this.check()}get elements(){return this}}function Wl(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function N(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(JSON.stringify(e)));return e}function Je(e,t,r=""){if(nt.debug&&!Wl(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}function V(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}class Pi extends Ni{get x(){return this[0]}set x(t){this[0]=N(t)}get y(){return this[1]}set y(t){this[1]=N(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let s=0;s<this.ELEMENTS;++s){const i=this[s]-t[s];r+=i*i}return N(r)}dot(t){let r=0;for(let s=0;s<this.ELEMENTS;++s)r+=this[s]*t[s];return N(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let s=0;s<this.ELEMENTS;++s)this[s]*=r[s];return this.check()}divide(...t){for(const r of t)for(let s=0;s<this.ELEMENTS;++s)this[s]/=r[s];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return V(t>=0&&t<this.ELEMENTS,"index is out of range"),N(this[t])}setComponent(t,r){return V(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}const He=1e-6;let vt=typeof Float32Array<"u"?Float32Array:Array;function Xl(){const e=new vt(2);return vt!=Float32Array&&(e[0]=0,e[1]=0),e}function zl(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[2]*i,e[1]=r[1]*s+r[3]*i,e}function Zl(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[2]*i+r[4],e[1]=r[1]*s+r[3]*i+r[5],e}function ca(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[3]*i+r[6],e[1]=r[1]*s+r[4]*i+r[7],e}function ha(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[4]*i+r[12],e[1]=r[1]*s+r[5]*i+r[13],e}(function(){const e=Xl();return function(t,r,s,i,n,A){let o,a;for(r||(r=2),s||(s=0),i?a=Math.min(i*r+s,t.length):a=t.length,o=s;o<a;o+=r)e[0]=t[o],e[1]=t[o+1],n(e,e,A),t[o]=e[0],t[o+1]=e[1];return t}})();function ua(e,t,r){const s=t[0],i=t[1],n=r[3]*s+r[7]*i||1;return e[0]=(r[0]*s+r[4]*i)/n,e[1]=(r[1]*s+r[5]*i)/n,e}function la(e,t,r){const s=t[0],i=t[1],n=t[2],A=r[3]*s+r[7]*i+r[11]*n||1;return e[0]=(r[0]*s+r[4]*i+r[8]*n)/A,e[1]=(r[1]*s+r[5]*i+r[9]*n)/A,e[2]=(r[2]*s+r[6]*i+r[10]*n)/A,e}function $l(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[2]*i,e[1]=r[1]*s+r[3]*i,e[2]=t[2],e}function tg(e,t,r){const s=t[0],i=t[1];return e[0]=r[0]*s+r[2]*i,e[1]=r[1]*s+r[3]*i,e[2]=t[2],e[3]=t[3],e}function ga(e,t,r){const s=t[0],i=t[1],n=t[2];return e[0]=r[0]*s+r[3]*i+r[6]*n,e[1]=r[1]*s+r[4]*i+r[7]*n,e[2]=r[2]*s+r[5]*i+r[8]*n,e[3]=t[3],e}class ts extends Pi{constructor(t=0,r=0){super(2),ce(t)&&arguments.length===1?this.copy(t):(nt.debug&&(N(t),N(r)),this[0]=t,this[1]=r)}set(t,r){return this[0]=t,this[1]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return nt.debug&&(N(t.x),N(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return ha(this,this,t),this.check()}transformAsVector(t){return ua(this,this,t),this.check()}transformByMatrix3(t){return ca(this,this,t),this.check()}transformByMatrix2x3(t){return Zl(this,this,t),this.check()}transformByMatrix2(t){return zl(this,this,t),this.check()}}function Ba(){const e=new vt(3);return vt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fa(e){const t=e[0],r=e[1],s=e[2];return Math.sqrt(t*t+r*r+s*s)}function Jn(e,t,r){const s=new vt(3);return s[0]=e,s[1]=t,s[2]=r,s}function eg(e,t){const r=t[0],s=t[1],i=t[2];let n=r*r+s*s+i*i;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Ji(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _r(e,t,r){const s=t[0],i=t[1],n=t[2],A=r[0],o=r[1],a=r[2];return e[0]=i*a-n*o,e[1]=n*A-s*a,e[2]=s*o-i*A,e}function Hi(e,t,r){const s=t[0],i=t[1],n=t[2];let A=r[3]*s+r[7]*i+r[11]*n+r[15];return A=A||1,e[0]=(r[0]*s+r[4]*i+r[8]*n+r[12])/A,e[1]=(r[1]*s+r[5]*i+r[9]*n+r[13])/A,e[2]=(r[2]*s+r[6]*i+r[10]*n+r[14])/A,e}function da(e,t,r){const s=t[0],i=t[1],n=t[2];return e[0]=s*r[0]+i*r[3]+n*r[6],e[1]=s*r[1]+i*r[4]+n*r[7],e[2]=s*r[2]+i*r[5]+n*r[8],e}function Ca(e,t,r){const s=r[0],i=r[1],n=r[2],A=r[3],o=t[0],a=t[1],c=t[2];let h=i*c-n*a,u=n*o-s*c,g=s*a-i*o,l=i*g-n*u,B=n*h-s*g,f=s*u-i*h;const C=A*2;return h*=C,u*=C,g*=C,l*=2,B*=2,f*=2,e[0]=o+h+l,e[1]=a+u+B,e[2]=c+g+f,e}function rg(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[0],n[1]=i[1]*Math.cos(s)-i[2]*Math.sin(s),n[2]=i[1]*Math.sin(s)+i[2]*Math.cos(s),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function sg(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[2]*Math.sin(s)+i[0]*Math.cos(s),n[1]=i[1],n[2]=i[2]*Math.cos(s)-i[0]*Math.sin(s),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function ig(e,t,r,s){const i=[],n=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],n[0]=i[0]*Math.cos(s)-i[1]*Math.sin(s),n[1]=i[0]*Math.sin(s)+i[1]*Math.cos(s),n[2]=i[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function ng(e,t){const r=e[0],s=e[1],i=e[2],n=t[0],A=t[1],o=t[2],a=Math.sqrt((r*r+s*s+i*i)*(n*n+A*A+o*o)),c=a&&Ji(e,t)/a;return Math.acos(Math.min(Math.max(c,-1),1))}const Ag=fa;(function(){const e=Ba();return function(t,r,s,i,n,A){let o,a;for(r||(r=3),s||(s=0),i?a=Math.min(i*r+s,t.length):a=t.length,o=s;o<a;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],n(e,e,A),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();const Ss=[0,0,0];let ar;class d extends Pi{static get ZERO(){return ar||(ar=new d(0,0,0),Object.freeze(ar)),ar}constructor(t=0,r=0,s=0){super(-0,-0,-0),arguments.length===1&&ce(t)?this.copy(t):(nt.debug&&(N(t),N(r),N(s)),this[0]=t,this[1]=r,this[2]=s)}set(t,r,s){return this[0]=t,this[1]=r,this[2]=s,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return nt.debug&&(N(t.x),N(t.y),N(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=N(t)}angle(t){return ng(this,t)}cross(t){return _r(this,this,t),this.check()}rotateX({radians:t,origin:r=Ss}){return rg(this,this,r,t),this.check()}rotateY({radians:t,origin:r=Ss}){return sg(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=Ss}){return ig(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return Hi(this,this,t),this.check()}transformAsVector(t){return la(this,this,t),this.check()}transformByMatrix3(t){return da(this,this,t),this.check()}transformByMatrix2(t){return $l(this,this,t),this.check()}transformByQuaternion(t){return Ca(this,this,t),this.check()}}let cr;class ki extends Pi{static get ZERO(){return cr||(cr=new ki(0,0,0,0),Object.freeze(cr)),cr}constructor(t=0,r=0,s=0,i=0){super(-0,-0,-0,-0),ce(t)&&arguments.length===1?this.copy(t):(nt.debug&&(N(t),N(r),N(s),N(i)),this[0]=t,this[1]=r,this[2]=s,this[3]=i)}set(t,r,s,i){return this[0]=t,this[1]=r,this[2]=s,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return nt.debug&&(N(t.x),N(t.y),N(t.z),N(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=N(t)}get w(){return this[3]}set w(t){this[3]=N(t)}transform(t){return Hi(this,this,t),this.check()}transformByMatrix3(t){return ga(this,this,t),this.check()}transformByMatrix2(t){return tg(this,this,t),this.check()}transformByQuaternion(t){return Ca(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Ia extends Ni{toString(){let t="[";if(nt.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let s=0;s<this.RANK;++s)t+=" ".concat(this[s*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,s){return this[r*this.RANK+t]=N(s),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const s=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[s+i];return r}setColumn(t,r){const s=t*this.RANK;for(let i=0;i<this.RANK;++i)this[s+i]=r[i];return this}}function og(){const e=new vt(9);return vt!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ag(e,t){if(e===t){const r=t[1],s=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=s,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function cg(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],A=t[4],o=t[5],a=t[6],c=t[7],h=t[8],u=h*A-o*c,g=-h*n+o*a,l=c*n-A*a;let B=r*u+s*g+i*l;return B?(B=1/B,e[0]=u*B,e[1]=(-h*s+i*c)*B,e[2]=(o*s-i*A)*B,e[3]=g*B,e[4]=(h*r-i*a)*B,e[5]=(-o*r+i*n)*B,e[6]=l*B,e[7]=(-c*r+s*a)*B,e[8]=(A*r-s*n)*B,e):null}function hg(e){const t=e[0],r=e[1],s=e[2],i=e[3],n=e[4],A=e[5],o=e[6],a=e[7],c=e[8];return t*(c*n-A*a)+r*(-c*i+A*o)+s*(a*i-n*o)}function Hn(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3],o=t[4],a=t[5],c=t[6],h=t[7],u=t[8],g=r[0],l=r[1],B=r[2],f=r[3],C=r[4],m=r[5],Q=r[6],I=r[7],p=r[8];return e[0]=g*s+l*A+B*c,e[1]=g*i+l*o+B*h,e[2]=g*n+l*a+B*u,e[3]=f*s+C*A+m*c,e[4]=f*i+C*o+m*h,e[5]=f*n+C*a+m*u,e[6]=Q*s+I*A+p*c,e[7]=Q*i+I*o+p*h,e[8]=Q*n+I*a+p*u,e}function ug(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3],o=t[4],a=t[5],c=t[6],h=t[7],u=t[8],g=r[0],l=r[1];return e[0]=s,e[1]=i,e[2]=n,e[3]=A,e[4]=o,e[5]=a,e[6]=g*s+l*A+c,e[7]=g*i+l*o+h,e[8]=g*n+l*a+u,e}function lg(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3],o=t[4],a=t[5],c=t[6],h=t[7],u=t[8],g=Math.sin(r),l=Math.cos(r);return e[0]=l*s+g*A,e[1]=l*i+g*o,e[2]=l*n+g*a,e[3]=l*A-g*s,e[4]=l*o-g*i,e[5]=l*a-g*n,e[6]=c,e[7]=h,e[8]=u,e}function kn(e,t,r){const s=r[0],i=r[1];return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gg(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],A=r+r,o=s+s,a=i+i,c=r*A,h=s*A,u=s*o,g=i*A,l=i*o,B=i*a,f=n*A,C=n*o,m=n*a;return e[0]=1-u-B,e[3]=h-m,e[6]=g+C,e[1]=h+m,e[4]=1-c-B,e[7]=l-f,e[2]=g-C,e[5]=l+f,e[8]=1-c-u,e}var ai;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(ai||(ai={}));const Bg=Object.freeze([1,0,0,0,1,0,0,0,1]);class tt extends Ia{static get IDENTITY(){return dg()}static get ZERO(){return fg()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return ai}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(Bg)}fromObject(t){return this.check()}fromQuaternion(t){return gg(this,t),this.check()}set(t,r,s,i,n,A,o,a,c){return this[0]=t,this[1]=r,this[2]=s,this[3]=i,this[4]=n,this[5]=A,this[6]=o,this[7]=a,this[8]=c,this.check()}setRowMajor(t,r,s,i,n,A,o,a,c){return this[0]=t,this[1]=i,this[2]=o,this[3]=r,this[4]=n,this[5]=a,this[6]=s,this[7]=A,this[8]=c,this.check()}determinant(){return hg(this)}transpose(){return ag(this,this),this.check()}invert(){return cg(this,this),this.check()}multiplyLeft(t){return Hn(this,t,this),this.check()}multiplyRight(t){return Hn(this,this,t),this.check()}rotate(t){return lg(this,this,t),this.check()}scale(t){return Array.isArray(t)?kn(this,this,t):kn(this,this,[t,t]),this.check()}translate(t){return ug(this,this,t),this.check()}transform(t,r){let s;switch(t.length){case 2:s=ca(r||[-0,-0],t,this);break;case 3:s=da(r||[-0,-0,-0],t,this);break;case 4:s=ga(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Je(s,t.length),s}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let hr,ur=null;function fg(){return hr||(hr=new tt([0,0,0,0,0,0,0,0,0]),Object.freeze(hr)),hr}function dg(){return ur||(ur=new tt,Object.freeze(ur)),ur}function Cg(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ig(e,t){if(e===t){const r=t[1],s=t[2],i=t[3],n=t[6],A=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=s,e[9]=n,e[11]=t[14],e[12]=i,e[13]=A,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Eg(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],A=t[4],o=t[5],a=t[6],c=t[7],h=t[8],u=t[9],g=t[10],l=t[11],B=t[12],f=t[13],C=t[14],m=t[15],Q=r*o-s*A,I=r*a-i*A,p=r*c-n*A,R=s*a-i*o,y=s*c-n*o,_=i*c-n*a,G=h*f-u*B,T=h*C-g*B,v=h*m-l*B,P=u*C-g*f,K=u*m-l*f,H=g*m-l*C;let x=Q*H-I*K+p*P+R*v-y*T+_*G;return x?(x=1/x,e[0]=(o*H-a*K+c*P)*x,e[1]=(i*K-s*H-n*P)*x,e[2]=(f*_-C*y+m*R)*x,e[3]=(g*y-u*_-l*R)*x,e[4]=(a*v-A*H-c*T)*x,e[5]=(r*H-i*v+n*T)*x,e[6]=(C*p-B*_-m*I)*x,e[7]=(h*_-g*p+l*I)*x,e[8]=(A*K-o*v+c*G)*x,e[9]=(s*v-r*K-n*G)*x,e[10]=(B*y-f*p+m*Q)*x,e[11]=(u*p-h*y-l*Q)*x,e[12]=(o*T-A*P-a*G)*x,e[13]=(r*P-s*T+i*G)*x,e[14]=(f*I-B*R-C*Q)*x,e[15]=(h*R-u*I+g*Q)*x,e):null}function mg(e){const t=e[0],r=e[1],s=e[2],i=e[3],n=e[4],A=e[5],o=e[6],a=e[7],c=e[8],h=e[9],u=e[10],g=e[11],l=e[12],B=e[13],f=e[14],C=e[15],m=t*A-r*n,Q=t*o-s*n,I=r*o-s*A,p=c*B-h*l,R=c*f-u*l,y=h*f-u*B,_=t*y-r*R+s*p,G=n*y-A*R+o*p,T=c*I-h*Q+u*m,v=l*I-B*Q+f*m;return a*_-i*G+C*T-g*v}function qn(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3],o=t[4],a=t[5],c=t[6],h=t[7],u=t[8],g=t[9],l=t[10],B=t[11],f=t[12],C=t[13],m=t[14],Q=t[15];let I=r[0],p=r[1],R=r[2],y=r[3];return e[0]=I*s+p*o+R*u+y*f,e[1]=I*i+p*a+R*g+y*C,e[2]=I*n+p*c+R*l+y*m,e[3]=I*A+p*h+R*B+y*Q,I=r[4],p=r[5],R=r[6],y=r[7],e[4]=I*s+p*o+R*u+y*f,e[5]=I*i+p*a+R*g+y*C,e[6]=I*n+p*c+R*l+y*m,e[7]=I*A+p*h+R*B+y*Q,I=r[8],p=r[9],R=r[10],y=r[11],e[8]=I*s+p*o+R*u+y*f,e[9]=I*i+p*a+R*g+y*C,e[10]=I*n+p*c+R*l+y*m,e[11]=I*A+p*h+R*B+y*Q,I=r[12],p=r[13],R=r[14],y=r[15],e[12]=I*s+p*o+R*u+y*f,e[13]=I*i+p*a+R*g+y*C,e[14]=I*n+p*c+R*l+y*m,e[15]=I*A+p*h+R*B+y*Q,e}function pg(e,t,r){const s=r[0],i=r[1],n=r[2];let A,o,a,c,h,u,g,l,B,f,C,m;return t===e?(e[12]=t[0]*s+t[4]*i+t[8]*n+t[12],e[13]=t[1]*s+t[5]*i+t[9]*n+t[13],e[14]=t[2]*s+t[6]*i+t[10]*n+t[14],e[15]=t[3]*s+t[7]*i+t[11]*n+t[15]):(A=t[0],o=t[1],a=t[2],c=t[3],h=t[4],u=t[5],g=t[6],l=t[7],B=t[8],f=t[9],C=t[10],m=t[11],e[0]=A,e[1]=o,e[2]=a,e[3]=c,e[4]=h,e[5]=u,e[6]=g,e[7]=l,e[8]=B,e[9]=f,e[10]=C,e[11]=m,e[12]=A*s+h*i+B*n+t[12],e[13]=o*s+u*i+f*n+t[13],e[14]=a*s+g*i+C*n+t[14],e[15]=c*s+l*i+m*n+t[15]),e}function yg(e,t,r){const s=r[0],i=r[1],n=r[2];return e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e[3]=t[3]*s,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qg(e,t,r,s){let i=s[0],n=s[1],A=s[2],o=Math.sqrt(i*i+n*n+A*A),a,c,h,u,g,l,B,f,C,m,Q,I,p,R,y,_,G,T,v,P,K,H,x,Y;return o<He?null:(o=1/o,i*=o,n*=o,A*=o,c=Math.sin(r),a=Math.cos(r),h=1-a,u=t[0],g=t[1],l=t[2],B=t[3],f=t[4],C=t[5],m=t[6],Q=t[7],I=t[8],p=t[9],R=t[10],y=t[11],_=i*i*h+a,G=n*i*h+A*c,T=A*i*h-n*c,v=i*n*h-A*c,P=n*n*h+a,K=A*n*h+i*c,H=i*A*h+n*c,x=n*A*h-i*c,Y=A*A*h+a,e[0]=u*_+f*G+I*T,e[1]=g*_+C*G+p*T,e[2]=l*_+m*G+R*T,e[3]=B*_+Q*G+y*T,e[4]=u*v+f*P+I*K,e[5]=g*v+C*P+p*K,e[6]=l*v+m*P+R*K,e[7]=B*v+Q*P+y*K,e[8]=u*H+f*x+I*Y,e[9]=g*H+C*x+p*Y,e[10]=l*H+m*x+R*Y,e[11]=B*H+Q*x+y*Y,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function wg(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[4],A=t[5],o=t[6],a=t[7],c=t[8],h=t[9],u=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*i+c*s,e[5]=A*i+h*s,e[6]=o*i+u*s,e[7]=a*i+g*s,e[8]=c*i-n*s,e[9]=h*i-A*s,e[10]=u*i-o*s,e[11]=g*i-a*s,e}function bg(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[0],A=t[1],o=t[2],a=t[3],c=t[8],h=t[9],u=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*i-c*s,e[1]=A*i-h*s,e[2]=o*i-u*s,e[3]=a*i-g*s,e[8]=n*s+c*i,e[9]=A*s+h*i,e[10]=o*s+u*i,e[11]=a*s+g*i,e}function Dg(e,t,r){const s=Math.sin(r),i=Math.cos(r),n=t[0],A=t[1],o=t[2],a=t[3],c=t[4],h=t[5],u=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*i+c*s,e[1]=A*i+h*s,e[2]=o*i+u*s,e[3]=a*i+g*s,e[4]=c*i-n*s,e[5]=h*i-A*s,e[6]=u*i-o*s,e[7]=g*i-a*s,e}function Rg(e,t){const r=t[0],s=t[1],i=t[2],n=t[4],A=t[5],o=t[6],a=t[8],c=t[9],h=t[10];return e[0]=Math.sqrt(r*r+s*s+i*i),e[1]=Math.sqrt(n*n+A*A+o*o),e[2]=Math.sqrt(a*a+c*c+h*h),e}function Sg(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],A=r+r,o=s+s,a=i+i,c=r*A,h=s*A,u=s*o,g=i*A,l=i*o,B=i*a,f=n*A,C=n*o,m=n*a;return e[0]=1-u-B,e[1]=h+m,e[2]=g-C,e[3]=0,e[4]=h-m,e[5]=1-c-B,e[6]=l+f,e[7]=0,e[8]=g+C,e[9]=l-f,e[10]=1-c-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tg(e,t,r,s,i,n,A){const o=1/(r-t),a=1/(i-s),c=1/(n-A);return e[0]=n*2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n*2*a,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(i+s)*a,e[10]=(A+n)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=A*n*2*c,e[15]=0,e}function _g(e,t,r,s,i){const n=1/Math.tan(t/2);if(e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const A=1/(s-i);e[10]=(i+s)*A,e[14]=2*i*s*A}else e[10]=-1,e[14]=-2*s;return e}const Mg=_g;function Fg(e,t,r,s,i,n,A){const o=1/(t-r),a=1/(s-i),c=1/(n-A);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*o,e[13]=(i+s)*a,e[14]=(A+n)*c,e[15]=1,e}const Gg=Fg;function vg(e,t,r,s){let i,n,A,o,a,c,h,u,g,l;const B=t[0],f=t[1],C=t[2],m=s[0],Q=s[1],I=s[2],p=r[0],R=r[1],y=r[2];return Math.abs(B-p)<He&&Math.abs(f-R)<He&&Math.abs(C-y)<He?Cg(e):(u=B-p,g=f-R,l=C-y,i=1/Math.sqrt(u*u+g*g+l*l),u*=i,g*=i,l*=i,n=Q*l-I*g,A=I*u-m*l,o=m*g-Q*u,i=Math.sqrt(n*n+A*A+o*o),i?(i=1/i,n*=i,A*=i,o*=i):(n=0,A=0,o=0),a=g*o-l*A,c=l*n-u*o,h=u*A-g*n,i=Math.sqrt(a*a+c*c+h*h),i?(i=1/i,a*=i,c*=i,h*=i):(a=0,c=0,h=0),e[0]=n,e[1]=a,e[2]=u,e[3]=0,e[4]=A,e[5]=c,e[6]=g,e[7]=0,e[8]=o,e[9]=h,e[10]=l,e[11]=0,e[12]=-(n*B+A*f+o*C),e[13]=-(a*B+c*f+h*C),e[14]=-(u*B+g*f+l*C),e[15]=1,e)}function Lg(){const e=new vt(4);return vt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function xg(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Og(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Ug(e){const t=e[0],r=e[1],s=e[2],i=e[3];return Math.sqrt(t*t+r*r+s*s+i*i)}function Ng(e){const t=e[0],r=e[1],s=e[2],i=e[3];return t*t+r*r+s*s+i*i}function Pg(e,t){const r=t[0],s=t[1],i=t[2],n=t[3];let A=r*r+s*s+i*i+n*n;return A>0&&(A=1/Math.sqrt(A)),e[0]=r*A,e[1]=s*A,e[2]=i*A,e[3]=n*A,e}function Jg(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Hg(e,t,r,s){const i=t[0],n=t[1],A=t[2],o=t[3];return e[0]=i+s*(r[0]-i),e[1]=n+s*(r[1]-n),e[2]=A+s*(r[2]-A),e[3]=o+s*(r[3]-o),e}function kg(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3];return e[0]=r[0]*s+r[4]*i+r[8]*n+r[12]*A,e[1]=r[1]*s+r[5]*i+r[9]*n+r[13]*A,e[2]=r[2]*s+r[6]*i+r[10]*n+r[14]*A,e[3]=r[3]*s+r[7]*i+r[11]*n+r[15]*A,e}function qg(e,t,r){const s=t[0],i=t[1],n=t[2],A=r[0],o=r[1],a=r[2],c=r[3],h=c*s+o*n-a*i,u=c*i+a*s-A*n,g=c*n+A*i-o*s,l=-A*s-o*i-a*n;return e[0]=h*c+l*-A+u*-a-g*-o,e[1]=u*c+l*-o+g*-A-h*-a,e[2]=g*c+l*-a+h*-o-u*-A,e[3]=t[3],e}(function(){const e=Lg();return function(t,r,s,i,n,A){let o,a;for(r||(r=4),s||(s=0),i?a=Math.min(i*r+s,t.length):a=t.length,o=s;o<a;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],n(e,e,A),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();var ci;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(ci||(ci={}));const Kg=45*Math.PI/180,jg=1,Ts=.1,_s=500,Vg=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class q extends Ia{static get IDENTITY(){return Wg()}static get ZERO(){return Yg()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return ci}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,s,i,n,A,o,a,c,h,u,g,l,B,f,C){return this[0]=t,this[1]=r,this[2]=s,this[3]=i,this[4]=n,this[5]=A,this[6]=o,this[7]=a,this[8]=c,this[9]=h,this[10]=u,this[11]=g,this[12]=l,this[13]=B,this[14]=f,this[15]=C,this.check()}setRowMajor(t,r,s,i,n,A,o,a,c,h,u,g,l,B,f,C){return this[0]=t,this[1]=n,this[2]=c,this[3]=l,this[4]=r,this[5]=A,this[6]=h,this[7]=B,this[8]=s,this[9]=o,this[10]=u,this[11]=f,this[12]=i,this[13]=a,this[14]=g,this[15]=C,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(Vg)}fromObject(t){return this.check()}fromQuaternion(t){return Sg(this,t),this.check()}frustum(t){const{left:r,right:s,bottom:i,top:n,near:A=Ts,far:o=_s}=t;return o===1/0?Xg(this,r,s,i,n,A):Tg(this,r,s,i,n,A,o),this.check()}lookAt(t){const{eye:r,center:s=[0,0,0],up:i=[0,1,0]}=t;return vg(this,r,s,i),this.check()}ortho(t){const{left:r,right:s,bottom:i,top:n,near:A=Ts,far:o=_s}=t;return Gg(this,r,s,i,n,A,o),this.check()}orthographic(t){const{fovy:r=Kg,aspect:s=jg,focalDistance:i=1,near:n=Ts,far:A=_s}=t;Kn(r);const o=r/2,a=i*Math.tan(o),c=a*s;return this.ortho({left:-c,right:c,bottom:-a,top:a,near:n,far:A})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:s=1,near:i=.1,far:n=500}=t;return Kn(r),Mg(this,r,s,i,n),this.check()}determinant(){return mg(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const s=this.getScale(r),i=1/s[0],n=1/s[1],A=1/s[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*A,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*n,t[6]=this[6]*A,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*n,t[10]=this[10]*A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const s=this.getScale(r),i=1/s[0],n=1/s[1],A=1/s[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*A,t[3]=this[4]*i,t[4]=this[5]*n,t[5]=this[6]*A,t[6]=this[8]*i,t[7]=this[9]*n,t[8]=this[10]*A,t}transpose(){return Ig(this,this),this.check()}invert(){return Eg(this,this),this.check()}multiplyLeft(t){return qn(this,t,this),this.check()}multiplyRight(t){return qn(this,this,t),this.check()}rotateX(t){return wg(this,this,t),this.check()}rotateY(t){return bg(this,this,t),this.check()}rotateZ(t){return Dg(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return Qg(this,this,t,r),this.check()}scale(t){return yg(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return pg(this,this,t),this.check()}transform(t,r){return t.length===4?(r=kg(r||[-0,-0,-0,-0],t,this),Je(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:s}=t;let i;switch(s){case 2:i=ha(r||[-0,-0],t,this);break;case 3:i=Hi(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Je(i,t.length),i}transformAsVector(t,r){let s;switch(t.length){case 2:s=ua(r||[-0,-0],t,this);break;case 3:s=la(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Je(s,t.length),s}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,s){return this.identity().translate([t,r,s])}}let lr,gr;function Yg(){return lr||(lr=new q([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(lr)),lr}function Wg(){return gr||(gr=new q,Object.freeze(gr)),gr}function Kn(e){if(e>Math.PI*2)throw Error("expected radians")}function Xg(e,t,r,s,i,n){const A=2*n/(r-t),o=2*n/(i-s),a=(r+t)/(r-t),c=(i+s)/(i-s),h=-1,u=-1,g=-2*n;return e[0]=A,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=a,e[9]=c,e[10]=h,e[11]=u,e[12]=0,e[13]=0,e[14]=g,e[15]=0,e}function jn(){const e=new vt(4);return vt!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function zg(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ea(e,t,r){r=r*.5;const s=Math.sin(r);return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=Math.cos(r),e}function Vn(e,t,r){const s=t[0],i=t[1],n=t[2],A=t[3],o=r[0],a=r[1],c=r[2],h=r[3];return e[0]=s*h+A*o+i*c-n*a,e[1]=i*h+A*a+n*o-s*c,e[2]=n*h+A*c+s*a-i*o,e[3]=A*h-s*o-i*a-n*c,e}function Zg(e,t,r){r*=.5;const s=t[0],i=t[1],n=t[2],A=t[3],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a+A*o,e[1]=i*a+n*o,e[2]=n*a-i*o,e[3]=A*a-s*o,e}function $g(e,t,r){r*=.5;const s=t[0],i=t[1],n=t[2],A=t[3],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a-n*o,e[1]=i*a+A*o,e[2]=n*a+s*o,e[3]=A*a-i*o,e}function tB(e,t,r){r*=.5;const s=t[0],i=t[1],n=t[2],A=t[3],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a+i*o,e[1]=i*a-s*o,e[2]=n*a+A*o,e[3]=A*a-n*o,e}function eB(e,t){const r=t[0],s=t[1],i=t[2];return e[0]=r,e[1]=s,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-s*s-i*i)),e}function Mr(e,t,r,s){const i=t[0],n=t[1],A=t[2],o=t[3];let a=r[0],c=r[1],h=r[2],u=r[3],g,l,B,f,C;return g=i*a+n*c+A*h+o*u,g<0&&(g=-g,a=-a,c=-c,h=-h,u=-u),1-g>He?(l=Math.acos(g),C=Math.sin(l),B=Math.sin((1-s)*l)/C,f=Math.sin(s*l)/C):(B=1-s,f=s),e[0]=B*i+f*a,e[1]=B*n+f*c,e[2]=B*A+f*h,e[3]=B*o+f*u,e}function rB(e,t){const r=t[0],s=t[1],i=t[2],n=t[3],A=r*r+s*s+i*i+n*n,o=A?1/A:0;return e[0]=-r*o,e[1]=-s*o,e[2]=-i*o,e[3]=n*o,e}function sB(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function ma(e,t){const r=t[0]+t[4]+t[8];let s;if(r>0)s=Math.sqrt(r+1),e[3]=.5*s,s=.5/s,e[0]=(t[5]-t[7])*s,e[1]=(t[6]-t[2])*s,e[2]=(t[1]-t[3])*s;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);const n=(i+1)%3,A=(i+2)%3;s=Math.sqrt(t[i*3+i]-t[n*3+n]-t[A*3+A]+1),e[i]=.5*s,s=.5/s,e[3]=(t[n*3+A]-t[A*3+n])*s,e[n]=(t[n*3+i]+t[i*3+n])*s,e[A]=(t[A*3+i]+t[i*3+A])*s}return e}const iB=xg,nB=Og,AB=Jg,oB=Hg,aB=Ug,cB=Ng,pa=Pg,hB=function(){const e=Ba(),t=Jn(1,0,0),r=Jn(0,1,0);return function(s,i,n){const A=Ji(i,n);return A<-.999999?(_r(e,t,i),Ag(e)<1e-6&&_r(e,r,i),eg(e,e),Ea(s,e,Math.PI),s):A>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(_r(e,i,n),s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=1+A,pa(s,s))}}();(function(){const e=jn(),t=jn();return function(r,s,i,n,A,o){return Mr(e,s,A,o),Mr(t,i,n,o),Mr(r,e,t,2*o*(1-o)),r}})();(function(){const e=og();return function(t,r,s,i){return e[0]=s[0],e[3]=s[1],e[6]=s[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],pa(t,ma(t,e))}})();const uB=[0,0,0,1];class Nr extends Ni{constructor(t=0,r=0,s=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,s,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,s,i){return this[0]=t,this[1]=r,this[2]=s,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return ma(this,t),this.check()}fromAxisRotation(t,r){return Ea(this,t,r),this.check()}identity(){return zg(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=N(t)}get y(){return this[1]}set y(t){this[1]=N(t)}get z(){return this[2]}set z(t){this[2]=N(t)}get w(){return this[3]}set w(t){this[3]=N(t)}len(){return aB(this)}lengthSquared(){return cB(this)}dot(t){return AB(this,t)}rotationTo(t,r){return hB(this,t,r),this.check()}add(t){return iB(this,this,t),this.check()}calculateW(){return eB(this,this),this.check()}conjugate(){return sB(this,this),this.check()}invert(){return rB(this,this),this.check()}lerp(t,r,s){return s===void 0?this.lerp(this,t,r):(oB(this,t,r,s),this.check())}multiplyRight(t){return Vn(this,this,t),this.check()}multiplyLeft(t){return Vn(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return Zg(this,this,t),this.check()}rotateY(t){return $g(this,this,t),this.check()}rotateZ(t){return tB(this,this,t),this.check()}scale(t){return nB(this,this,t),this.check()}slerp(t,r,s){let i,n,A;switch(arguments.length){case 1:({start:i=uB,target:n,ratio:A}=t);break;case 2:i=this,n=t,A=r;break;default:i=t,n=r,A=s}return Mr(this,i,n,A),this.check()}transformVector4(t,r=new ki){return qg(r,t,this),Je(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}function Ve(e){"@babel/helpers - typeof";return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ve(e)}function lB(e,t){if(Ve(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t||"default");if(Ve(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gB(e){var t=lB(e,"string");return Ve(t)=="symbol"?t:String(t)}function F(e,t,r){return t=gB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const BB=.1,fB=1e-12,ya=1e-15,dB=1e-20,CB=6378137,IB=6378137,EB=6356752314245179e-9;function es(e){return e}new d;function mB(e,t=[],r=es){return"longitude"in e?(t[0]=r(e.longitude),t[1]=r(e.latitude),t[2]=e.height):"x"in e?(t[0]=r(e.x),t[1]=r(e.y),t[2]=e.z):(t[0]=r(e[0]),t[1]=r(e[1]),t[2]=e[2]),t}function pB(e,t=[]){return mB(e,t,nt._cartographicRadians?es:Hl)}function yB(e,t,r=es){return"longitude"in t?(t.longitude=r(e[0]),t.latitude=r(e[1]),t.height=e[2]):"x"in t?(t.x=r(e[0]),t.y=r(e[1]),t.z=e[2]):(t[0]=r(e[0]),t[1]=r(e[1]),t[2]=e[2]),t}function QB(e,t){return yB(e,t,nt._cartographicRadians?es:kl)}const Yn=1e-14,wB=new d,Wn={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},Ms={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Se={east:new d,north:new d,up:new d,west:new d,south:new d,down:new d},bB=new d,DB=new d,RB=new d;function Xn(e,t,r,s,i,n){const A=Wn[t]&&Wn[t][r];V(A&&(!s||s===A));let o,a,c;const h=wB.copy(i);if($t(h.x,0,Yn)&&$t(h.y,0,Yn)){const u=Math.sign(h.z);o=bB.fromArray(Ms[t]),t!=="east"&&t!=="west"&&o.scale(u),a=DB.fromArray(Ms[r]),r!=="east"&&r!=="west"&&a.scale(u),c=RB.fromArray(Ms[s]),s!=="east"&&s!=="west"&&c.scale(u)}else{const{up:u,east:g,north:l}=Se;g.set(-h.y,h.x,0).normalize(),e.geodeticSurfaceNormal(h,u),l.copy(u).cross(g);const{down:B,west:f,south:C}=Se;B.copy(u).scale(-1),f.copy(g).scale(-1),C.copy(l).scale(-1),o=Se[t],a=Se[r],c=Se[s]}return n[0]=o.x,n[1]=o.y,n[2]=o.z,n[3]=0,n[4]=a.x,n[5]=a.y,n[6]=a.z,n[7]=0,n[8]=c.x,n[9]=c.y,n[10]=c.z,n[11]=0,n[12]=h.x,n[13]=h.y,n[14]=h.z,n[15]=1,n}const Ce=new d,SB=new d,TB=new d;function _B(e,t,r=[]){const{oneOverRadii:s,oneOverRadiiSquared:i,centerToleranceSquared:n}=t;Ce.from(e);const A=Ce.x,o=Ce.y,a=Ce.z,c=s.x,h=s.y,u=s.z,g=A*A*c*c,l=o*o*h*h,B=a*a*u*u,f=g+l+B,C=Math.sqrt(1/f);if(!Number.isFinite(C))return;const m=SB;if(m.copy(e).scale(C),f<n)return m.to(r);const Q=i.x,I=i.y,p=i.z,R=TB;R.set(m.x*Q*2,m.y*I*2,m.z*p*2);let y=(1-C)*Ce.len()/(.5*R.len()),_=0,G,T,v,P;do{y-=_,G=1/(1+y*Q),T=1/(1+y*I),v=1/(1+y*p);const K=G*G,H=T*T,x=v*v,Y=K*G,mt=H*T,W=x*v;P=g*K+l*H+B*x-1;const j=-2*(g*Y*Q+l*mt*I+B*W*p);_=P/j}while(Math.abs(P)>fB);return Ce.scale([G,T,v]).to(r)}const Br=new d,zn=new d,MB=new d,Tt=new d,FB=new d,fr=new d;class k{constructor(t=0,r=0,s=0){F(this,"radii",void 0),F(this,"radiiSquared",void 0),F(this,"radiiToTheFourth",void 0),F(this,"oneOverRadii",void 0),F(this,"oneOverRadiiSquared",void 0),F(this,"minimumRadius",void 0),F(this,"maximumRadius",void 0),F(this,"centerToleranceSquared",BB),F(this,"squaredXOverSquaredZ",void 0),V(t>=0),V(r>=0),V(s>=0),this.radii=new d(t,r,s),this.radiiSquared=new d(t*t,r*r,s*s),this.radiiToTheFourth=new d(t*t*t*t,r*r*r*r,s*s*s*s),this.oneOverRadii=new d(t===0?0:1/t,r===0?0:1/r,s===0?0:1/s),this.oneOverRadiiSquared=new d(t===0?0:1/(t*t),r===0?0:1/(r*r),s===0?0:1/(s*s)),this.minimumRadius=Math.min(t,r,s),this.maximumRadius=Math.max(t,r,s),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}equals(t){return this===t||!!(t&&this.radii.equals(t.radii))}toString(){return this.radii.toString()}cartographicToCartesian(t,r=[0,0,0]){const s=zn,i=MB,[,,n]=t;this.geodeticSurfaceNormalCartographic(t,s),i.copy(this.radiiSquared).scale(s);const A=Math.sqrt(s.dot(i));return i.scale(1/A),s.scale(n),i.add(s),i.to(r)}cartesianToCartographic(t,r=[0,0,0]){fr.from(t);const s=this.scaleToGeodeticSurface(fr,Tt);if(!s)return;const i=this.geodeticSurfaceNormal(s,zn),n=FB;n.copy(fr).subtract(s);const A=Math.atan2(i.y,i.x),o=Math.asin(i.z),a=Math.sign(Ji(n,fr))*fa(n);return QB([A,o,a],r)}eastNorthUpToFixedFrame(t,r=new q){return Xn(this,"east","north","up",t,r)}localFrameToFixedFrame(t,r,s,i,n=new q){return Xn(this,t,r,s,i,n)}geocentricSurfaceNormal(t,r=[0,0,0]){return Br.from(t).normalize().to(r)}geodeticSurfaceNormalCartographic(t,r=[0,0,0]){const s=pB(t),i=s[0],n=s[1],A=Math.cos(n);return Br.set(A*Math.cos(i),A*Math.sin(i),Math.sin(n)).normalize(),Br.to(r)}geodeticSurfaceNormal(t,r=[0,0,0]){return Br.from(t).scale(this.oneOverRadiiSquared).normalize().to(r)}scaleToGeodeticSurface(t,r){return _B(t,this,r)}scaleToGeocentricSurface(t,r=[0,0,0]){Tt.from(t);const s=Tt.x,i=Tt.y,n=Tt.z,A=this.oneOverRadiiSquared,o=1/Math.sqrt(s*s*A.x+i*i*A.y+n*n*A.z);return Tt.multiplyScalar(o).to(r)}transformPositionToScaledSpace(t,r=[0,0,0]){return Tt.from(t).scale(this.oneOverRadii).to(r)}transformPositionFromScaledSpace(t,r=[0,0,0]){return Tt.from(t).scale(this.radii).to(r)}getSurfaceNormalIntersectionWithZAxis(t,r=0,s=[0,0,0]){V($t(this.radii.x,this.radii.y,ya)),V(this.radii.z>0),Tt.from(t);const i=Tt.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-r))return Tt.set(0,0,i).to(s)}}F(k,"WGS84",new k(CB,IB,EB));const Qt={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};new d;new d;const Te=new d,Zn=new d;class sr{constructor(t=[0,0,0],r=0){F(this,"center",void 0),F(this,"radius",void 0),this.radius=-0,this.center=new d,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Te.from(r),this.center=new d().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||!!t&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new sr(this.center,this.radius)}union(t){const r=this.center,s=this.radius,i=t.center,n=t.radius,A=Te.copy(i).subtract(r),o=A.magnitude();if(s>=o+n)return this.clone();if(n>=o+s)return t.clone();const a=(s+o+n)*.5;return Zn.copy(A).scale((-s+a)/o).add(r),this.center.copy(Zn),this.radius=a,this}expand(t){const r=Te.from(t).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}transform(t){this.center.transform(t);const r=Rg(Te,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const r=Te.from(t).subtract(this.center);return Math.max(0,r.len()-this.radius)}intersectPlane(t){const r=this.center,s=this.radius,i=t.normal.dot(r)+t.distance;return i<-s?Qt.OUTSIDE:i<s?Qt.INTERSECTING:Qt.INSIDE}}const GB=new d,vB=new d,dr=new d,Cr=new d,Ir=new d,LB=new d,xB=new d,kt={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class ir{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){F(this,"center",void 0),F(this,"halfAxes",void 0),this.center=new d().from(t),this.halfAxes=new tt(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),s=this.halfAxes.getColumn(2);return[new d(t).len(),new d(r).len(),new d(s).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),s=this.halfAxes.getColumn(2),i=new d(t).normalize(),n=new d(r).normalize(),A=new d(s).normalize();return new Nr().fromMatrix3(new tt([...i,...n,...A]))}fromCenterHalfSizeQuaternion(t,r,s){const i=new Nr(s),n=new tt().fromQuaternion(i);return n[0]=n[0]*r[0],n[1]=n[1]*r[0],n[2]=n[2]*r[0],n[3]=n[3]*r[1],n[4]=n[4]*r[1],n[5]=n[5]*r[1],n[6]=n[6]*r[2],n[7]=n[7]*r[2],n[8]=n[8]*r[2],this.center=new d().from(t),this.halfAxes=n,this}clone(){return new ir(this.center,this.halfAxes)}equals(t){return this===t||!!t&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new sr){const r=this.halfAxes,s=r.getColumn(0,dr),i=r.getColumn(1,Cr),n=r.getColumn(2,Ir),A=GB.copy(s).add(i).add(n);return t.center.copy(this.center),t.radius=A.magnitude(),t}intersectPlane(t){const r=this.center,s=t.normal,i=this.halfAxes,n=s.x,A=s.y,o=s.z,a=Math.abs(n*i[kt.COLUMN0ROW0]+A*i[kt.COLUMN0ROW1]+o*i[kt.COLUMN0ROW2])+Math.abs(n*i[kt.COLUMN1ROW0]+A*i[kt.COLUMN1ROW1]+o*i[kt.COLUMN1ROW2])+Math.abs(n*i[kt.COLUMN2ROW0]+A*i[kt.COLUMN2ROW1]+o*i[kt.COLUMN2ROW2]),c=s.dot(r)+t.distance;return c<=-a?Qt.OUTSIDE:c>=a?Qt.INSIDE:Qt.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=vB.from(t).subtract(this.center),s=this.halfAxes,i=s.getColumn(0,dr),n=s.getColumn(1,Cr),A=s.getColumn(2,Ir),o=i.magnitude(),a=n.magnitude(),c=A.magnitude();i.normalize(),n.normalize(),A.normalize();let h=0,u;return u=Math.abs(r.dot(i))-o,u>0&&(h+=u*u),u=Math.abs(r.dot(n))-a,u>0&&(h+=u*u),u=Math.abs(r.dot(A))-c,u>0&&(h+=u*u),h}computePlaneDistances(t,r,s=[-0,-0]){let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;const A=this.center,o=this.halfAxes,a=o.getColumn(0,dr),c=o.getColumn(1,Cr),h=o.getColumn(2,Ir),u=LB.copy(a).add(c).add(h).add(A),g=xB.copy(u).subtract(t);let l=r.dot(g);return i=Math.min(l,i),n=Math.max(l,n),u.copy(A).add(a).add(c).subtract(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),u.copy(A).add(a).subtract(c).add(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),u.copy(A).add(a).subtract(c).subtract(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),A.copy(u).subtract(a).add(c).add(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),A.copy(u).subtract(a).add(c).subtract(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),A.copy(u).subtract(a).subtract(c).add(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),A.copy(u).subtract(a).subtract(c).subtract(h),g.copy(u).subtract(t),l=r.dot(g),i=Math.min(l,i),n=Math.max(l,n),s[0]=i,s[1]=n,s}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,dr);r.transformAsPoint(t);const s=this.halfAxes.getColumn(1,Cr);s.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Ir);return i.transformAsPoint(t),this.halfAxes=new tt([...r,...s,...i]),this}getTransform(){throw new Error("not implemented")}}const $n=new d,tA=new d;class ot{constructor(t=[0,0,1],r=0){F(this,"normal",void 0),F(this,"distance",void 0),this.normal=new d,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return V(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=$n.from(t),this.normal.from(r).normalize();const s=-this.normal.dot(t);return this.distance=s,this}fromCoefficients(t,r,s,i){return this.normal.set(t,r,s),V($t(this.normal.len(),1)),this.distance=i,this}clone(){return new ot(this.normal,this.distance)}equals(t){return $t(this.distance,t.distance)&&$t(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=tA.copy(this.normal).transformAsVector(t).normalize(),s=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(s,r)}projectPointOntoPlane(t,r=[0,0,0]){const s=$n.from(t),i=this.getPointDistance(s),n=tA.copy(this.normal).scale(i);return s.subtract(n).to(r)}}const eA=[new d([1,0,0]),new d([0,1,0]),new d([0,0,1])],rA=new d,OB=new d;class It{constructor(t=[]){F(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*eA.length;const r=t.center,s=t.radius;let i=0;for(const n of eA){let A=this.planes[i],o=this.planes[i+1];A||(A=this.planes[i]=new ot),o||(o=this.planes[i+1]=new ot);const a=rA.copy(n).scale(-s).add(r);A.fromPointNormal(a,n);const c=rA.copy(n).scale(s).add(r),h=OB.copy(n).negate();o.fromPointNormal(c,h),i+=2}return this}computeVisibility(t){let r=Qt.INSIDE;for(const s of this.planes)switch(t.intersectPlane(s)){case Qt.OUTSIDE:return Qt.OUTSIDE;case Qt.INTERSECTING:r=Qt.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(V(Number.isFinite(r),"parentPlaneMask is required."),r===It.MASK_OUTSIDE||r===It.MASK_INSIDE)return r;let s=It.MASK_INSIDE;const i=this.planes;for(let n=0;n<this.planes.length;++n){const A=n<31?1<<n:0;if(n<31&&!(r&A))continue;const o=i[n],a=t.intersectPlane(o);if(a===Qt.OUTSIDE)return It.MASK_OUTSIDE;a===Qt.INTERSECTING&&(s|=A)}return s}}F(It,"MASK_OUTSIDE",4294967295);F(It,"MASK_INSIDE",0);F(It,"MASK_INDETERMINATE",2147483647);const UB=new d,NB=new d,PB=new d,JB=new d,HB=new d;class Pr{constructor(t={}){F(this,"left",void 0),F(this,"_left",void 0),F(this,"right",void 0),F(this,"_right",void 0),F(this,"top",void 0),F(this,"_top",void 0),F(this,"bottom",void 0),F(this,"_bottom",void 0),F(this,"near",void 0),F(this,"_near",void 0),F(this,"far",void 0),F(this,"_far",void 0),F(this,"_cullingVolume",new It([new ot,new ot,new ot,new ot,new ot,new ot])),F(this,"_perspectiveMatrix",new q),F(this,"_infinitePerspective",new q);const{near:r=1,far:s=5e8}=t;this.left=t.left,this._left=void 0,this.right=t.right,this._right=void 0,this.top=t.top,this._top=void 0,this.bottom=t.bottom,this._bottom=void 0,this.near=r,this._near=r,this.far=s,this._far=s}clone(){return new Pr({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}equals(t){return t&&t instanceof Pr&&this.right===t.right&&this.left===t.left&&this.top===t.top&&this.bottom===t.bottom&&this.near===t.near&&this.far===t.far}get projectionMatrix(){return this._update(),this._perspectiveMatrix}get infiniteProjectionMatrix(){return this._update(),this._infinitePerspective}computeCullingVolume(t,r,s){V(t,"position is required."),V(r,"direction is required."),V(s,"up is required.");const i=this._cullingVolume.planes;s=UB.copy(s).normalize();const n=NB.copy(r).cross(s).normalize(),A=PB.copy(r).multiplyByScalar(this.near).add(t),o=JB.copy(r).multiplyByScalar(this.far).add(t);let a=HB;return a.copy(n).multiplyByScalar(this.left).add(A).subtract(t).cross(s),i[0].fromPointNormal(t,a),a.copy(n).multiplyByScalar(this.right).add(A).subtract(t).cross(s).negate(),i[1].fromPointNormal(t,a),a.copy(s).multiplyByScalar(this.bottom).add(A).subtract(t).cross(n).negate(),i[2].fromPointNormal(t,a),a.copy(s).multiplyByScalar(this.top).add(A).subtract(t).cross(n),i[3].fromPointNormal(t,a),a=new d().copy(r),i[4].fromPointNormal(A,a),a.negate(),i[5].fromPointNormal(o,a),this._cullingVolume}getPixelDimensions(t,r,s,i){this._update(),V(Number.isFinite(t)&&Number.isFinite(r)),V(t>0),V(r>0),V(s>0),V(i);const n=1/this.near;let A=this.top*n;const o=2*s*A/r;A=this.right*n;const a=2*s*A/t;return i.x=a,i.y=o,i}_update(){V(Number.isFinite(this.right)&&Number.isFinite(this.left)&&Number.isFinite(this.top)&&Number.isFinite(this.bottom)&&Number.isFinite(this.near)&&Number.isFinite(this.far));const{top:t,bottom:r,right:s,left:i,near:n,far:A}=this;(t!==this._top||r!==this._bottom||i!==this._left||s!==this._right||n!==this._near||A!==this._far)&&(V(this.near>0&&this.near<this.far,"near must be greater than zero and less than far."),this._left=i,this._right=s,this._top=t,this._bottom=r,this._near=n,this._far=A,this._perspectiveMatrix=new q().frustum({left:i,right:s,bottom:r,top:t,near:n,far:A}),this._infinitePerspective=new q().frustum({left:i,right:s,bottom:r,top:t,near:n,far:1/0}))}}const kB=e=>e!==null&&typeof e<"u";class Jr{constructor(t={}){F(this,"_offCenterFrustum",new Pr),F(this,"fov",void 0),F(this,"_fov",void 0),F(this,"_fovy",void 0),F(this,"_sseDenominator",void 0),F(this,"aspectRatio",void 0),F(this,"_aspectRatio",void 0),F(this,"near",void 0),F(this,"_near",void 0),F(this,"far",void 0),F(this,"_far",void 0),F(this,"xOffset",void 0),F(this,"_xOffset",void 0),F(this,"yOffset",void 0),F(this,"_yOffset",void 0);const{fov:r,aspectRatio:s,near:i=1,far:n=5e8,xOffset:A=0,yOffset:o=0}=t;this.fov=r,this.aspectRatio=s,this.near=i,this.far=n,this.xOffset=A,this.yOffset=o}clone(){return new Jr({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}equals(t){return!kB(t)||!(t instanceof Jr)?!1:(this._update(),t._update(),this.fov===t.fov&&this.aspectRatio===t.aspectRatio&&this.near===t.near&&this.far===t.far&&this._offCenterFrustum.equals(t._offCenterFrustum))}get projectionMatrix(){return this._update(),this._offCenterFrustum.projectionMatrix}get infiniteProjectionMatrix(){return this._update(),this._offCenterFrustum.infiniteProjectionMatrix}get fovy(){return this._update(),this._fovy}get sseDenominator(){return this._update(),this._sseDenominator}computeCullingVolume(t,r,s){return this._update(),this._offCenterFrustum.computeCullingVolume(t,r,s)}getPixelDimensions(t,r,s,i){return this._update(),this._offCenterFrustum.getPixelDimensions(t,r,s,i||new ts)}_update(){V(Number.isFinite(this.fov)&&Number.isFinite(this.aspectRatio)&&Number.isFinite(this.near)&&Number.isFinite(this.far));const t=this._offCenterFrustum;(this.fov!==this._fov||this.aspectRatio!==this._aspectRatio||this.near!==this._near||this.far!==this._far||this.xOffset!==this._xOffset||this.yOffset!==this._yOffset)&&(V(this.fov>=0&&this.fov<Math.PI),V(this.aspectRatio>0),V(this.near>=0&&this.near<this.far),this._aspectRatio=this.aspectRatio,this._fov=this.fov,this._fovy=this.aspectRatio<=1?this.fov:Math.atan(Math.tan(this.fov*.5)/this.aspectRatio)*2,this._near=this.near,this._far=this.far,this._sseDenominator=2*Math.tan(.5*this._fovy),this._xOffset=this.xOffset,this._yOffset=this.yOffset,t.top=this.near*Math.tan(.5*this._fovy),t.bottom=-t.top,t.right=this.aspectRatio*t.top,t.left=-t.right,t.near=this.near,t.far=this.far,t.right+=this.xOffset,t.left+=this.xOffset,t.top+=this.yOffset,t.bottom+=this.yOffset)}}new d;new d;new d;new d;new d;new d;new d;new d;new d;new d;new d;new d;const Ot=new tt,qB=new tt,KB=new tt,Er=new tt,sA=new tt;function jB(e,t={}){const r=dB,s=10;let i=0,n=0;const A=qB,o=KB;A.identity(),o.copy(e);const a=r*VB(o);for(;n<s&&YB(o)>a;)WB(o,Er),sA.copy(Er).transpose(),o.multiplyRight(Er),o.multiplyLeft(sA),A.multiplyRight(Er),++i>2&&(++n,i=0);return t.unitary=A.toTarget(t.unitary),t.diagonal=o.toTarget(t.diagonal),t}function VB(e){let t=0;for(let r=0;r<9;++r){const s=e[r];t+=s*s}return Math.sqrt(t)}const hi=[1,0,0],ui=[2,2,1];function YB(e){let t=0;for(let r=0;r<3;++r){const s=e[Ot.getElementIndex(ui[r],hi[r])];t+=2*s*s}return Math.sqrt(t)}function WB(e,t){const r=ya;let s=0,i=1;for(let c=0;c<3;++c){const h=Math.abs(e[Ot.getElementIndex(ui[c],hi[c])]);h>s&&(i=c,s=h)}const n=hi[i],A=ui[i];let o=1,a=0;if(Math.abs(e[Ot.getElementIndex(A,n)])>r){const c=e[Ot.getElementIndex(A,A)],h=e[Ot.getElementIndex(n,n)],u=e[Ot.getElementIndex(A,n)],g=(c-h)/2/u;let l;g<0?l=-1/(-g+Math.sqrt(1+g*g)):l=1/(g+Math.sqrt(1+g*g)),o=1/Math.sqrt(1+l*l),a=l*o}return tt.IDENTITY.to(t),t[Ot.getElementIndex(n,n)]=t[Ot.getElementIndex(A,A)]=o,t[Ot.getElementIndex(A,n)]=a,t[Ot.getElementIndex(n,A)]=-a,t}const Xt=new d,XB=new d,zB=new d,ZB=new d,$B=new d,tf=new tt,ef={diagonal:new tt,unitary:new tt};function rf(e,t=new ir){if(!e||e.length===0)return t.halfAxes=new tt([0,0,0,0,0,0,0,0,0]),t.center=new d,t;const r=e.length,s=new d(0,0,0);for(const T of e)s.add(T);const i=1/r;s.multiplyByScalar(i);let n=0,A=0,o=0,a=0,c=0,h=0;for(const T of e){const v=Xt.copy(T).subtract(s);n+=v.x*v.x,A+=v.x*v.y,o+=v.x*v.z,a+=v.y*v.y,c+=v.y*v.z,h+=v.z*v.z}n*=i,A*=i,o*=i,a*=i,c*=i,h*=i;const u=tf;u[0]=n,u[1]=A,u[2]=o,u[3]=A,u[4]=a,u[5]=c,u[6]=o,u[7]=c,u[8]=h;const{unitary:g}=jB(u,ef),l=t.halfAxes.copy(g);let B=l.getColumn(0,zB),f=l.getColumn(1,ZB),C=l.getColumn(2,$B),m=-Number.MAX_VALUE,Q=-Number.MAX_VALUE,I=-Number.MAX_VALUE,p=Number.MAX_VALUE,R=Number.MAX_VALUE,y=Number.MAX_VALUE;for(const T of e)Xt.copy(T),m=Math.max(Xt.dot(B),m),Q=Math.max(Xt.dot(f),Q),I=Math.max(Xt.dot(C),I),p=Math.min(Xt.dot(B),p),R=Math.min(Xt.dot(f),R),y=Math.min(Xt.dot(C),y);B=B.multiplyByScalar(.5*(p+m)),f=f.multiplyByScalar(.5*(R+Q)),C=C.multiplyByScalar(.5*(y+I)),t.center.copy(B).add(f).add(C);const _=XB.set(m-p,Q-R,I-y).multiplyByScalar(.5),G=new tt([_[0],0,0,0,_[1],0,0,0,_[2]]);return t.halfAxes.multiplyRight(G),t}let iA=function(e){return e[e.ADD=1]="ADD",e[e.REPLACE=2]="REPLACE",e}({}),mr=function(e){return e.EMPTY="empty",e.SCENEGRAPH="scenegraph",e.POINTCLOUD="pointcloud",e.MESH="mesh",e}({}),sf=function(e){return e.I3S="I3S",e.TILES3D="TILES3D",e}({}),rs=function(e){return e.GEOMETRIC_ERROR="geometricError",e.MAX_SCREEN_THRESHOLD="maxScreenThreshold",e}({});const Qa="4.1.1",_e={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"};function wa(e,t,r){Z(e instanceof ArrayBuffer);const s=new TextDecoder("utf8"),i=new Uint8Array(e,t,r);return s.decode(i)}function nf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=new DataView(e);return`${String.fromCharCode(r.getUint8(t+0))}${String.fromCharCode(r.getUint8(t+1))}${String.fromCharCode(r.getUint8(t+2))}${String.fromCharCode(r.getUint8(t+3))}`}const Af="4.1.1",of={name:"Draco",id:"draco",module:"draco",version:Af,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function af(e,t,r){const s=ba(t.metadata),i=[],n=cf(t.attributes);for(const A in e){const o=e[A],a=nA(A,o,n[A]);i.push(a)}if(r){const A=nA("indices",r);i.push(A)}return{fields:i,metadata:s}}function cf(e){const t={};for(const r in e){const s=e[r];t[s.name||"undefined"]=s}return t}function nA(e,t,r){const s=r?ba(r.metadata):void 0;return xl(e,t,s)}function ba(e){Object.entries(e);const t={};for(const r in e)t[`${r}.string`]=JSON.stringify(e[r]);return t}const AA={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},hf={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},uf=4;class lf{constructor(t){this.draco=void 0,this.decoder=void 0,this.metadataQuerier=void 0,this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=new this.draco.DecoderBuffer;s.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(r);const i=this.decoder.GetEncodedGeometryType(s),n=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let A;switch(i){case this.draco.TRIANGULAR_MESH:A=this.decoder.DecodeBufferToMesh(s,n);break;case this.draco.POINT_CLOUD:A=this.decoder.DecodeBufferToPointCloud(s,n);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!A.ok()||!n.ptr){const u=`DRACO decompression failed: ${A.error_msg()}`;throw new Error(u)}const o=this._getDracoLoaderData(n,i,r),a=this._getMeshData(n,o,r),c=Ll(a.attributes),h=af(a.attributes,o,a.indices);return{loader:"draco",loaderData:o,header:{vertexCount:n.num_points(),boundingBox:c},...a,schema:h}}finally{this.draco.destroy(s),n&&this.draco.destroy(n)}}_getDracoLoaderData(t,r,s){const i=this._getTopLevelMetadata(t),n=this._getDracoAttributes(t,s);return{geometry_type:r,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:i,attributes:n}}_getDracoAttributes(t,r){const s={};for(let i=0;i<t.num_attributes();i++){const n=this.decoder.GetAttribute(t,i),A=this._getAttributeMetadata(t,i);s[n.unique_id()]={unique_id:n.unique_id(),attribute_type:n.attribute_type(),data_type:n.data_type(),num_components:n.num_components(),byte_offset:n.byte_offset(),byte_stride:n.byte_stride(),normalized:n.normalized(),attribute_index:i,metadata:A};const o=this._getQuantizationTransform(n,r);o&&(s[n.unique_id()].quantization_transform=o);const a=this._getOctahedronTransform(n,r);a&&(s[n.unique_id()].octahedron_transform=a)}return s}_getMeshData(t,r,s){const i=this._getMeshAttributes(r,t,s);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(s.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(t,r,s){const i={};for(const n of Object.values(t.attributes)){const A=this._deduceAttributeName(n,s);n.name=A;const{value:o,size:a}=this._getAttributeValues(r,n);i[A]={value:o,size:a,byteOffset:n.byte_offset,byteStride:n.byte_stride,normalized:n.normalized}}return i}_getTriangleListIndices(t){const r=t.num_faces()*3,s=r*uf,i=this.draco._malloc(s);try{return this.decoder.GetTrianglesUInt32Array(t,s,i),new Uint32Array(this.draco.HEAPF32.buffer,i,r).slice()}finally{this.draco._free(i)}}_getTriangleStripIndices(t){const r=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,r),ff(r)}finally{this.draco.destroy(r)}}_getAttributeValues(t,r){const s=hf[r.data_type],i=r.num_components,n=t.num_points()*i,A=n*s.BYTES_PER_ELEMENT,o=gf(this.draco,s);let a;const c=this.draco._malloc(A);try{const h=this.decoder.GetAttribute(t,r.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,h,o,A,c),a=new s(this.draco.HEAPF32.buffer,c,n).slice()}finally{this.draco._free(c)}return{value:a,size:i}}_deduceAttributeName(t,r){const s=t.unique_id;for(const[A,o]of Object.entries(r.extraAttributes||{}))if(o===s)return A;const i=t.attribute_type;for(const A in AA)if(this.draco[A]===i)return AA[A];const n=r.attributeNameEntry||"name";return t.metadata[n]?t.metadata[n].string:`CUSTOM_ATTRIBUTE_${s}`}_getTopLevelMetadata(t){const r=this.decoder.GetMetadata(t);return this._getDracoMetadata(r)}_getAttributeMetadata(t,r){const s=this.decoder.GetAttributeMetadata(t,r);return this._getDracoMetadata(s)}_getDracoMetadata(t){if(!t||!t.ptr)return{};const r={},s=this.metadataQuerier.NumEntries(t);for(let i=0;i<s;i++){const n=this.metadataQuerier.GetEntryName(t,i);r[n]=this._getDracoMetadataField(t,n)}return r}_getDracoMetadataField(t,r){const s=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,r,s);const i=Bf(s);return{int:this.metadataQuerier.GetIntEntry(t,r),string:this.metadataQuerier.GetStringEntry(t,r),double:this.metadataQuerier.GetDoubleEntry(t,r),intArray:i}}finally{this.draco.destroy(s)}}_disableAttributeTransforms(t){const{quantizedAttributes:r=[],octahedronAttributes:s=[]}=t,i=[...r,...s];for(const n of i)this.decoder.SkipAttributeTransform(this.draco[n])}_getQuantizationTransform(t,r){const{quantizedAttributes:s=[]}=r,i=t.attribute_type();if(s.map(n=>this.decoder[n]).includes(i)){const n=new this.draco.AttributeQuantizationTransform;try{if(n.InitFromAttribute(t))return{quantization_bits:n.quantization_bits(),range:n.range(),min_values:new Float32Array([1,2,3]).map(A=>n.min_value(A))}}finally{this.draco.destroy(n)}}return null}_getOctahedronTransform(t,r){const{octahedronAttributes:s=[]}=r,i=t.attribute_type();if(s.map(n=>this.decoder[n]).includes(i)){const n=new this.draco.AttributeQuantizationTransform;try{if(n.InitFromAttribute(t))return{quantization_bits:n.quantization_bits()}}finally{this.draco.destroy(n)}}return null}}function gf(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32;default:return e.DT_INVALID}}function Bf(e){const t=e.size(),r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=e.GetValue(s);return r}function ff(e){const t=e.size(),r=new Int32Array(t);for(let s=0;s<t;s++)r[s]=e.GetValue(s);return r}const df="1.5.6",Cf="1.4.1",Fs=`https://www.gstatic.com/draco/versioned/decoders/${df}`,Ct={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},Gs={[Ct.DECODER]:`${Fs}/${Ct.DECODER}`,[Ct.DECODER_WASM]:`${Fs}/${Ct.DECODER_WASM}`,[Ct.FALLBACK_DECODER]:`${Fs}/${Ct.FALLBACK_DECODER}`,[Ct.ENCODER]:`https://raw.githubusercontent.com/google/draco/${Cf}/javascript/${Ct.ENCODER}`};let Me;async function If(e){const t=e.modules||{};return t.draco3d?Me=Me||t.draco3d.createDecoderModule({}).then(r=>({draco:r})):Me=Me||Ef(e),await Me}async function Ef(e){let t,r;switch(e.draco&&e.draco.decoderType){case"js":t=await oe(Gs[Ct.FALLBACK_DECODER],"draco",e,Ct.FALLBACK_DECODER);break;case"wasm":default:[t,r]=await Promise.all([await oe(Gs[Ct.DECODER],"draco",e,Ct.DECODER),await oe(Gs[Ct.DECODER_WASM],"draco",e,Ct.DECODER_WASM)])}return t=t||globalThis.DracoDecoderModule,await mf(t,r)}function mf(e,t){const r={};return t&&(r.wasmBinary=t),new Promise(s=>{e({...r,onModuleLoaded:i=>s({draco:i})})})}const Da={...of,parse:pf};async function pf(e,t){const{draco:r}=await If(t),s=new lf(r);try{return s.parseSync(e,t==null?void 0:t.draco)}finally{s.destroy()}}const yf={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},rt={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130},O={...yf,...rt},vs={[rt.DOUBLE]:Float64Array,[rt.FLOAT]:Float32Array,[rt.UNSIGNED_SHORT]:Uint16Array,[rt.UNSIGNED_INT]:Uint32Array,[rt.UNSIGNED_BYTE]:Uint8Array,[rt.BYTE]:Int8Array,[rt.SHORT]:Int16Array,[rt.INT]:Int32Array},Qf={DOUBLE:rt.DOUBLE,FLOAT:rt.FLOAT,UNSIGNED_SHORT:rt.UNSIGNED_SHORT,UNSIGNED_INT:rt.UNSIGNED_INT,UNSIGNED_BYTE:rt.UNSIGNED_BYTE,BYTE:rt.BYTE,SHORT:rt.SHORT,INT:rt.INT},Ls="Failed to convert GL type";class Jt{static fromTypedArray(t){t=ArrayBuffer.isView(t)?t.constructor:t;for(const r in vs)if(vs[r]===t)return r;throw new Error(Ls)}static fromName(t){const r=Qf[t];if(!r)throw new Error(Ls);return r}static getArrayType(t){switch(t){case rt.UNSIGNED_SHORT_5_6_5:case rt.UNSIGNED_SHORT_4_4_4_4:case rt.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;default:const r=vs[t];if(!r)throw new Error(Ls);return r}}static getByteSize(t){return Jt.getArrayType(t).BYTES_PER_ELEMENT}static validate(t){return!!Jt.getArrayType(t)}static createTypedArray(t,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;i===void 0&&(i=(r.byteLength-s)/Jt.getByteSize(t));const n=Jt.getArrayType(t);return new n(r,s,i)}}function wf(e,t){if(!e)throw new Error(`math.gl assertion failed. ${t}`)}function bf(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];const r=e>>11&31,s=e>>5&63,i=e&31;return t[0]=r<<3,t[1]=s<<2,t[2]=i<<3,t}new ts;new d;new ts;new ts;function oA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;return Kl(e,0,t)/t*2-1}function aA(e){return e<0?-1:1}function Df(e,t,r,s){if(wf(s),e<0||e>r||t<0||t>r)throw new Error(`x and y must be unsigned normalized integers between 0 and ${r}`);if(s.x=oA(e,r),s.y=oA(t,r),s.z=1-(Math.abs(s.x)+Math.abs(s.y)),s.z<0){const i=s.x;s.x=(1-Math.abs(s.y))*aA(i),s.y=(1-Math.abs(i))*aA(s.y)}return s.normalize()}function Rf(e,t,r){return Df(e,t,255,r)}class qi{constructor(t,r){this.json=void 0,this.buffer=void 0,this.featuresLength=0,this._cachedTypedArrays={},this.json=t,this.buffer=r}getExtension(t){return this.json.extensions&&this.json.extensions[t]}hasProperty(t){return!!this.json[t]}getGlobalProperty(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O.UNSIGNED_INT,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=this.json[t];return i&&Number.isFinite(i.byteOffset)?this._getTypedArrayFromBinary(t,r,s,1,i.byteOffset):i}getPropertyArray(t,r,s){const i=this.json[t];return i&&Number.isFinite(i.byteOffset)?("componentType"in i&&(r=Jt.fromName(i.componentType)),this._getTypedArrayFromBinary(t,r,s,this.featuresLength,i.byteOffset)):this._getTypedArrayFromArray(t,r,i)}getProperty(t,r,s,i,n){const A=this.json[t];if(!A)return A;const o=this.getPropertyArray(t,r,s);if(s===1)return o[i];for(let a=0;a<s;++a)n[a]=o[s*i+a];return n}_getTypedArrayFromBinary(t,r,s,i,n){const A=this._cachedTypedArrays;let o=A[t];return o||(o=Jt.createTypedArray(r,this.buffer.buffer,this.buffer.byteOffset+n,i*s),A[t]=o),o}_getTypedArrayFromArray(t,r,s){const i=this._cachedTypedArrays;let n=i[t];return n||(n=Jt.createTypedArray(r,s),i[t]=n),n}}const Sf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Tf={SCALAR:(e,t)=>e[t],VEC2:(e,t)=>[e[2*t+0],e[2*t+1]],VEC3:(e,t)=>[e[3*t+0],e[3*t+1],e[3*t+2]],VEC4:(e,t)=>[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]],MAT2:(e,t)=>[e[4*t+0],e[4*t+1],e[4*t+2],e[4*t+3]],MAT3:(e,t)=>[e[9*t+0],e[9*t+1],e[9*t+2],e[9*t+3],e[9*t+4],e[9*t+5],e[9*t+6],e[9*t+7],e[9*t+8]],MAT4:(e,t)=>[e[16*t+0],e[16*t+1],e[16*t+2],e[16*t+3],e[16*t+4],e[16*t+5],e[16*t+6],e[16*t+7],e[16*t+8],e[16*t+9],e[16*t+10],e[16*t+11],e[16*t+12],e[16*t+13],e[16*t+14],e[16*t+15]]},_f={SCALAR:(e,t,r)=>{t[r]=e},VEC2:(e,t,r)=>{t[2*r+0]=e[0],t[2*r+1]=e[1]},VEC3:(e,t,r)=>{t[3*r+0]=e[0],t[3*r+1]=e[1],t[3*r+2]=e[2]},VEC4:(e,t,r)=>{t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT2:(e,t,r)=>{t[4*r+0]=e[0],t[4*r+1]=e[1],t[4*r+2]=e[2],t[4*r+3]=e[3]},MAT3:(e,t,r)=>{t[9*r+0]=e[0],t[9*r+1]=e[1],t[9*r+2]=e[2],t[9*r+3]=e[3],t[9*r+4]=e[4],t[9*r+5]=e[5],t[9*r+6]=e[6],t[9*r+7]=e[7],t[9*r+8]=e[8],t[9*r+9]=e[9]},MAT4:(e,t,r)=>{t[16*r+0]=e[0],t[16*r+1]=e[1],t[16*r+2]=e[2],t[16*r+3]=e[3],t[16*r+4]=e[4],t[16*r+5]=e[5],t[16*r+6]=e[6],t[16*r+7]=e[7],t[16*r+8]=e[8],t[16*r+9]=e[9],t[16*r+10]=e[10],t[16*r+11]=e[11],t[16*r+12]=e[12],t[16*r+13]=e[13],t[16*r+14]=e[14],t[16*r+15]=e[15]}};function Mf(e,t,r,s){const{componentType:i}=e;Z(e.componentType);const n=typeof i=="string"?Jt.fromName(i):i,A=Sf[e.type],o=Tf[e.type],a=_f[e.type];return r+=e.byteOffset,{values:Jt.createTypedArray(n,t,r,A*s),type:n,size:A,unpacker:o,packer:a}}const Ut=e=>e!==void 0;function Ff(e,t,r){if(!t)return null;let s=e.getExtension("3DTILES_batch_table_hierarchy");const i=t.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),t.extensions=t.extensions||{},t.extensions["3DTILES_batch_table_hierarchy"]=i,s=i),s?Gf(s,r):null}function Gf(e,t){let r,s,i;const n=e.instancesLength,A=e.classes;let o=e.classIds,a=e.parentCounts,c=e.parentIds,h=n;Ut(o.byteOffset)&&(o.componentType=defaultValue(o.componentType,GL.UNSIGNED_SHORT),o.type=AttributeType.SCALAR,i=getBinaryAccessor(o),o=i.createArrayBufferView(t.buffer,t.byteOffset+o.byteOffset,n));let u;if(Ut(a))for(Ut(a.byteOffset)&&(a.componentType=defaultValue(a.componentType,GL.UNSIGNED_SHORT),a.type=AttributeType.SCALAR,i=getBinaryAccessor(a),a=i.createArrayBufferView(t.buffer,t.byteOffset+a.byteOffset,n)),u=new Uint16Array(n),h=0,r=0;r<n;++r)u[r]=h,h+=a[r];Ut(c)&&Ut(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,GL.UNSIGNED_SHORT),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),c=i.createArrayBufferView(t.buffer,t.byteOffset+c.byteOffset,h));const g=A.length;for(r=0;r<g;++r){const C=A[r].length,m=A[r].instances,Q=getBinaryProperties(C,m,t);A[r].instances=combine(Q,m)}const l=new Array(g).fill(0),B=new Uint16Array(n);for(r=0;r<n;++r)s=o[r],B[r]=l[s],++l[s];const f={classes:A,classIds:o,classIndexes:B,parentCounts:a,parentIndexes:u,parentIds:c};return xf(f),f}function Fe(e,t,r){if(!e)return;const s=e.parentCounts;return e.parentIds?r(e,t):s>0?vf(e,t,r):Lf(e,t,r)}function vf(e,t,r){const s=e.classIds,i=e.parentCounts,n=e.parentIds,A=e.parentIndexes,o=s.length,a=scratchVisited;a.length=Math.max(a.length,o);const c=++marker,h=scratchStack;for(h.length=0,h.push(t);h.length>0;){if(t=h.pop(),a[t]===c)continue;a[t]=c;const u=r(e,t);if(Ut(u))return u;const g=i[t],l=A[t];for(let B=0;B<g;++B){const f=n[l+B];f!==t&&h.push(f)}}return null}function Lf(e,t,r){let s=!0;for(;s;){const i=r(e,t);if(Ut(i))return i;const n=e.parentIds[t];s=n!==t,t=n}throw new Error("traverseHierarchySingleParent")}function xf(e){const t=e.classIds.length;for(let r=0;r<t;++r)Ra(e,r,stack)}function Ra(e,t,r){const s=e.parentCounts,i=e.parentIds,n=e.parentIndexes,A=e.classIds.length;if(!Ut(i))return;assert(t<A,`Parent index ${t} exceeds the total number of instances: ${A}`),assert(r.indexOf(t)===-1,"Circular dependency detected in the batch table hierarchy."),r.push(t);const o=Ut(s)?s[t]:1,a=Ut(s)?n[t]:t;for(let c=0;c<o;++c){const h=i[a+c];h!==t&&Ra(e,h,r)}r.pop(t)}function Bt(e){return e!=null}const pr=(e,t)=>e,Of={HIERARCHY:!0,extensions:!0,extras:!0};class Sa{constructor(t,r,s){var i;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.json=void 0,this.binary=void 0,this.featureCount=void 0,this._extensions=void 0,this._properties=void 0,this._binaryProperties=void 0,this._hierarchy=void 0,Z(s>=0),this.json=t||{},this.binary=r,this.featureCount=s,this._extensions=((i=this.json)===null||i===void 0?void 0:i.extensions)||{},this._properties={};for(const A in this.json)Of[A]||(this._properties[A]=this.json[A]);this._binaryProperties=this._initializeBinaryProperties(),n["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=Ff(this,this.json,this.binary))}getExtension(t){return this.json&&this.json.extensions&&this.json.extensions[t]}memorySizeInBytes(){return 0}isClass(t,r){if(this._checkBatchId(t),Z(typeof r=="string",r),this._hierarchy){const s=Fe(this._hierarchy,t,(i,n)=>{const A=i.classIds[n];return i.classes[A].name===r});return Bt(s)}return!1}isExactClass(t,r){return Z(typeof r=="string",r),this.getExactClassName(t)===r}getExactClassName(t){if(this._checkBatchId(t),this._hierarchy){const r=this._hierarchy.classIds[t];return this._hierarchy.classes[r].name}}hasProperty(t,r){return this._checkBatchId(t),Z(typeof r=="string",r),Bt(this._properties[r])||this._hasPropertyInHierarchy(t,r)}getPropertyNames(t,r){this._checkBatchId(t),r=Bt(r)?r:[],r.length=0;const s=Object.keys(this._properties);return r.push(...s),this._hierarchy&&this._getPropertyNamesInHierarchy(t,r),r}getProperty(t,r){if(this._checkBatchId(t),Z(typeof r=="string",r),this._binaryProperties){const i=this._binaryProperties[r];if(Bt(i))return this._getBinaryProperty(i,t)}const s=this._properties[r];if(Bt(s))return pr(s[t]);if(this._hierarchy){const i=this._getHierarchyProperty(t,r);if(Bt(i))return i}}setProperty(t,r,s){const i=this.featureCount;if(this._checkBatchId(t),Z(typeof r=="string",r),this._binaryProperties){const A=this._binaryProperties[r];if(A){this._setBinaryProperty(A,t,s);return}}if(this._hierarchy&&this._setHierarchyProperty(this,t,r,s))return;let n=this._properties[r];Bt(n)||(this._properties[r]=new Array(i),n=this._properties[r]),n[t]=pr(s)}_checkBatchId(t){if(!(t>=0&&t<this.featureCount))throw new Error("batchId not in range [0, featureCount - 1].")}_getBinaryProperty(t,r){return t.unpack(t.typedArray,r)}_setBinaryProperty(t,r,s){t.pack(s,t.typedArray,r)}_initializeBinaryProperties(){let t=null;for(const r in this._properties){const s=this._properties[r],i=this._initializeBinaryProperty(r,s);i&&(t=t||{},t[r]=i)}return t}_initializeBinaryProperty(t,r){if("byteOffset"in r){const s=r;Z(this.binary,`Property ${t} requires a batch table binary.`),Z(s.type,`Property ${t} requires a type.`);const i=Mf(s,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:i.values,componentCount:i.size,unpack:i.unpacker,pack:i.packer}}return null}_hasPropertyInHierarchy(t,r){if(!this._hierarchy)return!1;const s=Fe(this._hierarchy,t,(i,n)=>{const A=i.classIds[n],o=i.classes[A].instances;return Bt(o[r])});return Bt(s)}_getPropertyNamesInHierarchy(t,r){Fe(this._hierarchy,t,(s,i)=>{const n=s.classIds[i],A=s.classes[n].instances;for(const o in A)A.hasOwnProperty(o)&&r.indexOf(o)===-1&&r.push(o)})}_getHierarchyProperty(t,r){return Fe(this._hierarchy,t,(s,i)=>{const n=s.classIds[i],A=s.classes[n],o=s.classIndexes[i],a=A.instances[r];return Bt(a)?Bt(a.typedArray)?this._getBinaryProperty(a,o):pr(a[o]):null})}_setHierarchyProperty(t,r,s,i){const n=Fe(this._hierarchy,r,(A,o)=>{const a=A.classIds[o],c=A.classes[a],h=A.classIndexes[o],u=c.instances[s];return Bt(u)?(Z(o===r,`Inherited property "${s}" is read-only.`),Bt(u.typedArray)?this._setBinaryProperty(u,h,i):u[h]=pr(i),!0):!1});return Bt(n)}}const xs=4;function ss(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=new DataView(t);if(e.magic=s.getUint32(r,!0),r+=xs,e.version=s.getUint32(r,!0),r+=xs,e.byteLength=s.getUint32(r,!0),r+=xs,e.version!==1)throw new Error(`3D Tile Version ${e.version} not supported`);return r}const Ie=4,cA="b3dm tile in legacy format.";function Ki(e,t,r){const s=new DataView(t);let i;e.header=e.header||{};let n=s.getUint32(r,!0);r+=Ie;let A=s.getUint32(r,!0);r+=Ie;let o=s.getUint32(r,!0);r+=Ie;let a=s.getUint32(r,!0);return r+=Ie,o>=570425344?(r-=Ie*2,i=n,o=A,a=0,n=0,A=0,console.warn(cA)):a>=570425344&&(r-=Ie,i=o,o=n,a=A,n=0,A=0,console.warn(cA)),e.header.featureTableJsonByteLength=n,e.header.featureTableBinaryByteLength=A,e.header.batchTableJsonByteLength=o,e.header.batchTableBinaryByteLength=a,e.header.batchLength=i,r}function ji(e,t,r,s){return r=Uf(e,t,r),r=Nf(e,t,r),r}function Uf(e,t,r,s){const{featureTableJsonByteLength:i,featureTableBinaryByteLength:n,batchLength:A}=e.header||{};if(e.featureTableJson={BATCH_LENGTH:A||0},i&&i>0){const o=wa(t,r,i);e.featureTableJson=JSON.parse(o)}return r+=i||0,e.featureTableBinary=new Uint8Array(t,r,n),r+=n||0,r}function Nf(e,t,r,s){const{batchTableJsonByteLength:i,batchTableBinaryByteLength:n}=e.header||{};if(i&&i>0){const A=wa(t,r,i);e.batchTableJson=JSON.parse(A),r+=i,n&&n>0&&(e.batchTableBinary=new Uint8Array(t,r,n),e.batchTableBinary=new Uint8Array(e.batchTableBinary),r+=n)}return r}function Ta(e,t,r){if(!t&&(!e||!e.batchIds||!r))return null;const{batchIds:s,isRGB565:i,pointCount:n=0}=e;if(s&&r){const A=new Uint8ClampedArray(n*3);for(let o=0;o<n;o++){const a=s[o],c=r.getProperty(a,"dimensions").map(h=>h*255);A[o*3]=c[0],A[o*3+1]=c[1],A[o*3+2]=c[2]}return{type:O.UNSIGNED_BYTE,value:A,size:3,normalized:!0}}if(t&&i){const A=new Uint8ClampedArray(n*3);for(let o=0;o<n;o++){const a=bf(t[o]);A[o*3]=a[0],A[o*3+1]=a[1],A[o*3+2]=a[2]}return{type:O.UNSIGNED_BYTE,value:A,size:3,normalized:!0}}return t&&t.length===n*3?{type:O.UNSIGNED_BYTE,value:t,size:3,normalized:!0}:{type:O.UNSIGNED_BYTE,value:t||new Uint8ClampedArray,size:4,normalized:!0}}const hA=new d;function Pf(e,t){if(!t)return null;if(e.isOctEncoded16P){const r=new Float32Array((e.pointsLength||0)*3);for(let s=0;s<(e.pointsLength||0);s++)Rf(t[s*2],t[s*2+1],hA),hA.toArray(r,s*3);return{type:O.FLOAT,size:2,value:r}}return{type:O.FLOAT,size:2,value:t}}function Jf(e,t,r){return e.isQuantized?r["3d-tiles"]&&r["3d-tiles"].decodeQuantizedPositions?(e.isQuantized=!1,Hf(e,t)):{type:O.UNSIGNED_SHORT,value:t,size:3,normalized:!0}:t}function Hf(e,t){const r=new d,s=new Float32Array(e.pointCount*3);for(let i=0;i<e.pointCount;i++)r.set(t[i*3],t[i*3+1],t[i*3+2]).scale(1/e.quantizedRange).multiply(e.quantizedVolumeScale).add(e.quantizedVolumeOffset).toArray(s,i*3);return s}async function kf(e,t,r,s,i){r=ss(e,t,r),r=Ki(e,t,r),r=ji(e,t,r),qf(e);const{featureTable:n,batchTable:A}=Kf(e);return await Xf(e,n,A,s,i),jf(e,n,s),Vf(e,n,A),Yf(e,n),r}function qf(e){e.attributes={positions:null,colors:null,normals:null,batchIds:null},e.isQuantized=!1,e.isTranslucent=!1,e.isRGB565=!1,e.isOctEncoded16P=!1}function Kf(e){const t=new qi(e.featureTableJson,e.featureTableBinary),r=t.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(r))throw new Error("POINTS_LENGTH must be defined");t.featuresLength=r,e.featuresLength=r,e.pointsLength=r,e.pointCount=r,e.rtcCenter=t.getGlobalProperty("RTC_CENTER",O.FLOAT,3);const s=Wf(e,t);return{featureTable:t,batchTable:s}}function jf(e,t,r){if(e.attributes=e.attributes||{positions:null,colors:null,normals:null,batchIds:null},!e.attributes.positions){if(t.hasProperty("POSITION"))e.attributes.positions=t.getPropertyArray("POSITION",O.FLOAT,3);else if(t.hasProperty("POSITION_QUANTIZED")){const s=t.getPropertyArray("POSITION_QUANTIZED",O.UNSIGNED_SHORT,3);if(e.isQuantized=!0,e.quantizedRange=65535,e.quantizedVolumeScale=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",O.FLOAT,3),!e.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(e.quantizedVolumeOffset=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",O.FLOAT,3),!e.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");e.attributes.positions=Jf(e,s,r)}}if(!e.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function Vf(e,t,r){if(e.attributes=e.attributes||{positions:null,colors:null,normals:null,batchIds:null},!e.attributes.colors){let s=null;t.hasProperty("RGBA")?(s=t.getPropertyArray("RGBA",O.UNSIGNED_BYTE,4),e.isTranslucent=!0):t.hasProperty("RGB")?s=t.getPropertyArray("RGB",O.UNSIGNED_BYTE,3):t.hasProperty("RGB565")&&(s=t.getPropertyArray("RGB565",O.UNSIGNED_SHORT,1),e.isRGB565=!0),e.attributes.colors=Ta(e,s,r)}t.hasProperty("CONSTANT_RGBA")&&(e.constantRGBA=t.getGlobalProperty("CONSTANT_RGBA",O.UNSIGNED_BYTE,4))}function Yf(e,t){if(e.attributes=e.attributes||{positions:null,colors:null,normals:null,batchIds:null},!e.attributes.normals){let r=null;t.hasProperty("NORMAL")?r=t.getPropertyArray("NORMAL",O.FLOAT,3):t.hasProperty("NORMAL_OCT16P")&&(r=t.getPropertyArray("NORMAL_OCT16P",O.UNSIGNED_BYTE,2),e.isOctEncoded16P=!0),e.attributes.normals=Pf(e,r)}}function Wf(e,t){let r=null;if(!e.batchIds&&t.hasProperty("BATCH_ID")&&(e.batchIds=t.getPropertyArray("BATCH_ID",O.UNSIGNED_SHORT,1),e.batchIds)){const s=t.getGlobalProperty("BATCH_LENGTH");if(!s)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");const{batchTableJson:i,batchTableBinary:n}=e;r=new Sa(i,n,s)}return r}async function Xf(e,t,r,s,i){let n,A,o;const a=e.batchTableJson&&e.batchTableJson.extensions&&e.batchTableJson.extensions["3DTILES_draco_point_compression"];a&&(o=a.properties);const c=t.getExtension("3DTILES_draco_point_compression");if(c){A=c.properties;const u=c.byteOffset,g=c.byteLength;if(!A||!Number.isFinite(u)||!g)throw new Error("Draco properties, byteOffset, and byteLength must be defined");n=(e.featureTableBinary||[]).slice(u,u+g),e.hasPositions=Number.isFinite(A.POSITION),e.hasColors=Number.isFinite(A.RGB)||Number.isFinite(A.RGBA),e.hasNormals=Number.isFinite(A.NORMAL),e.hasBatchIds=Number.isFinite(A.BATCH_ID),e.isTranslucent=Number.isFinite(A.RGBA)}if(!n)return!0;const h={buffer:n,properties:{...A,...o},featureTableProperties:A,batchTableProperties:o,dequantizeInShader:!1};return await zf(e,h,s,i)}async function zf(e,t,r,s){if(!s)return;const i={...r,draco:{...r==null?void 0:r.draco,extraAttributes:t.batchTableProperties||{}}};delete i["3d-tiles"];const n=await tr(t.buffer,Da,i,s),A=n.attributes.POSITION&&n.attributes.POSITION.value,o=n.attributes.COLOR_0&&n.attributes.COLOR_0.value,a=n.attributes.NORMAL&&n.attributes.NORMAL.value,c=n.attributes.BATCH_ID&&n.attributes.BATCH_ID.value,h=A&&n.attributes.POSITION.value.quantization,u=a&&n.attributes.NORMAL.value.quantization;if(h){const l=n.POSITION.data.quantization,B=l.range;e.quantizedVolumeScale=new d(B,B,B),e.quantizedVolumeOffset=new d(l.minValues),e.quantizedRange=(1<<l.quantizationBits)-1,e.isQuantizedDraco=!0}u&&(e.octEncodedRange=(1<<n.NORMAL.data.quantization.quantizationBits)-1,e.isOctEncodedDraco=!0);const g={};if(t.batchTableProperties)for(const l of Object.keys(t.batchTableProperties))n.attributes[l]&&n.attributes[l].value&&(g[l.toLowerCase()]=n.attributes[l].value);e.attributes={positions:A,colors:Ta(e,o,void 0),normals:a,batchIds:c,...g}}const Zf="4.1.1";var Os;const $f=(Os=globalThis.loaders)===null||Os===void 0?void 0:Os.parseImageNode,li=typeof Image<"u",gi=typeof ImageBitmap<"u",td=!!$f,Bi=zr?!0:td;function ed(e){switch(e){case"auto":return gi||li||Bi;case"imagebitmap":return gi;case"image":return li;case"data":return Bi;default:throw new Error(`@loaders.gl/images: image ${e} not supported in this environment`)}}function rd(){if(gi)return"imagebitmap";if(li)return"image";if(Bi)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function sd(e){const t=id(e);if(!t)throw new Error("Not an image");return t}function _a(e){switch(sd(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function id(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const nd=/^data:image\/svg\+xml/,Ad=/\.svg((\?|#).*)?$/;function Vi(e){return e&&(nd.test(e)||Ad.test(e))}function od(e,t){if(Vi(t)){let r=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return Ma(e,t)}function Ma(e,t){if(Vi(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function Fa(e,t,r){const s=od(e,r),i=self.URL||self.webkitURL,n=typeof s!="string"&&i.createObjectURL(s);try{return await ad(n||s,t)}finally{n&&i.revokeObjectURL(n)}}async function ad(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((s,i)=>{try{r.onload=()=>s(r),r.onerror=n=>{const A=n instanceof Error?n.message:"error";i(new Error(A))}}catch(n){i(n)}})}const cd={};let uA=!0;async function hd(e,t,r){let s;Vi(r)?s=await Fa(e,t,r):s=Ma(e,r);const i=t&&t.imagebitmap;return await ud(s,i)}async function ud(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((ld(t)||!uA)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),uA=!1}return await createImageBitmap(e)}function ld(e){for(const t in e||cd)return!1;return!0}function gd(e){return!Cd(e,"ftyp",4)||!(e[8]&96)?null:Bd(e)}function Bd(e){switch(fd(e,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function fd(e,t,r){return String.fromCharCode(...e.slice(t,r))}function dd(e){return[...e].map(t=>t.charCodeAt(0))}function Cd(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=dd(t);for(let i=0;i<s.length;++i)if(s[i]!==e[i+r])return!1;return!0}const Nt=!1,ke=!0;function Yi(e){const t=nr(e);return Ed(t)||yd(t)||md(t)||pd(t)||Id(t)}function Id(e){const t=new Uint8Array(e instanceof DataView?e.buffer:e),r=gd(t);return r?{mimeType:r.mimeType,width:0,height:0}:null}function Ed(e){const t=nr(e);return t.byteLength>=24&&t.getUint32(0,Nt)===2303741511?{mimeType:"image/png",width:t.getUint32(16,Nt),height:t.getUint32(20,Nt)}:null}function md(e){const t=nr(e);return t.byteLength>=10&&t.getUint32(0,Nt)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,ke),height:t.getUint16(8,ke)}:null}function pd(e){const t=nr(e);return t.byteLength>=14&&t.getUint16(0,Nt)===16973&&t.getUint32(2,ke)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,ke),height:t.getUint32(22,ke)}:null}function yd(e){const t=nr(e);if(!(t.byteLength>=3&&t.getUint16(0,Nt)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:s}=Qd();let i=2;for(;i+9<t.byteLength;){const n=t.getUint16(i,Nt);if(s.has(n))return{mimeType:"image/jpeg",height:t.getUint16(i+5,Nt),width:t.getUint16(i+7,Nt)};if(!r.has(n))return null;i+=2,i+=t.getUint16(i,Nt)}return null}function Qd(){const e=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)e.add(t);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function nr(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function wd(e,t){var r;const{mimeType:s}=Yi(e)||{},i=(r=globalThis.loaders)===null||r===void 0?void 0:r.parseImageNode;return Z(i),await i(e,s)}async function bd(e,t,r){t=t||{};const s=(t.image||{}).type||"auto",{url:i}=r||{},n=Dd(s);let A;switch(n){case"imagebitmap":A=await hd(e,t,i);break;case"image":A=await Fa(e,t,i);break;case"data":A=await wd(e);break;default:Z(!1)}return s==="data"&&(A=_a(A)),A}function Dd(e){switch(e){case"auto":case"data":return rd();default:return ed(e),e}}const Rd=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],Sd=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Td={image:{type:"auto",decode:!0}},_d={id:"image",module:"images",name:"Images",version:Zf,mimeTypes:Sd,extensions:Rd,parse:bd,tests:[e=>!!Yi(new DataView(e))],options:Td},Us={};function Md(e){if(Us[e]===void 0){const t=zr?Gd(e):Fd(e);Us[e]=t}return Us[e]}function Fd(e){var t,r;const s=["image/png","image/jpeg","image/gif"],i=((t=globalThis.loaders)===null||t===void 0?void 0:t.imageFormatsNode)||s;return!!(!((r=globalThis.loaders)===null||r===void 0)&&r.parseImageNode)&&i.includes(e)}function Gd(e){switch(e){case"image/avif":case"image/webp":return vd(e);default:return!0}}function vd(e){try{return document.createElement("canvas").toDataURL(e).indexOf(`data:${e}`)===0}catch{return!1}}function wt(e,t){if(!e)throw new Error(t||"assert failed: gltf")}const Ga={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},va={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ld=1.33,lA=["SCALAR","VEC2","VEC3","VEC4"],xd=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Od=new Map(xd),Ud={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nd={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Pd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function La(e){return lA[e-1]||lA[0]}function Wi(e){const t=Od.get(e.constructor);if(!t)throw new Error("Illegal typed array");return t}function Xi(e,t){const r=Pd[e.componentType],s=Ud[e.type],i=Nd[e.componentType],n=e.count*s,A=e.count*s*i;wt(A>=0&&A<=t.byteLength);const o=va[e.componentType],a=Ga[e.type];return{ArrayType:r,length:n,byteLength:A,componentByteSize:o,numberOfComponentsInElement:a}}function xa(e){let{images:t,bufferViews:r}=e;t=t||[],r=r||[];const s=t.map(A=>A.bufferView);r=r.filter(A=>!s.includes(A));const i=r.reduce((A,o)=>A+o.byteLength,0),n=t.reduce((A,o)=>{const{width:a,height:c}=o.image;return A+a*c},0);return i+Math.ceil(4*n*Ld)}function Jd(e,t,r){const s=e.bufferViews[r];wt(s);const i=s.buffer,n=t[i];wt(n);const A=(s.byteOffset||0)+n.byteOffset;return new Uint8Array(n.arrayBuffer,A,s.byteLength)}function Hd(e,t,r){var s,i;const n=typeof r=="number"?(s=e.accessors)===null||s===void 0?void 0:s[r]:r;if(!n)throw new Error(`No gltf accessor ${JSON.stringify(r)}`);const A=(i=e.bufferViews)===null||i===void 0?void 0:i[n.bufferView||0];if(!A)throw new Error(`No gltf buffer view for accessor ${A}`);const{arrayBuffer:o,byteOffset:a}=t[A.buffer],c=(a||0)+(n.byteOffset||0)+(A.byteOffset||0),{ArrayType:h,length:u,componentByteSize:g,numberOfComponentsInElement:l}=Xi(n,A),B=g*l,f=A.byteStride||B;if(typeof A.byteStride>"u"||A.byteStride===B)return new h(o,c,u);const C=new h(u);for(let m=0;m<n.count;m++){const Q=new h(o,c+m*f,l);C.set(Q,m*l)}return C}function kd(){return{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]}}class ct{constructor(t){this.gltf=void 0,this.sourceBuffers=void 0,this.byteLength=void 0,this.gltf={json:(t==null?void 0:t.json)||kd(),buffers:(t==null?void 0:t.buffers)||[],images:(t==null?void 0:t.images)||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}hasExtension(t){const r=this.getUsedExtensions().find(i=>i===t),s=this.getRequiredExtensions().find(i=>i===t);return typeof r=="string"||typeof s=="string"}getExtension(t){const r=this.getUsedExtensions().find(i=>i===t),s=this.json.extensions||{};return r?s[t]:null}getRequiredExtension(t){return this.getRequiredExtensions().find(r=>r===t)?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(t,r){return(t.extensions||{})[r]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,r){if(typeof r=="object")return r;const s=this.json[t]&&this.json[t][r];if(!s)throw new Error(`glTF file error: Could not find ${t}[${r}]`);return s}getTypedArrayForBufferView(t){t=this.getBufferView(t);const r=t.buffer,s=this.gltf.buffers[r];wt(s);const i=(t.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,i,t.byteLength)}getTypedArrayForAccessor(t){const r=this.getAccessor(t);return Hd(this.gltf.json,this.gltf.buffers,r)}getTypedArrayForImageData(t){t=this.getAccessor(t);const r=this.getBufferView(t.bufferView),s=this.getBuffer(r.buffer).data,i=r.byteOffset||0;return new Uint8Array(s,i,r.byteLength)}addApplicationData(t,r){return this.json[t]=r,this}addExtraData(t,r){return this.json.extras=this.json.extras||{},this.json.extras[t]=r,this}addObjectExtension(t,r,s){return t.extensions=t.extensions||{},t.extensions[r]=s,this.registerUsedExtension(r),this}setObjectExtension(t,r,s){const i=t.extensions||{};i[r]=s}removeObjectExtension(t,r){const s=(t==null?void 0:t.extensions)||{};if(s[r]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const i=this.json.extensionsRemoved;i.includes(r)||i.push(r)}delete s[r]}addExtension(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return wt(r),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=r,this.registerUsedExtension(t),r}addRequiredExtension(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return wt(r),this.addExtension(t,r),this.registerRequiredExtension(t),r}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(r=>r===t)||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(r=>r===t)||this.json.extensionsRequired.push(t)}removeExtension(t){var r;if((r=this.json.extensions)!==null&&r!==void 0&&r[t]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];const s=this.json.extensionsRemoved;s.includes(t)||s.push(t)}this.json.extensions&&delete this.json.extensions[t],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t)}setDefaultScene(t){this.json.scene=t}addScene(t){const{nodeIndices:r}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:r}),this.json.scenes.length-1}addNode(t){const{meshIndex:r,matrix:s}=t;this.json.nodes=this.json.nodes||[];const i={mesh:r};return s&&(i.matrix=s),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(t){const{attributes:r,indices:s,material:i,mode:n=4}=t,A={primitives:[{attributes:this._addAttributes(r),mode:n}]};if(s){const o=this._addIndices(s);A.primitives[0].indices=o}return Number.isFinite(i)&&(A.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(A),this.json.meshes.length-1}addPointCloud(t){const r={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(t,r){const s=Yi(t),i=r||(s==null?void 0:s.mimeType),n={bufferView:this.addBufferView(t),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}addBufferView(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.byteLength;const i=t.byteLength;wt(Number.isFinite(i)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);const n={buffer:r,byteOffset:s,byteLength:i};return this.byteLength+=er(i,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(n),this.json.bufferViews.length-1}addAccessor(t,r){const s={bufferView:t,type:La(r.size),componentType:r.componentType,count:r.count,max:r.max,min:r.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(s),this.json.accessors.length-1}addBinaryBuffer(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3};const s=this.addBufferView(t);let i={min:r.min,max:r.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(t,r.size));const n={size:r.size,componentType:Wi(t),count:Math.round(t.length/r.size),min:i.min,max:i.max};return this.addAccessor(s,Object.assign(n,r))}addTexture(t){const{imageIndex:r}=t,s={source:r};return this.json.textures=this.json.textures||[],this.json.textures.push(s),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){var t,r;this.gltf.buffers=[];const s=this.byteLength,i=new ArrayBuffer(s),n=new Uint8Array(i);let A=0;for(const o of this.sourceBuffers||[])A=Cu(o,n,A);(t=this.json)!==null&&t!==void 0&&(r=t.buffers)!==null&&r!==void 0&&r[0]?this.json.buffers[0].byteLength=s:this.json.buffers=[{byteLength:s}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(t,r){let s=!0;for(;s;){const i=t.indexOf(r);i>-1?t.splice(i,1):s=!1}}_addAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={};for(const s in t){const i=t[s],n=this._getGltfAttributeName(s),A=this.addBinaryBuffer(i.value,i);r[n]=A}return r}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,r){const s={min:null,max:null};if(t.length<r)return s;s.min=[],s.max=[];const i=t.subarray(0,r);for(const n of i)s.min.push(n),s.max.push(n);for(let n=r;n<t.length;n+=r)for(let A=0;A<r;A++)s.min[0+A]=Math.min(s.min[0+A],t[n+A]),s.max[0+A]=Math.max(s.max[0+A],t[n+A]);return s}}function gA(e){return(e%1+1)%1}const Oa={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},qd={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},Ua={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function zi(e,t){return Ua[t]*Oa[e]}function is(e,t,r,s){if(r!=="UINT8"&&r!=="UINT16"&&r!=="UINT32"&&r!=="UINT64")return null;const i=e.getTypedArrayForBufferView(t),n=ns(i,"SCALAR",r,s+1);return n instanceof BigInt64Array||n instanceof BigUint64Array?null:n}function ns(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const i=Oa[t],n=qd[r],A=Ua[r],o=s*i,a=o*A;let c=e.buffer,h=e.byteOffset;return h%A!==0&&(c=new Uint8Array(c).slice(h,h+a).buffer,h=0),new n(c,h,o)}function Zi(e,t,r){var s,i;const n=`TEXCOORD_${t.texCoord||0}`,A=r.attributes[n],o=e.getTypedArrayForAccessor(A),a=e.gltf.json,c=t.index,h=(s=a.textures)===null||s===void 0||(i=s[c])===null||i===void 0?void 0:i.source;if(typeof h<"u"){var u,g,l;const B=(u=a.images)===null||u===void 0||(g=u[h])===null||g===void 0?void 0:g.mimeType,f=(l=e.gltf.images)===null||l===void 0?void 0:l[h];if(f&&typeof f.width<"u"){const C=[];for(let m=0;m<o.length;m+=2){const Q=Kd(f,B,o,m,t.channels);C.push(Q)}return C}}return[]}function Na(e,t,r,s,i){if(!(r!=null&&r.length))return;const n=[];for(const h of r){let u=s.findIndex(g=>g===h);u===-1&&(u=s.push(h)-1),n.push(u)}const A=new Uint32Array(n),o=e.gltf.buffers.push({arrayBuffer:A.buffer,byteOffset:A.byteOffset,byteLength:A.byteLength})-1,a=e.addBufferView(A,o,0),c=e.addAccessor(a,{size:1,componentType:Wi(A),count:A.length});i.attributes[t]=c}function Kd(e,t,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[0];const n={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},A=r[s],o=r[s+1];let a=1;t&&(t.indexOf("image/jpeg")!==-1||t.indexOf("image/png")!==-1)&&(a=4);const c=jd(A,o,e,a);let h=0;for(const u of i){const g=typeof u=="number"?Object.values(n)[u]:n[u],l=c+g.offset,B=_a(e);if(B.data.length<=l)throw new Error(`${B.data.length} <= ${l}`);const f=B.data[l];h|=f<<g.shift}return h}function jd(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;const i=r.width,n=gA(e)*(i-1),A=Math.round(n),o=r.height,a=gA(t)*(o-1),c=Math.round(a),h=r.components?r.components:s;return(c*i+A)*h}function Pa(e,t,r,s,i){const n=[];for(let A=0;A<t;A++){const o=r[A],a=r[A+1]-r[A];if(a+o>s)break;const c=o/i,h=a/i;n.push(e.slice(c,c+h))}return n}function Ja(e,t,r){const s=[];for(let i=0;i<t;i++){const n=i*r;s.push(e.slice(n,n+r))}return s}function Ha(e,t,r,s){if(r)throw new Error("Not implemented - arrayOffsets for strings is specified");if(s){const i=[],n=new TextDecoder("utf8");let A=0;for(let o=0;o<e;o++){const a=s[o+1]-s[o];if(a+A<=t.length){const c=t.subarray(A,a+A),h=n.decode(c);i.push(h),A+=a}}return i}return[]}const ka="EXT_mesh_features",Vd=ka;async function Yd(e,t){const r=new ct(e);Wd(r,t)}function Wd(e,t){const r=e.gltf.json;if(r.meshes)for(const s of r.meshes)for(const i of s.primitives)Xd(e,i,t)}function Xd(e,t,r){var s,i;if(!(r!=null&&(s=r.gltf)!==null&&s!==void 0&&s.loadBuffers))return;const n=(i=t.extensions)===null||i===void 0?void 0:i[ka],A=n==null?void 0:n.featureIds;if(A)for(const a of A){var o;let c;if(typeof a.attribute<"u"){const h=`_FEATURE_ID_${a.attribute}`,u=t.attributes[h];c=e.getTypedArrayForAccessor(u)}else typeof a.texture<"u"&&r!==null&&r!==void 0&&(o=r.gltf)!==null&&o!==void 0&&o.loadImages?c=Zi(e,a.texture,t):c=[];a.data=c}}const zd=Object.freeze(Object.defineProperty({__proto__:null,decode:Yd,name:Vd},Symbol.toStringTag,{value:"Module"})),$i="EXT_structural_metadata",Zd=$i;async function $d(e,t){const r=new ct(e);tC(r,t)}function tC(e,t){var r,s;if(!((r=t.gltf)!==null&&r!==void 0&&r.loadBuffers))return;const i=e.getExtension($i);i&&((s=t.gltf)!==null&&s!==void 0&&s.loadImages&&eC(e,i),rC(e,i))}function eC(e,t){const r=t.propertyTextures,s=e.gltf.json;if(r&&s.meshes)for(const i of s.meshes)for(const n of i.primitives)iC(e,r,n,t)}function rC(e,t){const r=t.schema;if(!r)return;const s=r.classes,i=t.propertyTables;if(s&&i)for(const n in s){const A=sC(i,n);A&&AC(e,r,A)}}function sC(e,t){for(const r of e)if(r.class===t)return r;return null}function iC(e,t,r,s){var i;if(!t)return;const n=(i=r.extensions)===null||i===void 0?void 0:i[$i],A=n==null?void 0:n.propertyTextures;if(A)for(const o of A){const a=t[o];nC(e,a,r,s)}}function nC(e,t,r,s){if(!t.properties)return;s.dataAttributeNames||(s.dataAttributeNames=[]);const i=t.class;for(const A in t.properties){var n;const o=`${i}_${A}`,a=(n=t.properties)===null||n===void 0?void 0:n[A];if(!a)continue;a.data||(a.data=[]);const c=a.data,h=Zi(e,a,r);h!==null&&(Na(e,o,h,c,r),a.data=c,s.dataAttributeNames.push(o))}}function AC(e,t,r){var s;const i=(s=t.classes)===null||s===void 0?void 0:s[r.class];if(!i)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const n=r.count;for(const o in i.properties){var A;const a=i.properties[o],c=(A=r.properties)===null||A===void 0?void 0:A[o];if(c){const h=oC(e,t,a,n,c);c.data=h}}}function oC(e,t,r,s,i){let n=[];const A=i.values,o=e.getTypedArrayForBufferView(A),a=aC(e,r,i,s),c=cC(e,i,s);switch(r.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":{n=hC(r,s,o,a);break}case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${r.type}`);case"STRING":{n=Ha(s,o,a,c);break}case"ENUM":{n=uC(t,r,s,o,a);break}default:throw new Error(`Unknown classProperty type ${r.type}`)}return n}function aC(e,t,r,s){return t.array&&typeof t.count>"u"&&typeof r.arrayOffsets<"u"?is(e,r.arrayOffsets,r.arrayOffsetType||"UINT32",s):null}function cC(e,t,r){return typeof t.stringOffsets<"u"?is(e,t.stringOffsets,t.stringOffsetType||"UINT32",r):null}function hC(e,t,r,s){const i=e.array,n=e.count,A=zi(e.type,e.componentType),o=r.byteLength/A;let a;return e.componentType?a=ns(r,e.type,e.componentType,o):a=r,i?s?Pa(a,t,s,r.length,A):n?Ja(a,t,n):[]:a}function uC(e,t,r,s,i){var n;const A=t.enumType;if(!A)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");const o=(n=e.enums)===null||n===void 0?void 0:n[A];if(!o)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${A}`);const a=o.valueType||"UINT16",c=zi(t.type,a),h=s.byteLength/c;let u=ns(s,t.type,a,h);if(u||(u=s),t.array){if(i)return lC({valuesData:u,numberOfElements:r,arrayOffsets:i,valuesDataBytesLength:s.length,elementSize:c,enumEntry:o});const g=t.count;return g?gC(u,r,g,o):[]}return tn(u,0,r,o)}function lC(e){const{valuesData:t,numberOfElements:r,arrayOffsets:s,valuesDataBytesLength:i,elementSize:n,enumEntry:A}=e,o=[];for(let a=0;a<r;a++){const c=s[a],h=s[a+1]-s[a];if(h+c>i)break;const u=c/n,g=h/n,l=tn(t,u,g,A);o.push(l)}return o}function gC(e,t,r,s){const i=[];for(let n=0;n<t;n++){const A=r*n,o=tn(e,A,r,s);i.push(o)}return i}function tn(e,t,r,s){const i=[];for(let n=0;n<r;n++)if(e instanceof BigInt64Array||e instanceof BigUint64Array)i.push("");else{const A=e[t+n],o=BC(s,A);o?i.push(o.name):i.push("")}return i}function BC(e,t){for(const r of e.values)if(r.value===t)return r;return null}const fC=Object.freeze(Object.defineProperty({__proto__:null,decode:$d,name:Zd},Symbol.toStringTag,{value:"Module"})),qa="EXT_feature_metadata",dC=qa;async function CC(e,t){const r=new ct(e);IC(r,t)}function IC(e,t){var r,s;if(!((r=t.gltf)!==null&&r!==void 0&&r.loadBuffers))return;const i=e.getExtension(qa);i&&((s=t.gltf)!==null&&s!==void 0&&s.loadImages&&EC(e,i),mC(e,i))}function EC(e,t){const r=t.schema;if(!r)return;const s=r.classes,{featureTextures:i}=t;if(s&&i)for(const n in s){const A=s[n],o=yC(i,n);o&&wC(e,o,A)}}function mC(e,t){const r=t.schema;if(!r)return;const s=r.classes,i=t.featureTables;if(s&&i)for(const n in s){const A=pC(i,n);A&&QC(e,r,A)}}function pC(e,t){for(const r in e){const s=e[r];if(s.class===t)return s}return null}function yC(e,t){for(const r in e){const s=e[r];if(s.class===t)return s}return null}function QC(e,t,r){var s;if(!r.class)return;const i=(s=t.classes)===null||s===void 0?void 0:s[r.class];if(!i)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${r.class}`);const n=r.count;for(const o in i.properties){var A;const a=i.properties[o],c=(A=r.properties)===null||A===void 0?void 0:A[o];if(c){const h=bC(e,t,a,n,c);c.data=h}}}function wC(e,t,r){const s=t.class;for(const n in r.properties){var i;const A=t==null||(i=t.properties)===null||i===void 0?void 0:i[n];if(A){const o=_C(e,A,s);A.data=o}}}function bC(e,t,r,s,i){let n=[];const A=i.bufferView,o=e.getTypedArrayForBufferView(A),a=DC(e,r,i,s),c=RC(e,r,i,s);return r.type==="STRING"||r.componentType==="STRING"?n=Ha(s,o,a,c):SC(r)&&(n=TC(r,s,o,a)),n}function DC(e,t,r,s){return t.type==="ARRAY"&&typeof t.componentCount>"u"&&typeof r.arrayOffsetBufferView<"u"?is(e,r.arrayOffsetBufferView,r.offsetType||"UINT32",s):null}function RC(e,t,r,s){return typeof r.stringOffsetBufferView<"u"?is(e,r.stringOffsetBufferView,r.offsetType||"UINT32",s):null}function SC(e){const t=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return t.includes(e.type)||typeof e.componentType<"u"&&t.includes(e.componentType)}function TC(e,t,r,s){const i=e.type==="ARRAY",n=e.componentCount,A="SCALAR",o=e.componentType||e.type,a=zi(A,o),c=r.byteLength/a,h=ns(r,A,o,c);return i?s?Pa(h,t,s,r.length,a):n?Ja(h,t,n):[]:h}function _C(e,t,r){const s=e.gltf.json;if(!s.meshes)return[];const i=[];for(const n of s.meshes)for(const A of n.primitives)MC(e,r,t,i,A);return i}function MC(e,t,r,s,i){const n={channels:r.channels,...r.texture},A=Zi(e,n,i);A&&Na(e,t,A,s,i)}const FC=Object.freeze(Object.defineProperty({__proto__:null,decode:CC,name:dC},Symbol.toStringTag,{value:"Module"})),GC="4.1.1",vC="4.1.1",Hr={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"};let Ns;async function BA(e){const t=e.modules||{};return t.basis?t.basis:(Ns=Ns||LC(e),await Ns)}async function LC(e){let t=null,r=null;return[t,r]=await Promise.all([await oe(Hr.TRANSCODER,"textures",e),await oe(Hr.TRANSCODER_WASM,"textures",e)]),t=t||globalThis.BASIS,await xC(t,r)}function xC(e,t){const r={};return t&&(r.wasmBinary=t),new Promise(s=>{e(r).then(i=>{const{BasisFile:n,initializeBasis:A}=i;A(),s({BasisFile:n})})})}let Ps;async function fA(e){const t=e.modules||{};return t.basisEncoder?t.basisEncoder:(Ps=Ps||OC(e),await Ps)}async function OC(e){let t=null,r=null;return[t,r]=await Promise.all([await oe(Hr.ENCODER,"textures",e),await oe(Hr.ENCODER_WASM,"textures",e)]),t=t||globalThis.BASIS,await UC(t,r)}function UC(e,t){const r={};return t&&(r.wasmBinary=t),new Promise(s=>{e(r).then(i=>{const{BasisFile:n,KTX2File:A,initializeBasis:o,BasisEncoder:a}=i;o(),s({BasisFile:n,KTX2File:A,BasisEncoder:a})})})}const Ee={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},NC=["","WEBKIT_","MOZ_"],dA={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let yr=null;function PC(e){if(!yr){e=e||JC()||void 0,yr=new Set;for(const t of NC)for(const r in dA)if(e&&e.getExtension(`${t}${r}`)){const s=dA[r];yr.add(s)}}return yr}function JC(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var CA,IA,EA,mA,pA,yA,QA,wA;(function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"})(CA||(CA={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(IA||(IA={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(EA||(EA={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(mA||(mA={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(pA||(pA={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(yA||(yA={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(QA||(QA={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(wA||(wA={}));const pt=[171,75,84,88,32,50,48,187,13,10,26,10];function HC(e){const t=new Uint8Array(e);return!(t.byteLength<pt.length||t[0]!==pt[0]||t[1]!==pt[1]||t[2]!==pt[2]||t[3]!==pt[3]||t[4]!==pt[4]||t[5]!==pt[5]||t[6]!==pt[6]||t[7]!==pt[7]||t[8]!==pt[8]||t[9]!==pt[9]||t[10]!==pt[10]||t[11]!==pt[11])}const kC={etc1:{basisFormat:0,compressed:!0,format:Ee.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Ee.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Ee.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Ee.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Ee.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Ee.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function qC(e,t){if(t.basis.containerFormat==="auto"){if(HC(e)){const s=await fA(t);return bA(s.KTX2File,e,t)}const{BasisFile:r}=await BA(t);return Js(r,e,t)}switch(t.basis.module){case"encoder":const r=await fA(t);switch(t.basis.containerFormat){case"ktx2":return bA(r.KTX2File,e,t);case"basis":default:return Js(r.BasisFile,e,t)}case"transcoder":default:const{BasisFile:s}=await BA(t);return Js(s,e,t)}}function Js(e,t,r){const s=new e(new Uint8Array(t));try{if(!s.startTranscoding())throw new Error("Failed to start basis transcoding");const i=s.getNumImages(),n=[];for(let A=0;A<i;A++){const o=s.getNumLevels(A),a=[];for(let c=0;c<o;c++)a.push(KC(s,A,c,r));n.push(a)}return n}finally{s.close(),s.delete()}}function KC(e,t,r,s){const i=e.getImageWidth(t,r),n=e.getImageHeight(t,r),A=e.getHasAlpha(),{compressed:o,format:a,basisFormat:c}=Ka(s,A),h=e.getImageTranscodedSizeInBytes(t,r,c),u=new Uint8Array(h);if(!e.transcodeImage(u,t,r,c,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:n,data:u,compressed:o,format:a,hasAlpha:A}}function bA(e,t,r){const s=new e(new Uint8Array(t));try{if(!s.startTranscoding())throw new Error("failed to start KTX2 transcoding");const i=s.getLevels(),n=[];for(let A=0;A<i;A++){n.push(jC(s,A,r));break}return[n]}finally{s.close(),s.delete()}}function jC(e,t,r){const{alphaFlag:s,height:i,width:n}=e.getImageLevelInfo(t,0,0),{compressed:A,format:o,basisFormat:a}=Ka(r,s),c=e.getImageTranscodedSizeInBytes(t,0,0,a),h=new Uint8Array(c);if(!e.transcodeImage(h,t,0,0,a,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:n,height:i,data:h,compressed:A,levelSize:c,hasAlpha:s,format:o}}function Ka(e,t){let r=e&&e.basis&&e.basis.format;return r==="auto"&&(r=ja()),typeof r=="object"&&(r=t?r.alpha:r.noAlpha),r=r.toLowerCase(),kC[r]}function ja(){const e=PC();return e.has("astc")?"astc-4x4":e.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:e.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:e.has("etc1")?"etc1":e.has("etc2")?"etc2":"rgb565"}const VC={name:"Basis",id:"basis",module:"textures",version:vC,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},YC={...VC,parse:qC},be=!0,DA=1735152710,en=12,kr=8,WC=1313821514,XC=5130562,zC=0,ZC=0,$C=1;function tI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return`${String.fromCharCode(e.getUint8(t+0))}${String.fromCharCode(e.getUint8(t+1))}${String.fromCharCode(e.getUint8(t+2))}${String.fromCharCode(e.getUint8(t+3))}`}function eI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=new DataView(e),{magic:i=DA}=r,n=s.getUint32(t,!1);return n===i||n===DA}function rI(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const s=new DataView(t),i=tI(s,r+0),n=s.getUint32(r+4,be),A=s.getUint32(r+8,be);switch(Object.assign(e,{header:{byteOffset:r,byteLength:A,hasBinChunk:!1},type:i,version:n,json:{},binChunks:[]}),r+=en,e.version){case 1:return sI(e,s,r);case 2:return iI(e,s,r,{});default:throw new Error(`Invalid GLB version ${e.version}. Only supports version 1 and 2.`)}}function sI(e,t,r){Z(e.header.byteLength>en+kr);const s=t.getUint32(r+0,be),i=t.getUint32(r+4,be);return r+=kr,Z(i===zC),fi(e,t,r,s),r+=s,r+=di(e,t,r,e.header.byteLength),r}function iI(e,t,r,s){return Z(e.header.byteLength>en+kr),nI(e,t,r,s),r+e.header.byteLength}function nI(e,t,r,s){for(;r+8<=e.header.byteLength;){const i=t.getUint32(r+0,be),n=t.getUint32(r+4,be);switch(r+=kr,n){case WC:fi(e,t,r,i);break;case XC:di(e,t,r,i);break;case ZC:s.strict||fi(e,t,r,i);break;case $C:s.strict||di(e,t,r,i);break}r+=er(i,4)}return r}function fi(e,t,r,s){const i=new Uint8Array(t.buffer,r,s),n=new TextDecoder("utf8").decode(i);return e.json=JSON.parse(n),er(s,4)}function di(e,t,r,s){return e.header.hasBinChunk=!0,e.binChunks.push({byteOffset:r,byteLength:s,arrayBuffer:t.buffer}),er(s,4)}function Va(e,t){if(e.startsWith("data:")||e.startsWith("http:")||e.startsWith("https:"))return e;const r=t.baseUri||t.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${e}`);return r.substr(0,r.lastIndexOf("/")+1)+e}const AI="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",oI="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",aI=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),cI=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),hI={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},uI={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function lI(e,t,r,s,i){let n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"NONE";const A=await gI();dI(A,A.exports[uI[i]],e,t,r,s,A.exports[hI[n||"NONE"]])}let Hs;async function gI(){return Hs||(Hs=BI()),Hs}async function BI(){let e=AI;WebAssembly.validate(aI)&&(e=oI,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const t=await WebAssembly.instantiate(fI(e),{});return await t.instance.exports.__wasm_call_ctors(),t.instance}function fI(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;++s){const i=e.charCodeAt(s);t[s]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let r=0;for(let s=0;s<e.length;++s)t[r++]=t[s]<60?cI[t[s]]:(t[s]-60)*64+t[++s];return t.buffer.slice(0,r)}function dI(e,t,r,s,i,n,A){const o=e.exports.sbrk,a=s+3&-4,c=o(a*i),h=o(n.length),u=new Uint8Array(e.exports.memory.buffer);u.set(n,h);const g=t(c,s,i,h,n.length);if(g===0&&A&&A(c,a,i),r.set(u.subarray(c,c+s*i)),o(c-o(0)),g!==0)throw new Error(`Malformed buffer data: ${g}`)}const qr="EXT_meshopt_compression",CI=qr;async function II(e,t){var r,s;const i=new ct(e);if(!(t!=null&&(r=t.gltf)!==null&&r!==void 0&&r.decompressMeshes)||!((s=t.gltf)!==null&&s!==void 0&&s.loadBuffers))return;const n=[];for(const A of e.json.bufferViews||[])n.push(EI(i,A));await Promise.all(n),i.removeExtension(qr)}async function EI(e,t){const r=e.getObjectExtension(t,qr);if(r){const{byteOffset:s=0,byteLength:i=0,byteStride:n,count:A,mode:o,filter:a="NONE",buffer:c}=r,h=e.gltf.buffers[c],u=new Uint8Array(h.arrayBuffer,h.byteOffset+s,i),g=new Uint8Array(e.gltf.buffers[t.buffer].arrayBuffer,t.byteOffset,t.byteLength);await lI(g,A,n,u,o,a),e.removeObjectExtension(t,qr)}}const mI=Object.freeze(Object.defineProperty({__proto__:null,decode:II,name:CI},Symbol.toStringTag,{value:"Module"})),me="EXT_texture_webp",pI=me;function yI(e,t){const r=new ct(e);if(!Md("image/webp")){if(r.getRequiredExtensions().includes(me))throw new Error(`gltf: Required extension ${me} not supported by browser`);return}const{json:s}=r;for(const i of s.textures||[]){const n=r.getObjectExtension(i,me);n&&(i.source=n.source),r.removeObjectExtension(i,me)}r.removeExtension(me)}const QI=Object.freeze(Object.defineProperty({__proto__:null,name:pI,preprocess:yI},Symbol.toStringTag,{value:"Module"})),Fr="KHR_texture_basisu",wI=Fr;function bI(e,t){const r=new ct(e),{json:s}=r;for(const i of s.textures||[]){const n=r.getObjectExtension(i,Fr);n&&(i.source=n.source,r.removeObjectExtension(i,Fr))}r.removeExtension(Fr)}const DI=Object.freeze(Object.defineProperty({__proto__:null,name:wI,preprocess:bI},Symbol.toStringTag,{value:"Module"}));function RI(e){const t={};for(const r in e){const s=e[r];if(r!=="indices"){const i=Ya(s);t[r]=i}}return t}function Ya(e){const{buffer:t,size:r,count:s}=SI(e);return{value:t,size:r,byteOffset:0,count:s,type:La(r),componentType:Wi(t)}}function SI(e){let t=e,r=1,s=0;return e&&e.value&&(t=e.value,r=e.size||1),t&&(ArrayBuffer.isView(t)||(t=TI(t,Float32Array)),s=t.length/r),{buffer:t,size:r,count:s}}function TI(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e?Array.isArray(e)?new t(e):r&&!(e instanceof t)?new t(e):e:null}const te="KHR_draco_mesh_compression",_I=te;function MI(e,t,r){const s=new ct(e);for(const i of Wa(s))s.getObjectExtension(i,te)}async function FI(e,t,r){var s;if(!(t!=null&&(s=t.gltf)!==null&&s!==void 0&&s.decompressMeshes))return;const i=new ct(e),n=[];for(const A of Wa(i))i.getObjectExtension(A,te)&&n.push(vI(i,A,t,r));await Promise.all(n),i.removeExtension(te)}function GI(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new ct(e);for(const s of r.json.meshes||[])LI(s,t),r.addRequiredExtension(te)}async function vI(e,t,r,s){const i=e.getObjectExtension(t,te);if(!i)return;const n=e.getTypedArrayForBufferView(i.bufferView),A=Fi(n.buffer,n.byteOffset),o={...r};delete o["3d-tiles"];const a=await tr(A,Da,o,s),c=RI(a.attributes);for(const[h,u]of Object.entries(c))if(h in t.attributes){const g=t.attributes[h],l=e.getAccessor(g);l!=null&&l.min&&l!==null&&l!==void 0&&l.max&&(u.min=l.min,u.max=l.max)}t.attributes=c,a.indices&&(t.indices=Ya(a.indices)),e.removeObjectExtension(t,te),xI(t)}function LI(e,t){var r;let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const A=i.DracoWriter.encodeSync({attributes:e}),o=n==null||(r=n.parseSync)===null||r===void 0?void 0:r.call(n,{attributes:e}),a=i._addFauxAttributes(o.attributes),c=i.addBufferView(A);return{primitives:[{attributes:a,mode:s,extensions:{[te]:{bufferView:c,attributes:a}}}]}}function xI(e){if(!e.attributes&&Object.keys(e.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*Wa(e){for(const t of e.json.meshes||[])for(const r of t.primitives)yield r}const OI=Object.freeze(Object.defineProperty({__proto__:null,decode:FI,encode:GI,name:_I,preprocess:MI},Symbol.toStringTag,{value:"Module"})),rn="KHR_texture_transform",UI=rn,Qr=new d,NI=new tt,PI=new tt;async function JI(e,t){var r;if(!new ct(e).hasExtension(rn)||!((r=t.gltf)!==null&&r!==void 0&&r.loadBuffers))return;const s=e.json.materials||[];for(let i=0;i<s.length;i++)HI(i,e)}function HI(e,t){var r,s,i;const n=[],A=(r=t.json.materials)===null||r===void 0?void 0:r[e],o=A==null||(s=A.pbrMetallicRoughness)===null||s===void 0?void 0:s.baseColorTexture;o&&Ge(t,e,o,n);const a=A==null?void 0:A.emissiveTexture;a&&Ge(t,e,a,n);const c=A==null?void 0:A.normalTexture;c&&Ge(t,e,c,n);const h=A==null?void 0:A.occlusionTexture;h&&Ge(t,e,h,n);const u=A==null||(i=A.pbrMetallicRoughness)===null||i===void 0?void 0:i.metallicRoughnessTexture;u&&Ge(t,e,u,n)}function Ge(e,t,r,s){const i=kI(r,s);if(!i)return;const n=e.json.meshes||[];for(const A of n)for(const o of A.primitives){const a=o.material;Number.isFinite(a)&&t===a&&qI(e,o,i)}}function kI(e,t){var r;const s=(r=e.extensions)===null||r===void 0?void 0:r[rn],{texCoord:i=0}=e,{texCoord:n=i}=s;if(t.findIndex(A=>{let[o,a]=A;return o===i&&a===n})===-1){const A=VI(s);return i!==n&&(e.texCoord=n),t.push([i,n]),{originalTexCoord:i,texCoord:n,matrix:A}}return null}function qI(e,t,r){const{originalTexCoord:s,texCoord:i,matrix:n}=r,A=t.attributes[`TEXCOORD_${s}`];if(Number.isFinite(A)){var o;const c=(o=e.json.accessors)===null||o===void 0?void 0:o[A];if(c&&c.bufferView){var a;const h=(a=e.json.bufferViews)===null||a===void 0?void 0:a[c.bufferView];if(h){const{arrayBuffer:u,byteOffset:g}=e.buffers[h.buffer],l=(g||0)+(c.byteOffset||0)+(h.byteOffset||0),{ArrayType:B,length:f}=Xi(c,h),C=va[c.componentType],m=Ga[c.type],Q=h.byteStride||C*m,I=new Float32Array(f);for(let p=0;p<c.count;p++){const R=new B(u,l+p*Q,2);Qr.set(R[0],R[1],1),Qr.transformByMatrix3(n),I.set([Qr[0],Qr[1]],p*m)}s===i?KI(c,h,e.buffers,I):jI(i,c,t,e,I)}}}}function KI(e,t,r,s){e.componentType=5126,r.push({arrayBuffer:s.buffer,byteOffset:0,byteLength:s.buffer.byteLength}),t.buffer=r.length-1,t.byteLength=s.buffer.byteLength,t.byteOffset=0,delete t.byteStride}function jI(e,t,r,s,i){s.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});const n=s.json.bufferViews;if(!n)return;n.push({buffer:s.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});const A=s.json.accessors;A&&(A.push({bufferView:(n==null?void 0:n.length)-1,byteOffset:0,componentType:5126,count:t.count,type:"VEC2"}),r.attributes[`TEXCOORD_${e}`]=A.length-1)}function VI(e){const{offset:t=[0,0],rotation:r=0,scale:s=[1,1]}=e,i=new tt().set(1,0,0,0,1,0,t[0],t[1],1),n=NI.set(Math.cos(r),Math.sin(r),0,-Math.sin(r),Math.cos(r),0,0,0,1),A=PI.set(s[0],0,0,0,s[1],0,0,0,1);return i.multiplyRight(n).multiplyRight(A)}const YI=Object.freeze(Object.defineProperty({__proto__:null,decode:JI,name:UI},Symbol.toStringTag,{value:"Module"})),ne="KHR_lights_punctual",WI=ne;async function XI(e){const t=new ct(e),{json:r}=t,s=t.getExtension(ne);s&&(t.json.lights=s.lights,t.removeExtension(ne));for(const i of r.nodes||[]){const n=t.getObjectExtension(i,ne);n&&(i.light=n.light),t.removeObjectExtension(i,ne)}}async function zI(e){const t=new ct(e),{json:r}=t;if(r.lights){const s=t.addExtension(ne);wt(!s.lights),s.lights=r.lights,delete r.lights}if(t.json.lights){for(const s of t.json.lights){const i=s.node;t.addObjectExtension(i,ne,s)}delete t.json.lights}}const ZI=Object.freeze(Object.defineProperty({__proto__:null,decode:XI,encode:zI,name:WI},Symbol.toStringTag,{value:"Module"})),Ye="KHR_materials_unlit",$I=Ye;async function tE(e){const t=new ct(e),{json:r}=t;for(const s of r.materials||[])s.extensions&&s.extensions.KHR_materials_unlit&&(s.unlit=!0),t.removeObjectExtension(s,Ye);t.removeExtension(Ye)}function eE(e){const t=new ct(e),{json:r}=t;if(t.materials)for(const s of r.materials||[])s.unlit&&(delete s.unlit,t.addObjectExtension(s,Ye,{}),t.addExtension(Ye))}const rE=Object.freeze(Object.defineProperty({__proto__:null,decode:tE,encode:eE,name:$I},Symbol.toStringTag,{value:"Module"})),Ue="KHR_techniques_webgl",sE=Ue;async function iE(e){const t=new ct(e),{json:r}=t,s=t.getExtension(Ue);if(s){const i=AE(s,t);for(const n of r.materials||[]){const A=t.getObjectExtension(n,Ue);A&&(n.technique=Object.assign({},A,i[A.technique]),n.technique.values=oE(n.technique,t)),t.removeObjectExtension(n,Ue)}t.removeExtension(Ue)}}async function nE(e,t){}function AE(e,t){const{programs:r=[],shaders:s=[],techniques:i=[]}=e,n=new TextDecoder;return s.forEach(A=>{if(Number.isFinite(A.bufferView))A.code=n.decode(t.getTypedArrayForBufferView(A.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),r.forEach(A=>{A.fragmentShader=s[A.fragmentShader],A.vertexShader=s[A.vertexShader]}),i.forEach(A=>{A.program=r[A.program]}),i}function oE(e,t){const r=Object.assign({},e.values);return Object.keys(e.uniforms||{}).forEach(s=>{e.uniforms[s].value&&!(s in r)&&(r[s]=e.uniforms[s].value)}),Object.keys(r).forEach(s=>{typeof r[s]=="object"&&r[s].index!==void 0&&(r[s].texture=t.getTexture(r[s].index))}),r}const aE=Object.freeze(Object.defineProperty({__proto__:null,decode:iE,encode:nE,name:sE},Symbol.toStringTag,{value:"Module"})),Xa=[fC,zd,mI,QI,DI,OI,ZI,rE,aE,YI,FC];function cE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Xa.filter(n=>za(n.name,t));for(const n of s){var i;(i=n.preprocess)===null||i===void 0||i.call(n,e,t,r)}}async function hE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=Xa.filter(n=>za(n.name,t));for(const n of s){var i;await((i=n.decode)===null||i===void 0?void 0:i.call(n,e,t,r))}}function za(e,t){var r;const s=(t==null||(r=t.gltf)===null||r===void 0?void 0:r.excludeExtensions)||{};return!(e in s&&!s[e])}const ks="KHR_binary_glTF";function uE(e){const t=new ct(e),{json:r}=t;for(const s of r.images||[]){const i=t.getObjectExtension(s,ks);i&&Object.assign(s,i),t.removeObjectExtension(s,ks)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,t.removeExtension(ks)}const RA={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},lE={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class gE{constructor(){this.idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}},this.json=void 0}normalize(t,r){this.json=t.json;const s=t.json;switch(s.asset&&s.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn(`glTF: Unknown version ${s.asset.version}`);return}if(!r.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(s),this._convertTopLevelObjectsToArrays(s),uE(t),this._convertObjectIdsToArrayIndices(s),this._updateObjects(s),this._updateMaterial(s)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(const r in RA)this._convertTopLevelObjectToArray(t,r)}_convertTopLevelObjectToArray(t,r){const s=t[r];if(!(!s||Array.isArray(s))){t[r]=[];for(const i in s){const n=s[i];n.id=n.id||i;const A=t[r].length;t[r].push(n),this.idToIndexMap[r][i]=A}}}_convertObjectIdsToArrayIndices(t){for(const r in RA)this._convertIdsToIndices(t,r);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(const r of t.textures)this._convertTextureIds(r);for(const r of t.meshes)this._convertMeshIds(r);for(const r of t.nodes)this._convertNodeIds(r);for(const r of t.scenes)this._convertSceneIds(r)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(const r of t.primitives){const{attributes:s,indices:i,material:n}=r;for(const A in s)s[A]=this._convertIdToIndex(s[A],"accessor");i&&(r.indices=this._convertIdToIndex(i,"accessor")),n&&(r.material=this._convertIdToIndex(n,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map(r=>this._convertIdToIndex(r,"node"))),t.meshes&&(t.meshes=t.meshes.map(r=>this._convertIdToIndex(r,"mesh")))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map(r=>this._convertIdToIndex(r,"node")))}_convertIdsToIndices(t,r){t[r]||(console.warn(`gltf v1: json doesn't contain attribute ${r}`),t[r]=[]);for(const s of t[r])for(const i in s){const n=s[i],A=this._convertIdToIndex(n,i);s[i]=A}}_convertIdToIndex(t,r){const s=lE[r];if(s in this.idToIndexMap){const i=this.idToIndexMap[s][t];if(!Number.isFinite(i))throw new Error(`gltf v1: failed to resolve ${r} with id ${t}`);return i}return t}_updateObjects(t){for(const r of this.json.buffers)delete r.type}_updateMaterial(t){for(const n of t.materials){var r,s,i;n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const A=((r=n.values)===null||r===void 0?void 0:r.tex)||((s=n.values)===null||s===void 0?void 0:s.texture2d_0)||((i=n.values)===null||i===void 0?void 0:i.diffuseTex),o=t.textures.findIndex(a=>a.id===A);o!==-1&&(n.pbrMetallicRoughness.baseColorTexture={index:o})}}}function BE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new gE().normalize(e,t)}async function fE(e,t){var r,s,i;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;return dE(e,t,n,A),BE(e,{normalize:A==null||(r=A.gltf)===null||r===void 0?void 0:r.normalize}),cE(e,A,o),A!=null&&(s=A.gltf)!==null&&s!==void 0&&s.loadBuffers&&e.json.buffers&&await CE(e,A,o),A!=null&&(i=A.gltf)!==null&&i!==void 0&&i.loadImages&&await IE(e,A,o),await hE(e,A,o),e}function dE(e,t,r,s){if(s.uri&&(e.baseUri=s.uri),t instanceof ArrayBuffer&&!eI(t,r,s)&&(t=new TextDecoder().decode(t)),typeof t=="string")e.json=gu(t);else if(t instanceof ArrayBuffer){const A={};r=rI(A,t,r,s.glb),wt(A.type==="glTF",`Invalid GLB magic string ${A.type}`),e._glb=A,e.json=A.json}else wt(!1,"GLTF: must be ArrayBuffer or string");const i=e.json.buffers||[];if(e.buffers=new Array(i.length).fill(null),e._glb&&e._glb.header.hasBinChunk){const{binChunks:A}=e._glb;e.buffers[0]={arrayBuffer:A[0].arrayBuffer,byteOffset:A[0].byteOffset,byteLength:A[0].byteLength}}const n=e.json.images||[];e.images=new Array(n.length).fill({})}async function CE(e,t,r){const s=e.json.buffers||[];for(let A=0;A<s.length;++A){const o=s[A];if(o.uri){var i,n;const{fetch:a}=r;wt(a);const c=Va(o.uri,t),h=await(r==null||(i=r.fetch)===null||i===void 0?void 0:i.call(r,c)),u=await(h==null||(n=h.arrayBuffer)===null||n===void 0?void 0:n.call(h));e.buffers[A]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete o.uri}else e.buffers[A]===null&&(e.buffers[A]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength})}}async function IE(e,t,r){const s=EE(e),i=e.json.images||[],n=[];for(const A of s)n.push(mE(e,i[A],A,t,r));return await Promise.all(n)}function EE(e){const t=new Set,r=e.json.textures||[];for(const s of r)s.source!==void 0&&t.add(s.source);return Array.from(t).sort()}async function mE(e,t,r,s,i){let n;if(t.uri&&!t.hasOwnProperty("bufferView")){const o=Va(t.uri,s),{fetch:a}=i;n=await(await a(o)).arrayBuffer(),t.bufferView={data:n}}if(Number.isFinite(t.bufferView)){const o=Jd(e.json,e.buffers,t.bufferView);n=Fi(o.buffer,o.byteOffset,o.byteLength)}wt(n,"glTF image has no data");let A=await tr(n,[_d,YC],{...s,mimeType:t.mimeType,basis:s.basis||{format:ja()}},i);A&&A[0]&&(A={compressed:!0,mipmaps:!1,width:A[0].width,height:A[0].height,data:A[0]}),e.images=e.images||[],e.images[r]=A}const Kr={name:"glTF",id:"gltf",module:"gltf",version:GC,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:pE,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}};async function pE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;t={...Kr.options,...t},t.gltf={...Kr.options.gltf,...t.gltf};const{byteOffset:s=0}=t;return await fE({},e,s,t,r)}const yE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},QE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},bt={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},wE={magFilter:bt.TEXTURE_MAG_FILTER,minFilter:bt.TEXTURE_MIN_FILTER,wrapS:bt.TEXTURE_WRAP_S,wrapT:bt.TEXTURE_WRAP_T},bE={[bt.TEXTURE_MAG_FILTER]:bt.LINEAR,[bt.TEXTURE_MIN_FILTER]:bt.NEAREST_MIPMAP_LINEAR,[bt.TEXTURE_WRAP_S]:bt.REPEAT,[bt.TEXTURE_WRAP_T]:bt.REPEAT};function DE(){return{id:"default-sampler",parameters:bE}}function RE(e){return QE[e]}function SE(e){return yE[e]}class TE{constructor(){this.baseUri="",this.jsonUnprocessed=void 0,this.json=void 0,this.buffers=[],this.images=[]}postProcess(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{json:s,buffers:i=[],images:n=[]}=t,{baseUri:A=""}=t;return wt(s),this.baseUri=A,this.buffers=i,this.images=n,this.jsonUnprocessed=s,this.json=this._resolveTree(t.json,r),this.json}_resolveTree(t){const r={...t};return this.json=r,t.bufferViews&&(r.bufferViews=t.bufferViews.map((s,i)=>this._resolveBufferView(s,i))),t.images&&(r.images=t.images.map((s,i)=>this._resolveImage(s,i))),t.samplers&&(r.samplers=t.samplers.map((s,i)=>this._resolveSampler(s,i))),t.textures&&(r.textures=t.textures.map((s,i)=>this._resolveTexture(s,i))),t.accessors&&(r.accessors=t.accessors.map((s,i)=>this._resolveAccessor(s,i))),t.materials&&(r.materials=t.materials.map((s,i)=>this._resolveMaterial(s,i))),t.meshes&&(r.meshes=t.meshes.map((s,i)=>this._resolveMesh(s,i))),t.nodes&&(r.nodes=t.nodes.map((s,i)=>this._resolveNode(s,i)),r.nodes=r.nodes.map((s,i)=>this._resolveNodeChildren(s))),t.skins&&(r.skins=t.skins.map((s,i)=>this._resolveSkin(s,i))),t.scenes&&(r.scenes=t.scenes.map((s,i)=>this._resolveScene(s,i))),typeof this.json.scene=="number"&&r.scenes&&(r.scene=r.scenes[this.json.scene]),r}getScene(t){return this._get(this.json.scenes,t)}getNode(t){return this._get(this.json.nodes,t)}getSkin(t){return this._get(this.json.skins,t)}getMesh(t){return this._get(this.json.meshes,t)}getMaterial(t){return this._get(this.json.materials,t)}getAccessor(t){return this._get(this.json.accessors,t)}getCamera(t){return this._get(this.json.cameras,t)}getTexture(t){return this._get(this.json.textures,t)}getSampler(t){return this._get(this.json.samplers,t)}getImage(t){return this._get(this.json.images,t)}getBufferView(t){return this._get(this.json.bufferViews,t)}getBuffer(t){return this._get(this.json.buffers,t)}_get(t,r){if(typeof r=="object")return r;const s=t&&t[r];return s||console.warn(`glTF file error: Could not find ${t}[${r}]`),s}_resolveScene(t,r){return{...t,id:t.id||`scene-${r}`,nodes:(t.nodes||[]).map(s=>this.getNode(s))}}_resolveNode(t,r){const s={...t,id:(t==null?void 0:t.id)||`node-${r}`};return t.mesh!==void 0&&(s.mesh=this.getMesh(t.mesh)),t.camera!==void 0&&(s.camera=this.getCamera(t.camera)),t.skin!==void 0&&(s.skin=this.getSkin(t.skin)),t.meshes!==void 0&&t.meshes.length&&(s.mesh=t.meshes.reduce((i,n)=>{const A=this.getMesh(n);return i.id=A.id,i.primitives=i.primitives.concat(A.primitives),i},{primitives:[]})),s}_resolveNodeChildren(t){return t.children&&(t.children=t.children.map(r=>this.getNode(r))),t}_resolveSkin(t,r){const s=typeof t.inverseBindMatrices=="number"?this.getAccessor(t.inverseBindMatrices):void 0;return{...t,id:t.id||`skin-${r}`,inverseBindMatrices:s}}_resolveMesh(t,r){const s={...t,id:t.id||`mesh-${r}`,primitives:[]};return t.primitives&&(s.primitives=t.primitives.map(i=>{const n={...i,attributes:{},indices:void 0,material:void 0},A=i.attributes;for(const o in A)n.attributes[o]=this.getAccessor(A[o]);return i.indices!==void 0&&(n.indices=this.getAccessor(i.indices)),i.material!==void 0&&(n.material=this.getMaterial(i.material)),n})),s}_resolveMaterial(t,r){const s={...t,id:t.id||`material-${r}`};if(s.normalTexture&&(s.normalTexture={...s.normalTexture},s.normalTexture.texture=this.getTexture(s.normalTexture.index)),s.occlusionTexture&&(s.occlusionTexture={...s.occlusionTexture},s.occlusionTexture.texture=this.getTexture(s.occlusionTexture.index)),s.emissiveTexture&&(s.emissiveTexture={...s.emissiveTexture},s.emissiveTexture.texture=this.getTexture(s.emissiveTexture.index)),s.emissiveFactor||(s.emissiveFactor=s.emissiveTexture?[1,1,1]:[0,0,0]),s.pbrMetallicRoughness){s.pbrMetallicRoughness={...s.pbrMetallicRoughness};const i=s.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return s}_resolveAccessor(t,r){const s=RE(t.componentType),i=SE(t.type),n=s*i,A={...t,id:t.id||`accessor-${r}`,bytesPerComponent:s,components:i,bytesPerElement:n,value:void 0,bufferView:void 0,sparse:void 0};if(t.bufferView!==void 0&&(A.bufferView=this.getBufferView(t.bufferView)),A.bufferView){const o=A.bufferView.buffer,{ArrayType:a,byteLength:c}=Xi(A,A.bufferView),h=(A.bufferView.byteOffset||0)+(A.byteOffset||0)+o.byteOffset;let u=o.arrayBuffer.slice(h,h+c);A.bufferView.byteStride&&(u=this._getValueFromInterleavedBuffer(o,h,A.bufferView.byteStride,A.bytesPerElement,A.count)),A.value=new a(u)}return A}_getValueFromInterleavedBuffer(t,r,s,i,n){const A=new Uint8Array(n*i);for(let o=0;o<n;o++){const a=r+o*s;A.set(new Uint8Array(t.arrayBuffer.slice(a,a+i)),o*i)}return A.buffer}_resolveTexture(t,r){return{...t,id:t.id||`texture-${r}`,sampler:typeof t.sampler=="number"?this.getSampler(t.sampler):DE(),source:typeof t.source=="number"?this.getImage(t.source):void 0}}_resolveSampler(t,r){const s={id:t.id||`sampler-${r}`,...t,parameters:{}};for(const i in s){const n=this._enumSamplerParameter(i);n!==void 0&&(s.parameters[n]=s[i])}return s}_enumSamplerParameter(t){return wE[t]}_resolveImage(t,r){const s={...t,id:t.id||`image-${r}`,image:null,bufferView:t.bufferView!==void 0?this.getBufferView(t.bufferView):void 0},i=this.images[r];return i&&(s.image=i),s}_resolveBufferView(t,r){const s=t.buffer,i=this.buffers[s].arrayBuffer;let n=this.buffers[s].byteOffset||0;return t.byteOffset&&(n+=t.byteOffset),{id:`bufferView-${r}`,...t,buffer:this.buffers[s],data:new Uint8Array(i,n,t.byteLength)}}_resolveCamera(t,r){const s={...t,id:t.id||`camera-${r}`};return s.perspective,s.orthographic,s}}function Za(e,t){return new TE().postProcess(e,t)}const Ci={URI:0,EMBEDDED:1};function $a(e,t,r,s){e.rotateYtoZ=!0;const i=(e.byteOffset||0)+(e.byteLength||0)-r;if(i===0)throw new Error("glTF byte length must be greater than 0.");return e.gltfUpAxis=s!=null&&s["3d-tiles"]&&s["3d-tiles"].assetGltfUpAxis?s["3d-tiles"].assetGltfUpAxis:"Y",e.gltfArrayBuffer=Fi(t,r,i),e.gltfByteOffset=0,e.gltfByteLength=i,r%4===0||console.warn(`${e.type}: embedded glb is not aligned to a 4-byte boundary.`),(e.byteOffset||0)+(e.byteLength||0)}async function tc(e,t,r,s){const i=(r==null?void 0:r["3d-tiles"])||{};if(_E(e,t),i.loadGLTF){if(!s)return;if(e.gltfUrl){const{fetch:n}=s,A=await n(e.gltfUrl,r);e.gltfArrayBuffer=await A.arrayBuffer(),e.gltfByteOffset=0}if(e.gltfArrayBuffer){const n=await tr(e.gltfArrayBuffer,Kr,r,s);e.gltf=Za(n),e.gpuMemoryUsageInBytes=xa(e.gltf),delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength}}}function _E(e,t,r){switch(t){case Ci.URI:if(e.gltfArrayBuffer){const s=new Uint8Array(e.gltfArrayBuffer,e.gltfByteOffset),i=new TextDecoder().decode(s);e.gltfUrl=i.replace(/[\s\0]+$/,"")}delete e.gltfArrayBuffer,delete e.gltfByteOffset,delete e.gltfByteLength;break;case Ci.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}async function ME(e,t,r,s,i){var n;r=FE(e,t,r,s),await tc(e,Ci.EMBEDDED,s,i);const A=e==null||(n=e.gltf)===null||n===void 0?void 0:n.extensions;return A&&A.CESIUM_RTC&&(e.rtcCenter=A.CESIUM_RTC.center),r}function FE(e,t,r,s,i){r=ss(e,t,r),r=Ki(e,t,r),r=ji(e,t,r),r=$a(e,t,r,s);const n=new qi(e.featureTableJson,e.featureTableBinary);return e.rtcCenter=n.getGlobalProperty("RTC_CENTER",O.FLOAT,3),r}async function GE(e,t,r,s,i){return r=vE(e,t,r,s),await tc(e,e.gltfFormat||0,s,i),r}function vE(e,t,r,s,i){var n;if(r=ss(e,t,r),e.version!==1)throw new Error(`Instanced 3D Model version ${e.version} is not supported`);r=Ki(e,t,r);const A=new DataView(t);if(e.gltfFormat=A.getUint32(r,!0),r+=4,r=ji(e,t,r),r=$a(e,t,r,s),!(e!=null&&(n=e.header)!==null&&n!==void 0&&n.featureTableJsonByteLength)||e.header.featureTableJsonByteLength===0)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");const o=new qi(e.featureTableJson,e.featureTableBinary),a=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=a,!Number.isFinite(a))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");e.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),e.rtcCenter=o.getGlobalProperty("RTC_CENTER",O.FLOAT,3);const c=new Sa(e.batchTableJson,e.batchTableBinary,a);return LE(e,o,c,a),r}function LE(e,t,r,s){const i=new Array(s),n=new d;new d,new d,new d;const A=new tt,o=new Nr,a=new d,c={},h=new q,u=[],g=[],l=[],B=[];for(let f=0;f<s;f++){let C;if(t.hasProperty("POSITION"))C=t.getProperty("POSITION",O.FLOAT,3,f,n);else if(t.hasProperty("POSITION_QUANTIZED")){C=t.getProperty("POSITION_QUANTIZED",O.UNSIGNED_SHORT,3,f,n);const y=t.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",O.FLOAT,3);if(!y)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const _=t.getGlobalProperty("QUANTIZED_VOLUME_SCALE",O.FLOAT,3);if(!_)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const G=65535;for(let T=0;T<3;T++)C[T]=C[T]/G*_[T]+y[T]}if(!C)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");if(n.copy(C),c.translation=n,e.normalUp=t.getProperty("NORMAL_UP",O.FLOAT,3,f,u),e.normalRight=t.getProperty("NORMAL_RIGHT",O.FLOAT,3,f,g),e.normalUp){if(!e.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");e.hasCustomOrientation=!0}else{if(e.octNormalUp=t.getProperty("NORMAL_UP_OCT32P",O.UNSIGNED_SHORT,2,f,u),e.octNormalRight=t.getProperty("NORMAL_RIGHT_OCT32P",O.UNSIGNED_SHORT,2,f,g),e.octNormalUp)throw e.octNormalRight?new Error("i3dm: oct-encoded orientation not implemented"):new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");e.eastNorthUp?(k.WGS84.eastNorthUpToFixedFrame(n,h),h.getRotationMatrix3(A)):A.identity()}o.fromMatrix3(A),c.rotation=o,a.set(1,1,1);const m=t.getProperty("SCALE",O.FLOAT,1,f,l);Number.isFinite(m)&&a.multiplyByScalar(m);const Q=t.getProperty("SCALE_NON_UNIFORM",O.FLOAT,3,f,u);Q&&a.scale(Q),c.scale=a;let I=t.getProperty("BATCH_ID",O.UNSIGNED_SHORT,1,f,B);I===void 0&&(I=f);const p=new q().fromQuaternion(c.rotation);h.identity(),h.translate(c.translation),h.multiplyRight(p),h.scale(c.scale);const R=h.clone();i[f]={modelMatrix:R,batchId:I}}e.instances=i}async function xE(e,t,r,s,i,n){r=ss(e,t,r);const A=new DataView(t);for(e.tilesLength=A.getUint32(r,!0),r+=4,e.tiles=[];e.tiles.length<e.tilesLength&&(e.byteLength||0)-r>12;){const o={shape:"tile3d"};e.tiles.push(o),r=await n(t,r,s,i,o)}return r}async function OE(e,t,r,s){var i,n;if(e.rotateYtoZ=!0,e.gltfUpAxis=r!=null&&(i=r["3d-tiles"])!==null&&i!==void 0&&i.assetGltfUpAxis?r["3d-tiles"].assetGltfUpAxis:"Y",r!=null&&(n=r["3d-tiles"])!==null&&n!==void 0&&n.loadGLTF){if(!s)return t.byteLength;const A=await tr(t,Kr,r,s);e.gltf=Za(A),e.gpuMemoryUsageInBytes=xa(e.gltf)}else e.gltfArrayBuffer=t;return t.byteLength}async function ec(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{shape:"tile3d"};switch(i.byteOffset=t,i.type=nf(e,t),i.type){case _e.COMPOSITE:return await xE(i,e,t,r,s,ec);case _e.BATCHED_3D_MODEL:return await ME(i,e,t,r,s);case _e.GLTF:return await OE(i,e,r,s);case _e.INSTANCED_3D_MODEL:return await GE(i,e,t,r,s);case _e.POINT_CLOUD:return await kf(i,e,t,r,s);default:throw new Error(`3DTileLoader: unknown type ${i.type}`)}}const UE=1952609651,NE=1;async function PE(e,t,r){if(new Uint32Array(e.slice(0,4))[0]!==UE)throw new Error("Wrong subtree file magic number");if(new Uint32Array(e.slice(4,8))[0]!==NE)throw new Error("Wrong subtree file verson, must be 1");const s=SA(e.slice(8,16)),i=new Uint8Array(e,24,s),n=new TextDecoder("utf8").decode(i),A=JSON.parse(n),o=SA(e.slice(16,24));let a=new ArrayBuffer(0);if(o&&(a=e.slice(24+s)),await wr(A,A.tileAvailability,a,r),Array.isArray(A.contentAvailability))for(const c of A.contentAvailability)await wr(A,c,a,r);else await wr(A,A.contentAvailability,a,r);return await wr(A,A.childSubtreeAvailability,a,r),A}async function wr(e,t,r,s){const i=Number.isFinite(t.bitstream)?t.bitstream:t.bufferView;if(typeof i!="number")return;const n=e.bufferViews[i],A=e.buffers[n.buffer];if(!(s!=null&&s.baseUrl))throw new Error("Url is not provided");if(!s.fetch)throw new Error("fetch is not provided");if(A.uri){const a=`${(s==null?void 0:s.baseUrl)||""}/${A.uri}`,c=await(await s.fetch(a)).arrayBuffer();t.explicitBitstream=new Uint8Array(c,n.byteOffset,n.byteLength);return}const o=e.buffers.slice(0,n.buffer).reduce((a,c)=>a+c.byteLength,0);t.explicitBitstream=new Uint8Array(r.slice(o,o+A.byteLength),n.byteOffset,n.byteLength)}function SA(e){const t=new DataView(e),r=t.getUint32(0,!0),s=t.getUint32(4,!0);return r+2**32*s}const rc={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:Qa,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:PE,options:{}};/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var Rt=null;try{Rt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function J(e,t,r){this.low=e|0,this.high=t|0,this.unsigned=!!r}J.prototype.__isLong__;Object.defineProperty(J.prototype,"__isLong__",{value:!0});function ht(e){return(e&&e.__isLong__)===!0}function TA(e){var t=Math.clz32(e&-e);return e?31-t:t}J.isLong=ht;var _A={},MA={};function ge(e,t){var r,s,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(s=MA[e],s)?s:(r=U(e,0,!0),i&&(MA[e]=r),r)):(e|=0,(i=-128<=e&&e<128)&&(s=_A[e],s)?s:(r=U(e,e<0?-1:0,!1),i&&(_A[e]=r),r))}J.fromInt=ge;function St(e,t){if(isNaN(e))return t?jt:Gt;if(t){if(e<0)return jt;if(e>=sc)return Ac}else{if(e<=-GA)return Et;if(e+1>=GA)return nc}return e<0?St(-e,t).neg():U(e%De|0,e/De|0,t)}J.fromNumber=St;function U(e,t,r){return new J(e,t,r)}J.fromBits=U;var jr=Math.pow;function sn(e,t,r){if(e.length===0)throw Error("empty string");if(typeof t=="number"?(r=t,t=!1):t=!!t,e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t?jt:Gt;if(r=r||10,r<2||36<r)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return sn(e.substring(1),t,r).neg();for(var i=St(jr(r,8)),n=Gt,A=0;A<e.length;A+=8){var o=Math.min(8,e.length-A),a=parseInt(e.substring(A,A+o),r);if(o<8){var c=St(jr(r,o));n=n.mul(c).add(St(a))}else n=n.mul(i),n=n.add(St(a))}return n.unsigned=t,n}J.fromString=sn;function Lt(e,t){return typeof e=="number"?St(e,t):typeof e=="string"?sn(e,t):U(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}J.fromValue=Lt;var FA=65536,JE=1<<24,De=FA*FA,sc=De*De,GA=sc/2,vA=ge(JE),Gt=ge(0);J.ZERO=Gt;var jt=ge(0,!0);J.UZERO=jt;var pe=ge(1);J.ONE=pe;var ic=ge(1,!0);J.UONE=ic;var Ii=ge(-1);J.NEG_ONE=Ii;var nc=U(-1,2147483647,!1);J.MAX_VALUE=nc;var Ac=U(-1,-1,!0);J.MAX_UNSIGNED_VALUE=Ac;var Et=U(0,-2147483648,!1);J.MIN_VALUE=Et;var b=J.prototype;b.toInt=function(){return this.unsigned?this.low>>>0:this.low};b.toNumber=function(){return this.unsigned?(this.high>>>0)*De+(this.low>>>0):this.high*De+(this.low>>>0)};b.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Et)){var t=St(e),r=this.div(t),s=r.mul(t).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=St(jr(e,6),this.unsigned),n=this,A="";;){var o=n.div(i),a=n.sub(o.mul(i)).toInt()>>>0,c=a.toString(e);if(n=o,n.isZero())return c+A;for(;c.length<6;)c="0"+c;A=""+c+A}};b.getHighBits=function(){return this.high};b.getHighBitsUnsigned=function(){return this.high>>>0};b.getLowBits=function(){return this.low};b.getLowBitsUnsigned=function(){return this.low>>>0};b.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Et)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return this.high!=0?t+33:t+1};b.isZero=function(){return this.high===0&&this.low===0};b.eqz=b.isZero;b.isNegative=function(){return!this.unsigned&&this.high<0};b.isPositive=function(){return this.unsigned||this.high>=0};b.isOdd=function(){return(this.low&1)===1};b.isEven=function(){return(this.low&1)===0};b.equals=function(e){return ht(e)||(e=Lt(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};b.eq=b.equals;b.notEquals=function(e){return!this.eq(e)};b.neq=b.notEquals;b.ne=b.notEquals;b.lessThan=function(e){return this.comp(e)<0};b.lt=b.lessThan;b.lessThanOrEqual=function(e){return this.comp(e)<=0};b.lte=b.lessThanOrEqual;b.le=b.lessThanOrEqual;b.greaterThan=function(e){return this.comp(e)>0};b.gt=b.greaterThan;b.greaterThanOrEqual=function(e){return this.comp(e)>=0};b.gte=b.greaterThanOrEqual;b.ge=b.greaterThanOrEqual;b.compare=function(e){if(ht(e)||(e=Lt(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};b.comp=b.compare;b.negate=function(){return!this.unsigned&&this.eq(Et)?Et:this.not().add(pe)};b.neg=b.negate;b.add=function(e){ht(e)||(e=Lt(e));var t=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,n=e.high>>>16,A=e.high&65535,o=e.low>>>16,a=e.low&65535,c=0,h=0,u=0,g=0;return g+=i+a,u+=g>>>16,g&=65535,u+=s+o,h+=u>>>16,u&=65535,h+=r+A,c+=h>>>16,h&=65535,c+=t+n,c&=65535,U(u<<16|g,c<<16|h,this.unsigned)};b.subtract=function(e){return ht(e)||(e=Lt(e)),this.add(e.neg())};b.sub=b.subtract;b.multiply=function(e){if(this.isZero())return this;if(ht(e)||(e=Lt(e)),Rt){var t=Rt.mul(this.low,this.high,e.low,e.high);return U(t,Rt.get_high(),this.unsigned)}if(e.isZero())return this.unsigned?jt:Gt;if(this.eq(Et))return e.isOdd()?Et:Gt;if(e.eq(Et))return this.isOdd()?Et:Gt;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(vA)&&e.lt(vA))return St(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,n=this.low&65535,A=e.high>>>16,o=e.high&65535,a=e.low>>>16,c=e.low&65535,h=0,u=0,g=0,l=0;return l+=n*c,g+=l>>>16,l&=65535,g+=i*c,u+=g>>>16,g&=65535,g+=n*a,u+=g>>>16,g&=65535,u+=s*c,h+=u>>>16,u&=65535,u+=i*a,h+=u>>>16,u&=65535,u+=n*o,h+=u>>>16,u&=65535,h+=r*c+s*a+i*o+n*A,h&=65535,U(g<<16|l,h<<16|u,this.unsigned)};b.mul=b.multiply;b.divide=function(e){if(ht(e)||(e=Lt(e)),e.isZero())throw Error("division by zero");if(Rt){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var t=(this.unsigned?Rt.div_u:Rt.div_s)(this.low,this.high,e.low,e.high);return U(t,Rt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?jt:Gt;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return jt;if(e.gt(this.shru(1)))return ic;i=jt}else{if(this.eq(Et)){if(e.eq(pe)||e.eq(Ii))return Et;if(e.eq(Et))return pe;var n=this.shr(1);return r=n.div(e).shl(1),r.eq(Gt)?e.isNegative()?pe:Ii:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(Et))return this.unsigned?jt:Gt;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Gt}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var A=Math.ceil(Math.log(r)/Math.LN2),o=A<=48?1:jr(2,A-48),a=St(r),c=a.mul(e);c.isNegative()||c.gt(s);)r-=o,a=St(r,this.unsigned),c=a.mul(e);a.isZero()&&(a=pe),i=i.add(a),s=s.sub(c)}return i};b.div=b.divide;b.modulo=function(e){if(ht(e)||(e=Lt(e)),Rt){var t=(this.unsigned?Rt.rem_u:Rt.rem_s)(this.low,this.high,e.low,e.high);return U(t,Rt.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};b.mod=b.modulo;b.rem=b.modulo;b.not=function(){return U(~this.low,~this.high,this.unsigned)};b.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};b.clz=b.countLeadingZeros;b.countTrailingZeros=function(){return this.low?TA(this.low):TA(this.high)+32};b.ctz=b.countTrailingZeros;b.and=function(e){return ht(e)||(e=Lt(e)),U(this.low&e.low,this.high&e.high,this.unsigned)};b.or=function(e){return ht(e)||(e=Lt(e)),U(this.low|e.low,this.high|e.high,this.unsigned)};b.xor=function(e){return ht(e)||(e=Lt(e)),U(this.low^e.low,this.high^e.high,this.unsigned)};b.shiftLeft=function(e){return ht(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?U(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):U(0,this.low<<e-32,this.unsigned)};b.shl=b.shiftLeft;b.shiftRight=function(e){return ht(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?U(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):U(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};b.shr=b.shiftRight;b.shiftRightUnsigned=function(e){return ht(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?U(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):e===32?U(this.high,0,this.unsigned):U(this.high>>>e-32,0,this.unsigned)};b.shru=b.shiftRightUnsigned;b.shr_u=b.shiftRightUnsigned;b.rotateLeft=function(e){var t;return ht(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?U(this.high,this.low,this.unsigned):e<32?(t=32-e,U(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,U(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))};b.rotl=b.rotateLeft;b.rotateRight=function(e){var t;return ht(e)&&(e=e.toInt()),(e&=63)===0?this:e===32?U(this.high,this.low,this.unsigned):e<32?(t=32-e,U(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,U(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))};b.rotr=b.rotateRight;b.toSigned=function(){return this.unsigned?U(this.low,this.high,!1):this};b.toUnsigned=function(){return this.unsigned?this:U(this.low,this.high,!0)};b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};b.toBytesLE=function(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};b.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};J.fromBytes=function(e,t,r){return r?J.fromBytesLE(e,t):J.fromBytesBE(e,t)};J.fromBytesLE=function(e,t){return new J(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};J.fromBytesBE=function(e,t){return new J(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};const HE=16;function oc(e){e==="X"&&(e="");const t=e.padEnd(HE,"0");return J.fromString(t,!0,16)}function kE(e){if(e.isZero())return"X";let t=e.countTrailingZeros();const r=t%4;t=(t-r)/4;const s=t;t*=4;const i=e.shiftRightUnsigned(t).toString(16).replace(/0+$/,"");return Array(17-s-i.length).join("0")+i}function qE(e,t){const r=KE(e).shiftRightUnsigned(2);return e.add(J.fromNumber(2*t+1-4).multiply(r))}function KE(e){return e.and(e.not().add(1))}const jE=3,VE=30,YE=2*VE+1,LA=180/Math.PI;function WE(e){if(e.length===0)throw new Error(`Invalid Hilbert quad key ${e}`);const t=e.split("/"),r=parseInt(t[0],10),s=t[1],i=s.length;let n=0;const A=[0,0];for(let o=i-1;o>=0;o--){n=i-o;const a=s[o];let c=0,h=0;a==="1"?h=1:a==="2"?(c=1,h=1):a==="3"&&(c=1);const u=Math.pow(2,n-1);zE(u,A,c,h),A[0]+=u*c,A[1]+=u*h}if(r%2===1){const o=A[0];A[0]=A[1],A[1]=o}return{face:r,ij:A,level:n}}function XE(e){if(e.isZero())return"";let t=e.toString(2);for(;t.length<jE+YE;)t="0"+t;const r=t.lastIndexOf("1"),s=t.substring(0,3),i=t.substring(3,r),n=i.length/2,A=J.fromString(s,!0,2).toString(10);let o="";if(n!==0)for(o=J.fromString(i,!0,2).toString(4);o.length<n;)o="0"+o;return`${A}/${o}`}function ac(e,t,r){const s=1<<t;return[(e[0]+r[0])/s,(e[1]+r[1])/s]}function xA(e){return e>=.5?1/3*(4*e*e-1):1/3*(1-4*(1-e)*(1-e))}function cc(e){return[xA(e[0]),xA(e[1])]}function hc(e,t){let[r,s]=t;switch(e){case 0:return[1,r,s];case 1:return[-r,1,s];case 2:return[-r,-s,1];case 3:return[-1,-s,-r];case 4:return[s,-1,-r];case 5:return[s,r,-1];default:throw new Error("Invalid face")}}function uc(e){let[t,r,s]=e;const i=Math.atan2(s,Math.sqrt(t*t+r*r));return[Math.atan2(r,t)*LA,i*LA]}function zE(e,t,r,s){if(s===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}function ZE(e){const t=ac(e.ij,e.level,[.5,.5]),r=cc(t),s=hc(e.face,r);return uc(s)}const $E=100;function OA(e){const{face:t,ij:r,level:s}=e,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],n=Math.max(1,Math.ceil($E*Math.pow(2,-s))),A=new Float64Array(4*n*2+2);let o=0,a=0;for(let c=0;c<4;c++){const h=i[c].slice(0),u=i[c+1],g=(u[0]-h[0])/n,l=(u[1]-h[1])/n;for(let B=0;B<n;B++){h[0]+=g,h[1]+=l;const f=ac(r,s,h),C=cc(f),m=hc(t,C),Q=uc(m);Math.abs(Q[1])>89.999&&(Q[0]=a);const I=Q[0]-a;Q[0]+=I>180?-360:I<-180?360:0,A[o++]=Q[0],A[o++]=Q[1],a=Q[0]}}return A[o++]=A[0],A[o++]=A[1],A}function nn(e){const t=tm(e);return WE(t)}function tm(e){if(e.indexOf("/")>0)return e;const t=oc(e);return XE(t)}function em(e){const t=nn(e);return ZE(t)}function rm(e){let t;if(e.face===2||e.face===5){let r=null,s=0;for(let i=0;i<4;i++){const n=`${e.face}/${i}`,A=nn(n),o=OA(A);(typeof r>"u"||r===null)&&(r=new Float64Array(4*o.length)),r.set(o,s),s+=o.length}t=UA(r)}else{const r=OA(e);t=UA(r)}return t}function UA(e){if(e.length%2!==0)throw new Error("Invalid corners");const t=[],r=[];for(let s=0;s<e.length;s+=2)t.push(e[s]),r.push(e[s+1]);return t.sort((s,i)=>s-i),r.sort((s,i)=>s-i),{west:t[0],east:t[t.length-1],north:r[r.length-1],south:r[0]}}function sm(e,t){const r=(t==null?void 0:t.minimumHeight)||0,s=(t==null?void 0:t.maximumHeight)||0,i=nn(e),n=rm(i),A=n.west,o=n.south,a=n.east,c=n.north,h=[];return h.push(new d(A,c,r)),h.push(new d(a,c,r)),h.push(new d(a,o,r)),h.push(new d(A,o,r)),h.push(new d(A,c,s)),h.push(new d(a,c,s)),h.push(new d(a,o,s)),h.push(new d(A,o,s)),h}function lc(e){const t=e.token,r={minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight},s=sm(t,r),i=em(t),n=i[0],A=i[1],o=k.WGS84.cartographicToCartesian([n,A,r.maximumHeight]),a=new d(o[0],o[1],o[2]);s.push(a);const c=rf(s);return[...c.center,...c.halfAxes]}const im=4,nm=8,Am={QUADTREE:im,OCTREE:nm};function om(e,t,r){if(e!=null&&e.box){const s=oc(e.s2VolumeInfo.token),i=qE(s,t),n=kE(i),A={...e.s2VolumeInfo};switch(A.token=n,r){case"OCTREE":const o=e.s2VolumeInfo,a=o.maximumHeight-o.minimumHeight,c=a/2,h=o.minimumHeight+a/2;o.minimumHeight=h-c,o.maximumHeight=h+c;break}return{box:lc(A),s2VolumeInfo:A}}}async function gc(e){const{implicitOptions:t,parentData:r={mortonIndex:0,x:0,y:0,z:0},childIndex:s=0,s2VolumeBox:i,loaderOptions:n}=e;let{subtree:A,level:o=0,globalData:a={level:0,mortonIndex:0,x:0,y:0,z:0}}=e;const{subdivisionScheme:c,subtreeLevels:h,maximumLevel:u,contentUrlTemplate:g,subtreesUriTemplate:l,basePath:B}=t,f={children:[],lodMetricValue:0,contentUrl:""};if(!u)return $o.once(`Missing 'maximumLevel' or 'availableLevels' property. The subtree ${g} won't be loaded...`),f;const C=o+a.level;if(C>u)return f;const m=Am[c],Q=Math.log2(m),I=s&1,p=s>>1&1,R=s>>2&1,y=(m**o-1)/(m-1);let _=re(r.mortonIndex,s,Q),G=y+_,T=re(r.x,I,1),v=re(r.y,p,1),P=re(r.z,R,1),K=!1;o>=h&&(K=qs(A.childSubtreeAvailability,_));const H=re(a.x,T,o),x=re(a.y,v,o),Y=re(a.z,P,o);if(K){const j=`${B}/${l}`,ut=Ei(j,C,H,x,Y);A=await we(ut,rc,n),a={mortonIndex:_,x:T,y:v,z:P,level:o},_=0,G=0,T=0,v=0,P=0,o=0}if(!qs(A.tileAvailability,G))return f;qs(A.contentAvailability,G)&&(f.contentUrl=Ei(g,C,H,x,Y));const mt=o+1,W={mortonIndex:_,x:T,y:v,z:P};for(let j=0;j<m;j++){const ut=om(i,j,c),X=await gc({subtree:A,implicitOptions:t,loaderOptions:n,parentData:W,childIndex:j,level:mt,globalData:{...a},s2VolumeBox:ut});if(X.contentUrl||X.children.length){const gt=C+1,ee=am(X,gt,{childTileX:T,childTileY:v,childTileZ:P},t,i);f.children.push(ee)}}return f}function qs(e,t){let r;return Array.isArray(e)?(r=e[0],e.length>1&&$o.once('Not supported extension "3DTILES_multiple_contents" has been detected')):r=e,"constant"in r?!!r.constant:r.explicitBitstream?um(t,r.explicitBitstream):!1}function am(e,t,r,s,i){const{basePath:n,refine:A,getRefine:o,lodMetricType:a,getTileType:c,rootLodMetricValue:h,rootBoundingVolume:u}=s,g=e.contentUrl&&e.contentUrl.replace(`${n}/`,""),l=h/2**t,B=i!=null&&i.box?{box:i.box}:u,f=cm(t,B,r);return{children:e.children,contentUrl:e.contentUrl,content:{uri:g},id:e.contentUrl,refine:o(A),type:c(e),lodMetricType:a,lodMetricValue:l,geometricError:l,transform:e.transform,boundingVolume:f}}function cm(e,t,r){if(t.region){const{childTileX:s,childTileY:i,childTileZ:n}=r,[A,o,a,c,h,u]=t.region,g=2**e,l=(a-A)/g,B=(c-o)/g,f=(u-h)/g,[C,m]=[A+l*s,A+l*(s+1)],[Q,I]=[o+B*i,o+B*(i+1)],[p,R]=[h+f*n,h+f*(n+1)];return{region:[C,Q,m,I,p,R]}}if(t.box)return t;throw new Error(`Unsupported bounding volume type ${t}`)}function re(e,t,r){return(e<<r)+t}function Ei(e,t,r,s,i){const n=hm({level:t,x:r,y:s,z:i});return e.replace(/{level}|{x}|{y}|{z}/gi,A=>n[A])}function hm(e){const t={};for(const r in e)t[`{${r}}`]=e[r];return t}function um(e,t){const r=Math.floor(e/8),s=e%8;return(t[r]>>s&1)===1}function An(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(!t)return mr.EMPTY;const r=t.split("?")[0].split(".").pop();switch(r){case"pnts":return mr.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return mr.SCENEGRAPH;default:return r||mr.EMPTY}}function on(e){switch(e){case"REPLACE":case"replace":return iA.REPLACE;case"ADD":case"add":return iA.ADD;default:return e}}function mi(e,t){if(/^[a-z][0-9a-z+.-]*:/i.test(t)){const r=new URL(e,`${t}/`);return decodeURI(r.toString())}else if(e.startsWith("/"))return e;return Qu(t,e)}function NA(e,t){if(!e)return null;let r;if(e.content){var s;const i=e.content.uri||((s=e.content)===null||s===void 0?void 0:s.url);typeof i<"u"&&(r=mi(i,t))}return{...e,id:r,contentUrl:r,lodMetricType:rs.GEOMETRIC_ERROR,lodMetricValue:e.geometricError,transformMatrix:e.transform,type:An(e,r),refine:on(e.refine)}}async function lm(e,t,r){let s=null;const i=JA(e.root);i&&e.root?s=await PA(e.root,e,t,i,r):s=NA(e.root,t);const n=[];for(n.push(s);n.length>0;){const A=n.pop()||{},o=A.children||[],a=[];for(const c of o){const h=JA(c);let u;h?u=await PA(c,e,t,h,r):u=NA(c,t),u&&(a.push(u),n.push(u))}A.children=a}return s}async function PA(e,t,r,s,i){var n,A,o;const{subdivisionScheme:a,maximumLevel:c,availableLevels:h,subtreeLevels:u,subtrees:{uri:g}}=s,l=Ei(g,0,0,0,0),B=mi(l,r),f=await we(B,rc,i),C=(n=e.content)===null||n===void 0?void 0:n.uri,m=C?mi(C,r):"",Q=t==null||(A=t.root)===null||A===void 0?void 0:A.refine,I=e.geometricError,p=(o=e.boundingVolume.extensions)===null||o===void 0?void 0:o["3DTILES_bounding_volume_S2"];if(p){const _={box:lc(p),s2VolumeInfo:p};e.boundingVolume=_}const R=e.boundingVolume,y={contentUrlTemplate:m,subtreesUriTemplate:g,subdivisionScheme:a,subtreeLevels:u,maximumLevel:Number.isFinite(h)?h-1:c,refine:Q,basePath:r,lodMetricType:rs.GEOMETRIC_ERROR,rootLodMetricValue:I,rootBoundingVolume:R,getTileType:An,getRefine:on};return await gm(e,r,f,y,i)}async function gm(e,t,r,s,i){if(!e)return null;const{children:n,contentUrl:A}=await gc({subtree:r,implicitOptions:s,loaderOptions:i});let o,a=null;return A&&(o=A,a={uri:A.replace(`${t}/`,"")}),{...e,id:o,contentUrl:o,lodMetricType:rs.GEOMETRIC_ERROR,lodMetricValue:e.geometricError,transformMatrix:e.transform,type:An(e,o),refine:on(e.refine),content:a||e.content,children:n}}function JA(e){var t;return(e==null||(t=e.extensions)===null||t===void 0?void 0:t["3DTILES_implicit_tiling"])||(e==null?void 0:e.implicitTiling)}const qe={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:Qa,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:Bm,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};async function Bm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=t["3d-tiles"]||{};let i;return s.isTileset==="auto"?i=(r==null?void 0:r.url)&&r.url.indexOf(".json")!==-1:i=s.isTileset,i?fm(e,t,r):dm(e,t,r)}async function fm(e,t,r){var s;const i=JSON.parse(new TextDecoder().decode(e)),n=(r==null?void 0:r.url)||"",A=Cm(n),o=await lm(i,A,t||{});return{...i,shape:"tileset3d",loader:qe,url:n,queryString:(r==null?void 0:r.queryString)||"",basePath:A,root:o||i.root,type:sf.TILES3D,lodMetricType:rs.GEOMETRIC_ERROR,lodMetricValue:((s=i.root)===null||s===void 0?void 0:s.geometricError)||0}}async function dm(e,t,r){const s={content:{shape:"tile3d",featureIds:null}};return await ec(e,0,t,r,s.content),s.content}function Cm(e){return Vo(e)}const Bc="https://api.cesium.com/v1/assets";async function Im(e,t){if(!t){const n=await Em(e);for(const A of n.items)A.type==="3DTILES"&&(t=A.id)}const r=await mm(e,t),{type:s,url:i}=r;return Z(s==="3DTILES"&&i),r.headers={Authorization:`Bearer ${r.accessToken}`},r}async function Em(e){Z(e);const t=Bc,r={Authorization:`Bearer ${e}`},s=await je(t,{headers:r});if(!s.ok)throw new Error(s.statusText);return await s.json()}async function mm(e,t){Z(e,t);const r={Authorization:`Bearer ${e}`},s=`${Bc}/${t}`;let i=await je(`${s}`,{headers:r});if(!i.ok)throw new Error(i.statusText);let n=await i.json();if(i=await je(`${s}/endpoint`,{headers:r}),!i.ok)throw new Error(i.statusText);const A=await i.json();return n={...n,...A},n}async function pm(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=t["cesium-ion"]||{};const{accessToken:r}=t;let s=t.assetId;if(!Number.isFinite(s)){const i=e.match(/\/([0-9]+)\/tileset.json/);s=i&&i[1]}return Im(r,s)}const fc={...qe,id:"cesium-ion",name:"Cesium Ion",preload:pm,parse:async(e,t,r)=>(t={...t},t["3d-tiles"]=t["cesium-ion"],t.loader=fc,qe.parse(e,t,r)),options:{"cesium-ion":{...qe.options["3d-tiles"],accessToken:null}}},HA=100;class ym{constructor(t,r){if(this.schema=void 0,this.options=void 0,this.shape=void 0,this.length=0,this.rows=null,this.cursor=0,this._headers=[],this.options=r,this.schema=t,!Array.isArray(t)){this._headers=[];for(const s in t)this._headers[t[s].index]=t[s].name}}rowCount(){return this.length}addArrayRow(t,r){Number.isFinite(r)&&(this.cursor=r),this.shape="array-row-table",this.rows=this.rows||new Array(HA),this.rows[this.length]=t,this.length++}addObjectRow(t,r){Number.isFinite(r)&&(this.cursor=r),this.shape="object-row-table",this.rows=this.rows||new Array(HA),this.rows[this.length]=t,this.length++}getBatch(){let t=this.rows;return t?(t=t.slice(0,this.length),this.rows=null,{shape:this.shape||"array-row-table",batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}function Qm(e,t){if(!e)throw new Error("null row");const r={};if(t)for(let s=0;s<t.length;s++)r[t[s]]=e[s];else for(let s=0;s<e.length;s++){const i=`column-${s}`;r[i]=e[s]}return r}function wm(e,t){if(!e)throw new Error("null row");if(t){const r=new Array(t.length);for(let s=0;s<t.length;s++)r[s]=e[t[s]];return r}return Object.values(e)}function bm(e){const t=[];for(let r=0;r<e.length;r++){const s=`column-${r}`;t.push(s)}return t}function Dm(e){return Object.keys(e)}const kA=100;class Rm{constructor(t,r){if(this.schema=void 0,this.options=void 0,this.length=0,this.objectRows=null,this.arrayRows=null,this.cursor=0,this._headers=null,this.options=r,this.schema=t,t){this._headers=[];for(const s in t)this._headers[t[s].index]=t[s].name}}rowCount(){return this.length}addArrayRow(t,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||(this._headers=bm(t)),this.options.shape){case"object-row-table":const s=Qm(t,this._headers);this.addObjectRow(s,r);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(kA),this.arrayRows[this.length]=t,this.length++;break}}addObjectRow(t,r){switch(Number.isFinite(r)&&(this.cursor=r),this._headers||(this._headers=Dm(t)),this.options.shape){case"array-row-table":const s=wm(t,this._headers);this.addArrayRow(s,r);break;case"object-row-table":this.objectRows=this.objectRows||new Array(kA),this.objectRows[this.length]=t,this.length++;break}}getBatch(){let t=this.arrayRows||this.objectRows;return t?(t=t.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:t,length:this.length,schema:this.schema,cursor:this.cursor}):null}}const Sm=100;class Tm{constructor(t,r){this.schema=void 0,this.length=0,this.allocated=0,this.columns={},this.schema=t,this._reallocateColumns()}rowCount(){return this.length}addArrayRow(t){this._reallocateColumns();let r=0;for(const s in this.columns)this.columns[s][this.length]=t[r++];this.length++}addObjectRow(t){this._reallocateColumns();for(const r in t)this.columns[r][this.length]=t[r];this.length++}getBatch(){this._pruneColumns();const t=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(const r in this.schema){const s=this.schema[r];t[s.name]=this.columns[s.index]}return this.columns={},{shape:"columnar-table",batchType:"data",data:t,schema:this.schema,length:this.length}}_reallocateColumns(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:Sm,this.columns={};for(const t in this.schema){const r=this.schema[t],s=r.type||Float32Array,i=this.columns[r.index];if(i&&ArrayBuffer.isView(i)){const n=new s(this.allocated);n.set(i),this.columns[r.index]=n}else i?(i.length=this.allocated,this.columns[r.index]=i):this.columns[r.index]=new s(this.allocated)}}}_pruneColumns(){for(const[t,r]of Object.entries(this.columns))this.columns[t]=r.slice(0,this.length)}}const _m={shape:void 0,batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},Mm="TableBatchBuilder";class We{constructor(t,r){this.schema=void 0,this.options=void 0,this.aggregator=null,this.batchCount=0,this.bytesUsed=0,this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),this.totalLength=0,this.totalBytes=0,this.rowBytes=0,this.schema=t,this.options={..._m,...r}}limitReached(){var t,r;return!!(!((t=this.options)===null||t===void 0)&&t.limit&&this.totalLength>=this.options.limit||!((r=this.options)===null||r===void 0)&&r._limitMB&&this.totalBytes/1e6>=this.options._limitMB)}addRow(t){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(t),this.totalBytes+=this.rowBytes,Array.isArray(t)?this.addArrayRow(t):this.addObjectRow(t))}addArrayRow(t){if(!this.aggregator){const r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addArrayRow(t)}addObjectRow(t){if(!this.aggregator){const r=this._getTableBatchType();this.aggregator=new r(this.schema,this.options)}this.aggregator.addObjectRow(t)}chunkComplete(t){t instanceof ArrayBuffer&&(this.bytesUsed+=t.byteLength),typeof t=="string"&&(this.bytesUsed+=t.length),this.isChunkComplete=!0}getFullBatch(t){return this._isFull()?this._getBatch(t):null}getFinalBatch(t){return this._getBatch(t)}_estimateRowMB(t){return Array.isArray(t)?t.length*8:Object.keys(t).length*8}_isFull(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}_getBatch(t){if(!this.aggregator)return null;t!=null&&t.bytesUsed&&(this.bytesUsed=t.bytesUsed);const r=this.aggregator.getBatch();return r.count=this.batchCount,r.bytesUsed=this.bytesUsed,Object.assign(r,t),this.batchCount++,this.aggregator=null,r}_getTableBatchType(){switch(this.options.shape){case"array-row-table":case"object-row-table":return Rm;case"columnar-table":return Tm;case"arrow-table":if(!We.ArrowBatch)throw new Error(Mm);return We.ArrowBatch;default:return ym}}}We.ArrowBatch=void 0;function Fm(e){try{let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return async function*(){const r=new TextDecoder(void 0,t);for await(const s of e)yield typeof s=="string"?s:r.decode(s,{stream:!0})}()}catch(t){return Promise.reject(t)}}const pi=Number.MAX_SAFE_INTEGER;var S=function(e){return e[e.BEGIN=0]="BEGIN",e[e.VALUE=1]="VALUE",e[e.OPEN_OBJECT=2]="OPEN_OBJECT",e[e.CLOSE_OBJECT=3]="CLOSE_OBJECT",e[e.OPEN_ARRAY=4]="OPEN_ARRAY",e[e.CLOSE_ARRAY=5]="CLOSE_ARRAY",e[e.TEXT_ESCAPE=6]="TEXT_ESCAPE",e[e.STRING=7]="STRING",e[e.BACKSLASH=8]="BACKSLASH",e[e.END=9]="END",e[e.OPEN_KEY=10]="OPEN_KEY",e[e.CLOSE_KEY=11]="CLOSE_KEY",e[e.TRUE=12]="TRUE",e[e.TRUE2=13]="TRUE2",e[e.TRUE3=14]="TRUE3",e[e.FALSE=15]="FALSE",e[e.FALSE2=16]="FALSE2",e[e.FALSE3=17]="FALSE3",e[e.FALSE4=18]="FALSE4",e[e.NULL=19]="NULL",e[e.NULL2=20]="NULL2",e[e.NULL3=21]="NULL3",e[e.NUMBER_DECIMAL_POINT=22]="NUMBER_DECIMAL_POINT",e[e.NUMBER_DIGIT=23]="NUMBER_DIGIT",e}(S||{});const M={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125},qA=/[\\"\n]/g,KA={onready:()=>{},onopenobject:()=>{},onkey:()=>{},oncloseobject:()=>{},onopenarray:()=>{},onclosearray:()=>{},onvalue:()=>{},onerror:()=>{},onend:()=>{},onchunkparsed:()=>{}};class Gm{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.options=KA,this.bufferCheckPosition=pi,this.q="",this.c="",this.p="",this.closed=!1,this.closedRoot=!1,this.sawRoot=!1,this.error=null,this.state=S.BEGIN,this.stack=[],this.position=0,this.column=0,this.line=1,this.slashed=!1,this.unicodeI=0,this.unicodeS=null,this.depth=0,this.textNode=void 0,this.numberNode=void 0,this.options={...KA,...t},this.textNode=void 0,this.numberNode="",this.emit("onready")}end(){return(this.state!==S.VALUE||this.depth!==0)&&this._error("Unexpected end"),this._closeValue(),this.c="",this.closed=!0,this.emit("onend"),this}resume(){return this.error=null,this}close(){return this.write(null)}emit(t,r){var s,i;(s=(i=this.options)[t])===null||s===void 0||s.call(i,r,this)}emitNode(t,r){this._closeValue(),this.emit(t,r)}write(t){if(this.error)throw this.error;if(this.closed)return this._error("Cannot write after close. Assign an onready handler.");if(t===null)return this.end();let r=0,s=t.charCodeAt(0),i=this.p;for(;s&&(i=s,this.c=s=t.charCodeAt(r++),i!==s?this.p=i:i=this.p,!!s);)switch(this.position++,s===M.lineFeed?(this.line++,this.column=0):this.column++,this.state){case S.BEGIN:s===M.openBrace?this.state=S.OPEN_OBJECT:s===M.openBracket?this.state=S.OPEN_ARRAY:ve(s)||this._error("Non-whitespace before {[.");continue;case S.OPEN_KEY:case S.OPEN_OBJECT:if(ve(s))continue;if(this.state===S.OPEN_KEY)this.stack.push(S.CLOSE_KEY);else if(s===M.closeBrace){this.emit("onopenobject"),this.depth++,this.emit("oncloseobject"),this.depth--,this.state=this.stack.pop()||S.VALUE;continue}else this.stack.push(S.CLOSE_OBJECT);s===M.doubleQuote?this.state=S.STRING:this._error('Malformed object key should start with "');continue;case S.CLOSE_KEY:case S.CLOSE_OBJECT:if(ve(s))continue;s===M.colon?(this.state===S.CLOSE_OBJECT?(this.stack.push(S.CLOSE_OBJECT),this._closeValue("onopenobject"),this.depth++):this._closeValue("onkey"),this.state=S.VALUE):s===M.closeBrace?(this.emitNode("oncloseobject"),this.depth--,this.state=this.stack.pop()||S.VALUE):s===M.comma?(this.state===S.CLOSE_OBJECT&&this.stack.push(S.CLOSE_OBJECT),this._closeValue(),this.state=S.OPEN_KEY):this._error("Bad object");continue;case S.OPEN_ARRAY:case S.VALUE:if(ve(s))continue;if(this.state===S.OPEN_ARRAY)if(this.emit("onopenarray"),this.depth++,this.state=S.VALUE,s===M.closeBracket){this.emit("onclosearray"),this.depth--,this.state=this.stack.pop()||S.VALUE;continue}else this.stack.push(S.CLOSE_ARRAY);s===M.doubleQuote?this.state=S.STRING:s===M.openBrace?this.state=S.OPEN_OBJECT:s===M.openBracket?this.state=S.OPEN_ARRAY:s===M.t?this.state=S.TRUE:s===M.f?this.state=S.FALSE:s===M.n?this.state=S.NULL:s===M.minus?this.numberNode+="-":M._0<=s&&s<=M._9?(this.numberNode+=String.fromCharCode(s),this.state=S.NUMBER_DIGIT):this._error("Bad value");continue;case S.CLOSE_ARRAY:if(s===M.comma)this.stack.push(S.CLOSE_ARRAY),this._closeValue("onvalue"),this.state=S.VALUE;else if(s===M.closeBracket)this.emitNode("onclosearray"),this.depth--,this.state=this.stack.pop()||S.VALUE;else{if(ve(s))continue;this._error("Bad array")}continue;case S.STRING:this.textNode===void 0&&(this.textNode="");let n=r-1,A=this.slashed,o=this.unicodeI;t:for(;;){for(;o>0;)if(this.unicodeS+=String.fromCharCode(s),s=t.charCodeAt(r++),this.position++,o===4?(this.textNode+=String.fromCharCode(parseInt(this.unicodeS,16)),o=0,n=r-1):o++,!s)break t;if(s===M.doubleQuote&&!A){this.state=this.stack.pop()||S.VALUE,this.textNode+=t.substring(n,r-1),this.position+=r-1-n;break}if(s===M.backslash&&!A&&(A=!0,this.textNode+=t.substring(n,r-1),this.position+=r-1-n,s=t.charCodeAt(r++),this.position++,!s))break;if(A){if(A=!1,s===M.n?this.textNode+=`
`:s===M.r?this.textNode+="\r":s===M.t?this.textNode+="	":s===M.f?this.textNode+="\f":s===M.b?this.textNode+="\b":s===M.u?(o=1,this.unicodeS=""):this.textNode+=String.fromCharCode(s),s=t.charCodeAt(r++),this.position++,n=r-1,s)continue;break}qA.lastIndex=r;const a=qA.exec(t);if(a===null){r=t.length+1,this.textNode+=t.substring(n,r-1),this.position+=r-1-n;break}if(r=a.index+1,s=t.charCodeAt(a.index),!s){this.textNode+=t.substring(n,r-1),this.position+=r-1-n;break}}this.slashed=A,this.unicodeI=o;continue;case S.TRUE:s===M.r?this.state=S.TRUE2:this._error(`Invalid true started with t${s}`);continue;case S.TRUE2:s===M.u?this.state=S.TRUE3:this._error(`Invalid true started with tr${s}`);continue;case S.TRUE3:s===M.e?(this.emit("onvalue",!0),this.state=this.stack.pop()||S.VALUE):this._error(`Invalid true started with tru${s}`);continue;case S.FALSE:s===M.a?this.state=S.FALSE2:this._error(`Invalid false started with f${s}`);continue;case S.FALSE2:s===M.l?this.state=S.FALSE3:this._error(`Invalid false started with fa${s}`);continue;case S.FALSE3:s===M.s?this.state=S.FALSE4:this._error(`Invalid false started with fal${s}`);continue;case S.FALSE4:s===M.e?(this.emit("onvalue",!1),this.state=this.stack.pop()||S.VALUE):this._error(`Invalid false started with fals${s}`);continue;case S.NULL:s===M.u?this.state=S.NULL2:this._error(`Invalid null started with n${s}`);continue;case S.NULL2:s===M.l?this.state=S.NULL3:this._error(`Invalid null started with nu${s}`);continue;case S.NULL3:s===M.l?(this.emit("onvalue",null),this.state=this.stack.pop()||S.VALUE):this._error(`Invalid null started with nul${s}`);continue;case S.NUMBER_DECIMAL_POINT:s===M.period?(this.numberNode+=".",this.state=S.NUMBER_DIGIT):this._error("Leading zero not followed by .");continue;case S.NUMBER_DIGIT:M._0<=s&&s<=M._9?this.numberNode+=String.fromCharCode(s):s===M.period?(this.numberNode.indexOf(".")!==-1&&this._error("Invalid number has two dots"),this.numberNode+="."):s===M.e||s===M.E?((this.numberNode.indexOf("e")!==-1||this.numberNode.indexOf("E")!==-1)&&this._error("Invalid number has two exponential"),this.numberNode+="e"):s===M.plus||s===M.minus?(i===M.e||i===M.E||this._error("Invalid symbol in number"),this.numberNode+=String.fromCharCode(s)):(this._closeNumber(),r--,this.state=this.stack.pop()||S.VALUE);continue;default:this._error(`Unknown state: ${this.state}`)}return this.position>=this.bufferCheckPosition&&vm(this),this.emit("onchunkparsed"),this}_closeValue(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"onvalue";this.textNode!==void 0&&this.emit(t,this.textNode),this.textNode=void 0}_closeNumber(){this.numberNode&&this.emit("onvalue",parseFloat(this.numberNode)),this.numberNode=""}_error(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this._closeValue(),t+=`
Line: ${this.line}
Column: ${this.column}
Char: ${this.c}`;const r=new Error(t);this.error=r,this.emit("onerror",r)}}function ve(e){return e===M.carriageReturn||e===M.lineFeed||e===M.space||e===M.tab}function vm(e){const t=Math.max(pi,10);let r=0;for(const s of["textNode","numberNode"]){const i=e[s]===void 0?0:e[s].length;if(i>t)switch(s){case"text":break;default:e._error(`Max buffer length exceeded: ${s}`)}r=Math.max(r,i)}e.bufferCheckPosition=pi-r+e.position}class ae{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.path=void 0,this.path=["$"],t instanceof ae){this.path=[...t.path];return}if(Array.isArray(t)){this.path.push(...t);return}if(typeof t=="string"&&(this.path=t.split("."),this.path[0]!=="$"))throw new Error("JSONPaths must start with $")}clone(){return new ae(this)}toString(){return this.path.join(".")}push(t){this.path.push(t)}pop(){return this.path.pop()}set(t){this.path[this.path.length-1]=t}equals(t){if(!this||!t||this.path.length!==t.path.length)return!1;for(let r=0;r<this.path.length;++r)if(this.path[r]!==t.path[r])return!1;return!0}setFieldAtPath(t,r){const s=[...this.path];s.shift();const i=s.pop();for(const n of s)t=t[n];t[i]=r}getFieldAtPath(t){const r=[...this.path];r.shift();const s=r.pop();for(const i of r)t=t[i];return t[s]}}class Lm{constructor(t){this.parser=void 0,this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new ae,this.reset(),this.parser=new Gm({onready:()=>{this.jsonpath=new ae,this.previousStates.length=0,this.currentState.container.length=0},onopenobject:r=>{this._openObject({}),typeof r<"u"&&this.parser.emit("onkey",r)},onkey:r=>{this.jsonpath.set(r),this.currentState.key=r},oncloseobject:()=>{this._closeObject()},onopenarray:()=>{this._openArray()},onclosearray:()=>{this._closeArray()},onvalue:r=>{this._pushOrSet(r)},onerror:r=>{throw r},onend:()=>{this.result=this.currentState.container.pop()},...t})}reset(){this.result=void 0,this.previousStates=[],this.currentState=Object.freeze({container:[],key:null}),this.jsonpath=new ae}write(t){this.parser.write(t)}close(){this.parser.close()}_pushOrSet(t){const{container:r,key:s}=this.currentState;s!==null?(r[s]=t,this.currentState.key=null):r.push(t)}_openArray(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!0,key:null}}_closeArray(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}_openObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.jsonpath.push(null),this._pushOrSet(t),this.previousStates.push(this.currentState),this.currentState={container:t,isArray:!1,key:null}}_closeObject(){this.jsonpath.pop(),this.currentState=this.previousStates.pop()}}class xm extends Lm{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super({onopenarray:()=>{if(!this.streamingArray&&this._matchJSONPath()){this.streamingJsonPath=this.getJsonPath().clone(),this.streamingArray=[],this._openArray(this.streamingArray);return}this._openArray()},onopenobject:s=>{this.topLevelObject?this._openObject({}):(this.topLevelObject={},this._openObject(this.topLevelObject)),typeof s<"u"&&this.parser.emit("onkey",s)}}),this.jsonPaths=void 0,this.streamingJsonPath=null,this.streamingArray=null,this.topLevelObject=null;const r=t.jsonpaths||[];this.jsonPaths=r.map(s=>new ae(s))}write(t){super.write(t);let r=[];return this.streamingArray&&(r=[...this.streamingArray],this.streamingArray.length=0),r}getPartialResult(){return this.topLevelObject}getStreamingJsonPath(){return this.streamingJsonPath}getStreamingJsonPathAsString(){return this.streamingJsonPath&&this.streamingJsonPath.toString()}getJsonPath(){return this.jsonpath}_matchJSONPath(){const t=this.getJsonPath();if(this.jsonPaths.length===0)return!0;for(const r of this.jsonPaths)if(r.equals(t))return!0;return!1}}async function*Om(e,t){const r=Fm(e),{metadata:s}=t,{jsonpaths:i}=t.json||{};let n=!0;const A=null,o=new We(A,t),a=new xm({jsonpaths:i});for await(const g of r){const l=a.write(g),B=l.length>0&&a.getStreamingJsonPathAsString();if(l.length>0&&n){if(s){var c;yield{shape:(t==null||(c=t.json)===null||c===void 0?void 0:c.shape)||"array-row-table",batchType:"partial-result",data:[],length:0,bytesUsed:0,container:a.getPartialResult(),jsonpath:B}}n=!1}for(const C of l){o.addRow(C);const m=o.getFullBatch({jsonpath:B});m&&(yield m)}o.chunkComplete(g);const f=o.getFullBatch({jsonpath:B});f&&(yield f)}const h=a.getStreamingJsonPathAsString(),u=o.getFinalBatch({jsonpath:h});u&&(yield u),s&&(yield{shape:"json",batchType:"final-result",container:a.getPartialResult(),jsonpath:a.getStreamingJsonPathAsString(),data:[],length:0})}const Vr={x:0,y:1,z:2};function dc(e,t={}){const{start:r=0,end:s=e.length,plane:i="xy"}=t,n=t.size||2;let A=0;const o=Vr[i[0]],a=Vr[i[1]];for(let c=r,h=s-n;c<s;c+=n)A+=(e[c+o]-e[h+o])*(e[c+a]+e[h+a]),h=c;return A/2}function Um(e,t,r=2,s,i="xy"){const n=t&&t.length,A=n?t[0]*r:e.length;let o=Cc(e,0,A,r,!0,s&&s[0],i);const a=[];if(!o||o.next===o.prev)return a;let c,h,u,g,l,B,f;if(n&&(o=km(e,t,o,r,s,i)),e.length>80*r){g=h=e[0],l=u=e[1];for(let C=r;C<A;C+=r)B=e[C],f=e[C+1],B<g&&(g=B),f<l&&(l=f),B>h&&(h=B),f>u&&(u=f);c=Math.max(h-g,u-l),c=c!==0?32767/c:0}return Xe(o,a,r,g,l,c,0),a}function Cc(e,t,r,s,i,n,A){let o,a;n===void 0&&(n=dc(e,{start:t,end:r,size:s,plane:A}));let c=Vr[A[0]],h=Vr[A[1]];if(i===n<0)for(o=t;o<r;o+=s)a=jA(o,e[o+c],e[o+h],a);else for(o=r-s;o>=t;o-=s)a=jA(o,e[o+c],e[o+h],a);return a&&As(a,a.next)&&(Ze(a),a=a.next),a}function he(e,t){if(!e)return e;t||(t=e);let r=e,s;do if(s=!1,!r.steiner&&(As(r,r.next)||$(r.prev,r,r.next)===0)){if(Ze(r),r=t=r.prev,r===r.next)break;s=!0}else r=r.next;while(s||r!==t);return t}function Xe(e,t,r,s,i,n,A){if(!e)return;!A&&n&&Ym(e,s,i,n);let o=e,a,c;for(;e.prev!==e.next;){if(a=e.prev,c=e.next,n?Pm(e,s,i,n):Nm(e)){t.push(a.i/r|0),t.push(e.i/r|0),t.push(c.i/r|0),Ze(e),e=c.next,o=c.next;continue}if(e=c,e===o){A?A===1?(e=Jm(he(e),t,r),Xe(e,t,r,s,i,n,2)):A===2&&Hm(e,t,r,s,i,n):Xe(he(e),t,r,s,i,n,1);break}}}function Nm(e){const t=e.prev,r=e,s=e.next;if($(t,r,s)>=0)return!1;const i=t.x,n=r.x,A=s.x,o=t.y,a=r.y,c=s.y,h=i<n?i<A?i:A:n<A?n:A,u=o<a?o<c?o:c:a<c?a:c,g=i>n?i>A?i:A:n>A?n:A,l=o>a?o>c?o:c:a>c?a:c;let B=s.next;for(;B!==t;){if(B.x>=h&&B.x<=g&&B.y>=u&&B.y<=l&&ye(i,o,n,a,A,c,B.x,B.y)&&$(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function Pm(e,t,r,s){const i=e.prev,n=e,A=e.next;if($(i,n,A)>=0)return!1;const o=i.x,a=n.x,c=A.x,h=i.y,u=n.y,g=A.y,l=o<a?o<c?o:c:a<c?a:c,B=h<u?h<g?h:g:u<g?u:g,f=o>a?o>c?o:c:a>c?a:c,C=h>u?h>g?h:g:u>g?u:g,m=yi(l,B,t,r,s),Q=yi(f,C,t,r,s);let I=e.prevZ,p=e.nextZ;for(;I&&I.z>=m&&p&&p.z<=Q;){if(I.x>=l&&I.x<=f&&I.y>=B&&I.y<=C&&I!==i&&I!==A&&ye(o,h,a,u,c,g,I.x,I.y)&&$(I.prev,I,I.next)>=0||(I=I.prevZ,p.x>=l&&p.x<=f&&p.y>=B&&p.y<=C&&p!==i&&p!==A&&ye(o,h,a,u,c,g,p.x,p.y)&&$(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;I&&I.z>=m;){if(I.x>=l&&I.x<=f&&I.y>=B&&I.y<=C&&I!==i&&I!==A&&ye(o,h,a,u,c,g,I.x,I.y)&&$(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;p&&p.z<=Q;){if(p.x>=l&&p.x<=f&&p.y>=B&&p.y<=C&&p!==i&&p!==A&&ye(o,h,a,u,c,g,p.x,p.y)&&$(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Jm(e,t,r){let s=e;do{const i=s.prev,n=s.next.next;!As(i,n)&&Ic(i,s,s.next,n)&&ze(i,n)&&ze(n,i)&&(t.push(i.i/r|0),t.push(s.i/r|0),t.push(n.i/r|0),Ze(s),Ze(s.next),s=e=n),s=s.next}while(s!==e);return he(s)}function Hm(e,t,r,s,i,n){let A=e;do{let o=A.next.next;for(;o!==A.prev;){if(A.i!==o.i&&zm(A,o)){let a=Ec(A,o);A=he(A,A.next),a=he(a,a.next),Xe(A,t,r,s,i,n,0),Xe(a,t,r,s,i,n,0);return}o=o.next}A=A.next}while(A!==e)}function km(e,t,r,s,i,n){const A=[];let o,a,c,h,u;for(o=0,a=t.length;o<a;o++)c=t[o]*s,h=o<a-1?t[o+1]*s:e.length,u=Cc(e,c,h,s,!1,i&&i[o+1],n),u===u.next&&(u.steiner=!0),A.push(Xm(u));for(A.sort(qm),o=0;o<A.length;o++)r=Km(A[o],r);return r}function qm(e,t){return e.x-t.x}function Km(e,t){const r=jm(e,t);if(!r)return t;const s=Ec(r,e);return he(s,s.next),he(r,r.next)}function jm(e,t){let r=t;const s=e.x,i=e.y;let n=-1/0,A;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){const g=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(g<=s&&g>n&&(n=g,A=r.x<r.next.x?r:r.next,g===s))return A}r=r.next}while(r!==t);if(!A)return null;const o=A,a=A.x,c=A.y;let h=1/0,u;r=A;do s>=r.x&&r.x>=a&&s!==r.x&&ye(i<c?s:n,i,a,c,i<c?n:s,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(s-r.x),ze(r,e)&&(u<h||u===h&&(r.x>A.x||r.x===A.x&&Vm(A,r)))&&(A=r,h=u)),r=r.next;while(r!==o);return A}function Vm(e,t){return $(e.prev,e,t.prev)<0&&$(t.next,e,e.next)<0}function Ym(e,t,r,s){let i=e;do i.z===0&&(i.z=yi(i.x,i.y,t,r,s)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Wm(i)}function Wm(e){let t,r,s=1,i,n,A,o,a,c;do{for(n=e,e=null,c=null,i=0;n;){for(i++,o=n,A=0,r=0;r<s&&(A++,o=o.nextZ,!!o);r++);for(a=s;A>0||a>0&&o;)A!==0&&(a===0||!o||n.z<=o.z)?(t=n,n=n.nextZ,A--):(t=o,o=o.nextZ,a--),c?c.nextZ=t:e=t,t.prevZ=c,c=t;n=o}c.nextZ=null,s*=2}while(i>1);return e}function yi(e,t,r,s,i){return e=(e-r)*i|0,t=(t-s)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Xm(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function ye(e,t,r,s,i,n,A,o){return(i-A)*(t-o)>=(e-A)*(n-o)&&(e-A)*(s-o)>=(r-A)*(t-o)&&(r-A)*(n-o)>=(i-A)*(s-o)}function zm(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Zm(e,t)&&(ze(e,t)&&ze(t,e)&&$m(e,t)&&($(e.prev,e,t.prev)||$(e,t.prev,t))||As(e,t)&&$(e.prev,e,e.next)>0&&$(t.prev,t,t.next)>0)}function $(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function As(e,t){return e.x===t.x&&e.y===t.y}function Ic(e,t,r,s){const i=Dr($(e,t,r)),n=Dr($(e,t,s)),A=Dr($(r,s,e)),o=Dr($(r,s,t));return!!(i!==n&&A!==o||i===0&&br(e,r,t)||n===0&&br(e,s,t)||A===0&&br(r,e,s)||o===0&&br(r,t,s))}function br(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Dr(e){return e>0?1:e<0?-1:0}function Zm(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Ic(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function ze(e,t){return $(e.prev,e,e.next)<0?$(e,t,e.next)>=0&&$(e,e.prev,t)>=0:$(e,t,e.prev)<0||$(e,e.next,t)<0}function $m(e,t){let r=e,s=!1;const i=(e.x+t.x)/2,n=(e.y+t.y)/2;do r.y>n!=r.next.y>n&&r.next.y!==r.y&&i<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(s=!s),r=r.next;while(r!==e);return s}function Ec(e,t){const r=new Qi(e.i,e.x,e.y),s=new Qi(t.i,t.x,t.y),i=e.next,n=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,s.next=r,r.prev=s,n.next=s,s.prev=n,s}function jA(e,t,r,s){const i=new Qi(e,t,r);return s?(i.next=s.next,i.prev=s,s.next.prev=i,s.next=i):(i.prev=i,i.next=i),i}function Ze(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}class Qi{constructor(t,r,s){this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1,this.i=t,this.x=r,this.y=s}}function t0(e,t,r){const s=e0(e),i=Object.keys(s).filter(n=>s[n]!==Array);return r0(e,{propArrayTypes:s,...t},{numericPropKeys:r&&r.numericPropKeys||i,PositionDataType:r?r.PositionDataType:Float32Array,triangulate:r?r.triangulate:!0})}function e0(e){const t={};for(const r of e)if(r.properties)for(const s in r.properties){const i=r.properties[s];t[s]=a0(i,t[s])}return t}function r0(e,t,r){const{pointPositionsCount:s,pointFeaturesCount:i,linePositionsCount:n,linePathsCount:A,lineFeaturesCount:o,polygonPositionsCount:a,polygonObjectsCount:c,polygonRingsCount:h,polygonFeaturesCount:u,propArrayTypes:g,coordLength:l}=t,{numericPropKeys:B=[],PositionDataType:f=Float32Array,triangulate:C=!0}=r,m=e[0]&&"id"in e[0],Q=e.length>65535?Uint32Array:Uint16Array,I={type:"Point",positions:new f(s*l),globalFeatureIds:new Q(s),featureIds:i>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},p={type:"LineString",pathIndices:n>65535?new Uint32Array(A+1):new Uint16Array(A+1),positions:new f(n*l),globalFeatureIds:new Q(n),featureIds:o>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},R={type:"Polygon",polygonIndices:a>65535?new Uint32Array(c+1):new Uint16Array(c+1),primitivePolygonIndices:a>65535?new Uint32Array(h+1):new Uint16Array(h+1),positions:new f(a*l),globalFeatureIds:new Q(a),featureIds:u>65535?new Uint32Array(a):new Uint16Array(a),numericProps:{},properties:[],fields:[]};C&&(R.triangles=[]);for(const _ of[I,p,R])for(const G of B){const T=g[G];_.numericProps[G]=new T(_.positions.length/l)}p.pathIndices[A]=n,R.polygonIndices[c]=a,R.primitivePolygonIndices[h]=a;const y={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const _ of e){const G=_.geometry,T=_.properties||{};switch(G.type){case"Point":s0(G,I,y,l,T),I.properties.push(js(T,B)),m&&I.fields.push({id:_.id}),y.pointFeature++;break;case"LineString":i0(G,p,y,l,T),p.properties.push(js(T,B)),m&&p.fields.push({id:_.id}),y.lineFeature++;break;case"Polygon":n0(G,R,y,l,T),R.properties.push(js(T,B)),m&&R.fields.push({id:_.id}),y.polygonFeature++;break;default:throw new Error("Invalid geometry type")}y.feature++}return o0(I,p,R,l)}function s0(e,t,r,s,i){t.positions.set(e.data,r.pointPosition*s);const n=e.data.length/s;an(t,i,r.pointPosition,n),t.globalFeatureIds.fill(r.feature,r.pointPosition,r.pointPosition+n),t.featureIds.fill(r.pointFeature,r.pointPosition,r.pointPosition+n),r.pointPosition+=n}function i0(e,t,r,s,i){t.positions.set(e.data,r.linePosition*s);const n=e.data.length/s;an(t,i,r.linePosition,n),t.globalFeatureIds.fill(r.feature,r.linePosition,r.linePosition+n),t.featureIds.fill(r.lineFeature,r.linePosition,r.linePosition+n);for(let A=0,o=e.indices.length;A<o;++A){const a=e.indices[A],c=A===o-1?e.data.length:e.indices[A+1];t.pathIndices[r.linePath++]=r.linePosition,r.linePosition+=(c-a)/s}}function n0(e,t,r,s,i){t.positions.set(e.data,r.polygonPosition*s);const n=e.data.length/s;an(t,i,r.polygonPosition,n),t.globalFeatureIds.fill(r.feature,r.polygonPosition,r.polygonPosition+n),t.featureIds.fill(r.polygonFeature,r.polygonPosition,r.polygonPosition+n);for(let A=0,o=e.indices.length;A<o;++A){const a=r.polygonPosition;t.polygonIndices[r.polygonObject++]=a;const c=e.areas[A],h=e.indices[A],u=e.indices[A+1];for(let l=0,B=h.length;l<B;++l){const f=h[l],C=l===B-1?u===void 0?e.data.length:u[0]:h[l+1];t.primitivePolygonIndices[r.polygonRing++]=r.polygonPosition,r.polygonPosition+=(C-f)/s}const g=r.polygonPosition;A0(t,c,h,{startPosition:a,endPosition:g,coordLength:s})}}function A0(e,t,r,s){let{startPosition:i,endPosition:n,coordLength:A}=s;if(!e.triangles)return;const o=i*A,a=n*A,c=e.positions.subarray(o,a),h=r[0],u=r.slice(1).map(l=>(l-h)/A),g=Um(c,u,A,t);for(let l=0,B=g.length;l<B;++l)e.triangles.push(i+g[l])}function Ks(e,t){const r={};for(const s in e)r[s]={value:e[s],size:t};return r}function o0(e,t,r,s){const i={shape:"binary-feature-collection",points:{...e,positions:{value:e.positions,size:s},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:Ks(e.numericProps,1)},lines:{...t,positions:{value:t.positions,size:s},pathIndices:{value:t.pathIndices,size:1},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:Ks(t.numericProps,1)},polygons:{...r,positions:{value:r.positions,size:s},polygonIndices:{value:r.polygonIndices,size:1},primitivePolygonIndices:{value:r.primitivePolygonIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:Ks(r.numericProps,1)}};return i.polygons&&r.triangles&&(i.polygons.triangles={value:new Uint32Array(r.triangles),size:1}),i}function an(e,t,r,s){for(const i in e.numericProps)if(i in t){const n=t[i];e.numericProps[i].fill(n,r,r+s)}}function js(e,t){const r={};for(const s in e)t.includes(s)||(r[s]=e[s]);return r}function a0(e,t){return t===Array||!Number.isFinite(e)?Array:t===Float64Array||Math.fround(e)!==e?Float64Array:Float32Array}function c0(e){let t=0,r=0,s=0,i=0,n=0,A=0,o=0,a=0,c=0;const h=new Set;for(const u of e){const g=u.geometry;switch(g.type){case"Point":r++,t++,h.add(g.coordinates.length);break;case"MultiPoint":r++,t+=g.coordinates.length;for(const B of g.coordinates)h.add(B.length);break;case"LineString":n++,s+=g.coordinates.length,i++;for(const B of g.coordinates)h.add(B.length);break;case"MultiLineString":n++;for(const B of g.coordinates){s+=B.length,i++;for(const f of B)h.add(f.length)}break;case"Polygon":c++,o++,a+=g.coordinates.length;const l=g.coordinates.flat();A+=l.length;for(const B of l)h.add(B.length);break;case"MultiPolygon":c++;for(const B of g.coordinates){o++,a+=B.length;const f=B.flat();A+=f.length;for(const C of f)h.add(C.length)}break;default:throw new Error(`Unsupported geometry type: ${g.type}`)}}return{coordLength:h.size>0?Math.max(...h):2,pointPositionsCount:t,pointFeaturesCount:r,linePositionsCount:s,linePathsCount:i,lineFeaturesCount:n,polygonPositionsCount:A,polygonObjectsCount:o,polygonRingsCount:a,polygonFeaturesCount:c}}function h0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{coordLength:2,fixRingWinding:!0};return e.map(r=>u0(r,t))}function VA(e,t,r,s){r.push(t.length),t.push(...e);for(let i=e.length;i<s.coordLength;i++)t.push(0)}function wi(e,t,r,s){r.push(t.length);for(const i of e){t.push(...i);for(let n=i.length;n<s.coordLength;n++)t.push(0)}}function YA(e,t,r,s,i){let n=0;const A=[],o=[];for(const a of e){const c=a.map(g=>g.slice(0,2));let h=dc(c.flat());const u=h<0;i.fixRingWinding&&(n===0&&!u||n>0&&u)&&(a.reverse(),h=-h),A.push(h),wi(a,t,o,i),n++}n>0&&(s.push(A),r.push(o))}function u0(e,t){const{geometry:r}=e;if(r.type==="GeometryCollection")throw new Error("GeometryCollection type not supported");const s=[],i=[];let n,A;switch(r.type){case"Point":A="Point",VA(r.coordinates,s,i,t);break;case"MultiPoint":A="Point",r.coordinates.map(o=>VA(o,s,i,t));break;case"LineString":A="LineString",wi(r.coordinates,s,i,t);break;case"MultiLineString":A="LineString",r.coordinates.map(o=>wi(o,s,i,t));break;case"Polygon":A="Polygon",n=[],YA(r.coordinates,s,i,n,t);break;case"MultiPolygon":A="Polygon",n=[],r.coordinates.map(o=>YA(o,s,i,n,t));break;default:throw new Error(`Unknown type: ${A}`)}return{...e,geometry:{type:A,indices:i,data:s,areas:n}}}function mc(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fixRingWinding:!0,triangulate:!0};const r=c0(e),s=r.coordLength,{fixRingWinding:i}=t,n=h0(e,{coordLength:s,fixRingWinding:i});return t0(n,r,{numericPropKeys:t.numericPropKeys,PositionDataType:t.PositionDataType||Float32Array,triangulate:t.triangulate})}const l0="4.1.4",g0={name:"GeoJSON",id:"geojson",module:"geojson",version:l0,worker:!0,extensions:["geojson"],mimeTypes:["application/geo+json"],category:"geometry",text:!0,options:{geojson:{shape:"object-row-table"},json:{shape:"object-row-table",jsonpaths:["$","$.features"]},gis:{format:"geojson"}}},$e={...g0,parse:B0,parseTextSync:pc,parseInBatches:f0};async function B0(e,t){return pc(new TextDecoder().decode(e),t)}function pc(e,t){var r;t={...$e.options,...t},t.geojson={...$e.options.geojson,...t.geojson},t.gis=t.gis||{};let s;try{s=JSON.parse(e)}catch{s={}}const i={shape:"geojson-table",type:"FeatureCollection",features:((r=s)===null||r===void 0?void 0:r.features)||[]};switch(t.gis.format){case"binary":return mc(i.features);default:return i}}function f0(e,t){t={...$e.options,...t},t.json={...$e.options.geojson,...t.geojson};const r=Om(e,t);switch(t.gis.format){case"binary":return d0(r);default:return r}}async function*d0(e){for await(const t of e)t.data=mc(t.data),yield t}function Ae(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const C0="Queued Requests",I0="Active Requests",E0="Cancelled Requests",m0="Queued Requests Ever",p0="Active Requests Ever",y0={id:"request-scheduler",throttleRequests:!0,maxRequests:6,debounceTime:0};class Q0{constructor(t={}){E(this,"props"),E(this,"stats"),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"updateTimer",null),this.props={...y0,...t},this.stats=new qo({id:this.props.id}),this.stats.get(C0),this.stats.get(I0),this.stats.get(E0),this.stats.get(m0),this.stats.get(p0)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const s={handle:t,priority:0,getPriority:r},i=new Promise(n=>(s.resolve=n,s));return this.requestQueue.push(s),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:s}=t;let i=!1;const n=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,s?s({done:n}):Promise.resolve({done:n})}_issueNewRequests(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=setTimeout(()=>this._issueNewRequestsAsync(),this.props.debounceTime)}_issueNewRequestsAsync(){this.updateTimer!==null&&clearTimeout(this.updateTimer),this.updateTimer=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const s=this.requestQueue.shift();s&&this._issueRequest(s)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const s=t[r];this._updateRequest(s)||(t.splice(r,1),this.requestMap.delete(s.handle),r--)}t.sort((r,s)=>r.priority-s.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}function w0(e){const t=e?e.lastIndexOf("/"):-1;return t>=0?e.substr(0,t):""}class b0{constructor(t,r,s){E(this,"item"),E(this,"previous"),E(this,"next"),this.item=t,this.previous=r,this.next=s}}class D0{constructor(){E(this,"head",null),E(this,"tail",null),E(this,"_length",0)}get length(){return this._length}add(t){const r=new b0(t,this.tail,null);return this.tail?(this.tail.next=r,this.tail=r):(this.head=r,this.tail=r),++this._length,r}remove(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)}splice(t,r){t!==r&&(this.remove(r),this._insert(t,r))}_insert(t,r){const s=t.next;t.next=r,this.tail===t?this.tail=r:s.previous=r,r.next=s,r.previous=t,++this._length}}class R0{constructor(){E(this,"_list"),E(this,"_sentinel"),E(this,"_trimTiles"),this._list=new D0,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}reset(){this._list.splice(this._list.tail,this._sentinel)}touch(t){const r=t._cacheNode;r&&this._list.splice(this._sentinel,r)}add(t,r,s){r._cacheNode||(r._cacheNode=this._list.add(r),s&&s(t,r))}unloadTile(t,r,s){const i=r._cacheNode;i&&(this._list.remove(i),r._cacheNode=null,s&&s(t,r))}unloadTiles(t,r){const s=this._trimTiles;this._trimTiles=!1;const i=this._list,n=t.maximumMemoryUsage*1024*1024,A=this._sentinel;let o=i.head;for(;o!==A&&(t.gpuMemoryUsageInBytes>n||s);){const a=o.item;o=o.next,this.unloadTile(t,a,r)}}trim(){this._trimTiles=!0}}function S0(e,t){Ae(e),Ae(t);const{rtcCenter:r,gltfUpAxis:s}=t,{computedTransform:i,boundingVolume:{center:n}}=e;let A=new q(i);switch(r&&A.translate(r),s){case"Z":break;case"Y":const h=new q().rotateX(Math.PI/2);A=A.multiplyRight(h);break;case"X":const u=new q().rotateY(-Math.PI/2);A=A.multiplyRight(u);break}t.isQuantized&&A.translate(t.quantizedVolumeOffset).scale(t.quantizedVolumeScale);const o=new d(n);t.cartesianModelMatrix=A,t.cartesianOrigin=o;const a=k.WGS84.cartesianToCartographic(o,new d),c=k.WGS84.eastNorthUpToFixedFrame(o).invert();t.cartographicModelMatrix=c.multiplyRight(A),t.cartographicOrigin=a,t.coordinateSystem||(t.modelMatrix=t.cartographicModelMatrix)}const WA=new d,Vs=new d,bi=new It([new ot,new ot,new ot,new ot,new ot,new ot]);function T0(e,t){const{cameraDirection:r,cameraUp:s,height:i}=e,{metersPerUnit:n}=e.distanceScales,A=Gr(e,e.center),o=k.WGS84.eastNorthUpToFixedFrame(A),a=e.unprojectPosition(e.cameraPosition),c=k.WGS84.cartographicToCartesian(a,new d),h=new d(o.transformAsVector(new d(r).scale(n))).normalize(),u=new d(o.transformAsVector(new d(s).scale(n))).normalize();M0(e);const g=e.constructor,{longitude:l,latitude:B,width:f,bearing:C,zoom:m}=e,Q=new g({longitude:l,latitude:B,height:i,width:f,bearing:C,zoom:m,pitch:0});return{camera:{position:c,direction:h,up:u},viewport:e,topDownViewport:Q,height:i,cullingVolume:bi,frameNumber:t,sseDenominator:1.15}}function _0(e,t,r){if(r===0||e.length<=r)return[e,[]];const s=[],{longitude:i,latitude:n}=t.viewport;for(const[c,h]of e.entries()){const[u,g]=h.header.mbs,l=Math.abs(i-u),B=Math.abs(n-g),f=Math.sqrt(B*B+l*l);s.push([c,f])}const A=s.sort((c,h)=>c[1]-h[1]),o=[];for(let c=0;c<r;c++)o.push(e[A[c][0]]);const a=[];for(let c=r;c<A.length;c++)a.push(e[A[c][0]]);return[o,a]}function M0(e){const t=e.getFrustumPlanes(),r=XA(t.near,e.cameraPosition),s=Gr(e,r),i=Gr(e,e.cameraPosition,Vs);let n=0;bi.planes[n++].fromPointNormal(s,WA.copy(s).subtract(i));for(const A in t){if(A==="near")continue;const o=t[A],a=XA(o,r,Vs),c=Gr(e,a,Vs);bi.planes[n++].fromPointNormal(c,WA.copy(s).subtract(c))}}function XA(e,t,r=new d){const s=e.normal.dot(t);return r.copy(e.normal).scale(e.distance-s).add(t),r}function Gr(e,t,r=new d){const s=e.unprojectPosition(t);return k.WGS84.cartographicToCartesian(s,r)}const F0=6378137,G0=6378137,Di=6356752314245179e-9,Qe=new d;function v0(e,t){if(e instanceof ir){const{halfAxes:r}=e,s=x0(r);return Math.log2(Di/(s+t[2]))}else if(e instanceof sr){const{radius:r}=e;return Math.log2(Di/(r+t[2]))}else if(e.width&&e.height){const{width:r,height:s}=e,i=Math.log2(F0/r),n=Math.log2(G0/s);return(i+n)/2}return 1}function yc(e,t,r){k.WGS84.cartographicToCartesian([e.xmax,e.ymax,e.zmax],Qe);const s=Math.sqrt(Math.pow(Qe[0]-r[0],2)+Math.pow(Qe[1]-r[1],2)+Math.pow(Qe[2]-r[2],2));return Math.log2(Di/(s+t[2]))}function L0(e,t,r){const[s,i,n,A]=e;return yc({xmin:s,xmax:n,ymin:i,ymax:A,zmin:0,zmax:0},t,r)}function x0(e){e.getColumn(0,Qe);const t=e.getColumn(1),r=e.getColumn(2);return Qe.add(t).add(r).len()}const ft={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5};var Vt;(function(e){e[e.ADD=1]="ADD",e[e.REPLACE=2]="REPLACE"})(Vt||(Vt={}));var Ke;(function(e){e.EMPTY="empty",e.SCENEGRAPH="scenegraph",e.POINTCLOUD="pointcloud",e.MESH="mesh"})(Ke||(Ke={}));var yt;(function(e){e.I3S="I3S",e.TILES3D="TILES3D"})(yt||(yt={}));var zA;(function(e){e.GEOMETRIC_ERROR="geometricError",e.MAX_SCREEN_THRESHOLD="maxScreenThreshold"})(zA||(zA={}));const O0={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};function Qc(e){return e!=null}const at=new d,vr=new d,U0=new d,N0=new d,se=new d,ZA=new d,$A=new d,to=new d;function Ys(e,t,r){if(Ae(e,"3D Tile: boundingVolume must be defined"),e.box)return wc(e.box,t,r);if(e.region)return H0(e.region);if(e.sphere)return J0(e.sphere,t,r);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function P0(e,t){if(e.box)return k0(t);if(e.region){const[r,s,i,n,A,o]=e.region;return[[Mt(r),Mt(s),A],[Mt(i),Mt(n),o]]}if(e.sphere)return q0(t);throw new Error("Unkown boundingVolume type")}function wc(e,t,r){const s=new d(e[0],e[1],e[2]);t.transform(s,s);let i=[];if(e.length===10){const c=e.slice(3,6),h=new Nr;h.fromArray(e,6);const u=new d([1,0,0]),g=new d([0,1,0]),l=new d([0,0,1]);u.transformByQuaternion(h),u.scale(c[0]),g.transformByQuaternion(h),g.scale(c[1]),l.transformByQuaternion(h),l.scale(c[2]),i=[...u.toArray(),...g.toArray(),...l.toArray()]}else i=[...e.slice(3,6),...e.slice(6,9),...e.slice(9,12)];const n=t.transformAsVector(i.slice(0,3)),A=t.transformAsVector(i.slice(3,6)),o=t.transformAsVector(i.slice(6,9)),a=new tt([n[0],n[1],n[2],A[0],A[1],A[2],o[0],o[1],o[2]]);return Qc(r)?(r.center=s,r.halfAxes=a,r):new ir(s,a)}function J0(e,t,r){const s=new d(e[0],e[1],e[2]);t.transform(s,s);const i=t.getScale(vr),n=Math.max(Math.max(i[0],i[1]),i[2]),A=e[3]*n;return Qc(r)?(r.center=s,r.radius=A,r):new sr(s,A)}function H0(e){const[t,r,s,i,n,A]=e,o=k.WGS84.cartographicToCartesian([Mt(t),Mt(i),n],U0),a=k.WGS84.cartographicToCartesian([Mt(s),Mt(r),A],N0),c=new d().addVectors(o,a).multiplyByScalar(.5);return k.WGS84.cartesianToCartographic(c,se),k.WGS84.cartographicToCartesian([Mt(s),se[1],se[2]],ZA),k.WGS84.cartographicToCartesian([se[0],Mt(i),se[2]],$A),k.WGS84.cartographicToCartesian([se[0],se[1],A],to),wc([...c,...ZA.subtract(c),...$A.subtract(c),...to.subtract(c)],new q)}function k0(e){const t=bc(),{halfAxes:r}=e,s=new d(r.getColumn(0)),i=new d(r.getColumn(1)),n=new d(r.getColumn(2));for(let A=0;A<2;A++){for(let o=0;o<2;o++){for(let a=0;a<2;a++)at.copy(e.center),at.add(s),at.add(i),at.add(n),Dc(t,at),n.negate();i.negate()}s.negate()}return t}function q0(e){const t=bc(),{center:r,radius:s}=e,i=k.WGS84.scaleToGeodeticSurface(r,at);let n;i?n=k.WGS84.geodeticSurfaceNormal(i):n=new d(0,0,1);let A=new d(n[2],-n[1],0);A.len()>0?A.normalize():A=new d(0,1,0);const o=A.clone().cross(n);for(const a of[A,o,n]){vr.copy(a).scale(s);for(let c=0;c<2;c++)at.copy(r),at.add(vr),Dc(t,at),vr.negate()}return t}function bc(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function Dc(e,t){k.WGS84.cartesianToCartographic(t,at),e[0][0]=Math.min(e[0][0],at[0]),e[0][1]=Math.min(e[0][1],at[1]),e[0][2]=Math.min(e[0][2],at[2]),e[1][0]=Math.max(e[1][0],at[0]),e[1][1]=Math.max(e[1][1],at[1]),e[1][2]=Math.max(e[1][2],at[2])}new d;new d;new q;new d;new d;new d;function K0(e,t){const r=e*t;return 1-Math.exp(-(r*r))}function j0(e,t){if(e.dynamicScreenSpaceError&&e.dynamicScreenSpaceErrorComputedDensity){const r=e.dynamicScreenSpaceErrorComputedDensity,s=e.dynamicScreenSpaceErrorFactor;return K0(t,r)*s}return 0}function V0(e,t,r){const s=e.tileset,i=e.parent&&e.parent.lodMetricValue||e.lodMetricValue,n=r?i:e.lodMetricValue;if(n===0)return 0;const A=Math.max(e._distanceToCamera,1e-7),{height:o,sseDenominator:a}=t,{viewDistanceScale:c}=s.options;let h=n*o*(c||1)/(A*a);return h-=j0(s,A),h}const Ws=new d,eo=new d,zt=new d,ro=new d,Y0=new d,Xs=new q,so=new q;function W0(e,t){if(e.lodMetricValue===0||isNaN(e.lodMetricValue))return"DIG";const r=2*Rc(e,t);return r<2?"OUT":!e.header.children||r<=e.lodMetricValue?"DRAW":e.header.children?"DIG":"OUT"}function Rc(e,t){const{topDownViewport:r}=t,s=e.header.mbs[1],i=e.header.mbs[0],n=e.header.mbs[2],A=e.header.mbs[3],o=[...e.boundingVolume.center],a=r.unprojectPosition(r.cameraPosition);k.WGS84.cartographicToCartesian(a,Ws),eo.copy(Ws).subtract(o).normalize(),k.WGS84.eastNorthUpToFixedFrame(o,Xs),so.copy(Xs).invert(),zt.copy(Ws).transform(so);const c=Math.sqrt(zt[0]*zt[0]+zt[1]*zt[1]),h=c*c/zt[2];ro.copy([zt[0],zt[1],h]);const u=ro.transform(Xs).subtract(o).normalize(),g=eo.cross(u).normalize().scale(A).add(o),l=k.WGS84.cartesianToCartographic(g),B=r.project([i,s,n]),f=r.project(l);return Y0.copy(B).subtract(f).magnitude()}function X0(e){return{assetGltfUpAxis:e.asset&&e.asset.gltfUpAxis||"Y"}}class io{constructor(t=0){E(this,"_map",new Map),E(this,"_array"),E(this,"_length"),this._array=new Array(t),this._length=t}get length(){return this._length}set length(t){this._length=t,t>this._array.length&&(this._array.length=t)}get values(){return this._array}get(t){return Ae(t<this._array.length),this._array[t]}set(t,r){Ae(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=r,this._map.set(r,t)}delete(t){const r=this._map.get(t);r>=0&&(this._array.splice(r,1),this._map.delete(t),this.length--)}peek(){return this._array[this._length-1]}push(t){if(!this._map.has(t)){const r=this.length++;this._array[r]=t,this._map.set(t,r)}}pop(){const t=this._array[--this.length];return this._map.delete(t),t}reserve(t){Ae(t>=0),t>this._array.length&&(this._array.length=t)}resize(t){Ae(t>=0),this.length=t}trim(t){t==null&&(t=this.length),this._array.length=t}reset(){this._array=[],this._map=new Map,this._length=0}find(t){return this._map.has(t)}}const z0={loadSiblings:!1,skipLevelOfDetail:!1,updateTransforms:!0,onTraversalEnd:()=>{},viewportTraversersMap:{},basePath:""};class os{constructor(t){E(this,"options"),E(this,"root",null),E(this,"selectedTiles",{}),E(this,"requestedTiles",{}),E(this,"emptyTiles",{}),E(this,"lastUpdate",new Date().getTime()),E(this,"updateDebounceTime",1e3),E(this,"_traversalStack",new io),E(this,"_emptyTraversalStack",new io),E(this,"_frameNumber",null),this.options={...z0,...t}}traversalFinished(t){return!0}traverse(t,r,s){this.root=t,this.options={...this.options,...s},this.reset(),this.updateTile(t,r),this._frameNumber=r.frameNumber,this.executeTraversal(t,r)}reset(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}executeTraversal(t,r){const s=this._traversalStack;for(t._selectionDepth=1,s.push(t);s.length>0;){const n=s.pop();let A=!1;this.canTraverse(n,r)&&(this.updateChildTiles(n,r),A=this.updateAndPushChildren(n,r,s,n.hasRenderContent?n._selectionDepth+1:n._selectionDepth));const o=n.parent,a=!!(!o||o._shouldRefine),c=!A;n.hasRenderContent?n.refine===Vt.ADD?(this.loadTile(n,r),this.selectTile(n,r)):n.refine===Vt.REPLACE&&(this.loadTile(n,r),c&&this.selectTile(n,r)):(this.emptyTiles[n.id]=n,this.loadTile(n,r),c&&this.selectTile(n,r)),this.touchTile(n,r),n._shouldRefine=A&&a}const i=new Date().getTime();(this.traversalFinished(r)||i-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=i,this.options.onTraversalEnd(r))}updateChildTiles(t,r){const s=t.children;for(const i of s)this.updateTile(i,r)}updateAndPushChildren(t,r,s,i){const{loadSiblings:n,skipLevelOfDetail:A}=this.options,o=t.children;o.sort(this.compareDistanceToCamera.bind(this));const a=t.refine===Vt.REPLACE&&t.hasRenderContent&&!A;let c=!1,h=!0;for(const u of o)if(u._selectionDepth=i,u.isVisibleAndInRequestVolume?(s.find(u)&&s.delete(u),s.push(u),c=!0):(a||n)&&(this.loadTile(u,r),this.touchTile(u,r)),a){let g;if(u._inRequestVolume?u.hasRenderContent?g=u.contentAvailable:g=this.executeEmptyTraversal(u,r):g=!1,h=h&&g,!h)return!1}return c||(h=!1),h}updateTile(t,r){this.updateTileVisibility(t,r)}selectTile(t,r){this.shouldSelectTile(t)&&(t._selectedFrame=r.frameNumber,this.selectedTiles[t.id]=t)}loadTile(t,r){this.shouldLoadTile(t)&&(t._requestedFrame=r.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)}touchTile(t,r){t.tileset._cache.touch(t),t._touchedFrame=r.frameNumber}canTraverse(t,r){return t.hasChildren?t.hasTilesetContent?!t.contentExpired:this.shouldRefine(t,r):!1}shouldLoadTile(t){return t.hasUnloadedContent||t.contentExpired}shouldSelectTile(t){return t.contentAvailable&&!this.options.skipLevelOfDetail}shouldRefine(t,r,s=!1){let i=t._screenSpaceError;return s&&(i=t.getScreenSpaceError(r,!0)),i>t.tileset.memoryAdjustedScreenSpaceError}updateTileVisibility(t,r){const s=[];if(this.options.viewportTraversersMap)for(const i in this.options.viewportTraversersMap)this.options.viewportTraversersMap[i]===r.viewport.id&&s.push(i);else s.push(r.viewport.id);t.updateVisibility(r,s)}compareDistanceToCamera(t,r){return t._distanceToCamera-r._distanceToCamera}anyChildrenVisible(t,r){let s=!1;for(const i of t.children)i.updateVisibility(r),s=s||i.isVisibleAndInRequestVolume;return s}executeEmptyTraversal(t,r){let s=!0;const i=this._emptyTraversalStack;for(i.push(t);i.length>0;){const n=i.pop(),A=!n.hasRenderContent&&this.canTraverse(n,r),o=!n.hasRenderContent&&n.children.length===0;if(!A&&!n.contentAvailable&&!o&&(s=!1),this.updateTile(n,r),n.isVisibleAndInRequestVolume||(this.loadTile(n,r),this.touchTile(n,r)),A){const a=n.children;for(const c of a)i.push(c)}}return s}}const no=new d;function Z0(e){return e!=null}class Ri{constructor(t,r,s,i=""){E(this,"tileset"),E(this,"header"),E(this,"id"),E(this,"url"),E(this,"parent"),E(this,"refine"),E(this,"type"),E(this,"contentUrl"),E(this,"lodMetricType","geometricError"),E(this,"lodMetricValue",0),E(this,"boundingVolume",null),E(this,"content",null),E(this,"contentState",ft.UNLOADED),E(this,"gpuMemoryUsageInBytes",0),E(this,"children",[]),E(this,"depth",0),E(this,"viewportIds",[]),E(this,"transform",new q),E(this,"extensions",null),E(this,"implicitTiling",null),E(this,"userData",{}),E(this,"computedTransform"),E(this,"hasEmptyContent",!1),E(this,"hasTilesetContent",!1),E(this,"traverser",new os({})),E(this,"_cacheNode",null),E(this,"_frameNumber",null),E(this,"_expireDate",null),E(this,"_expiredContent",null),E(this,"_boundingBox"),E(this,"_distanceToCamera",0),E(this,"_screenSpaceError",0),E(this,"_visibilityPlaneMask"),E(this,"_visible"),E(this,"_contentBoundingVolume"),E(this,"_viewerRequestVolume"),E(this,"_initialTransform",new q),E(this,"_priority",0),E(this,"_selectedFrame",0),E(this,"_requestedFrame",0),E(this,"_selectionDepth",0),E(this,"_touchedFrame",0),E(this,"_centerZDepth",0),E(this,"_shouldRefine",!1),E(this,"_stackLength",0),E(this,"_visitedFrame",0),E(this,"_inRequestVolume",!1),E(this,"_lodJudge",null),this.header=r,this.tileset=t,this.id=i||r.id,this.url=r.url,this.parent=s,this.refine=this._getRefine(r.refine),this.type=r.type,this.contentUrl=r.contentUrl,this._initializeLodMetric(r),this._initializeTransforms(r),this._initializeBoundingVolumes(r),this._initializeContent(r),this._initializeRenderingState(r),Object.seal(this)}destroy(){this.header=null}isDestroyed(){return this.header===null}get selected(){return this._selectedFrame===this.tileset._frameNumber}get isVisible(){return this._visible}get isVisibleAndInRequestVolume(){return this._visible&&this._inRequestVolume}get hasRenderContent(){return!this.hasEmptyContent&&!this.hasTilesetContent}get hasChildren(){return this.children.length>0||this.header.children&&this.header.children.length>0}get contentReady(){return this.contentState===ft.READY||this.hasEmptyContent}get contentAvailable(){return!!(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}get hasUnloadedContent(){return this.hasRenderContent&&this.contentUnloaded}get contentUnloaded(){return this.contentState===ft.UNLOADED}get contentExpired(){return this.contentState===ft.EXPIRED}get contentFailed(){return this.contentState===ft.FAILED}get distanceToCamera(){return this._distanceToCamera}get screenSpaceError(){return this._screenSpaceError}get boundingBox(){return this._boundingBox||(this._boundingBox=P0(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}getScreenSpaceError(t,r){switch(this.tileset.type){case yt.I3S:return Rc(this,t);case yt.TILES3D:return V0(this,t,r);default:throw new Error("Unsupported tileset type")}}unselect(){this._selectedFrame=0}_getGpuMemoryUsageInBytes(){return this.content.gpuMemoryUsageInBytes||this.content.byteLength||0}_getPriority(){const t=this.tileset._traverser,{skipLevelOfDetail:r}=t.options,s=this.refine===Vt.ADD||r;if(s&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===ft.UNLOADED)return-1;const i=this.parent,n=i&&(!s||this._screenSpaceError===0||i.hasTilesetContent)?i._screenSpaceError:this._screenSpaceError,A=t.root?t.root._screenSpaceError:0;return Math.max(A-n,0)}async loadContent(){if(this.hasEmptyContent)return!1;if(this.content)return!0;this.contentExpired&&(this._expireDate=null),this.contentState=ft.LOADING;const t=await this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));if(!t)return this.contentState=ft.UNLOADED,!1;try{const r=this.tileset.getTileUrl(this.contentUrl),s=this.tileset.loader,i={...this.tileset.loadOptions,[s.id]:{...this.tileset.loadOptions[s.id],isTileset:this.type==="json",...this._getLoaderSpecificOptions(s.id)}};return this.content=await we(r,s,i),this.tileset.options.contentLoader&&await this.tileset.options.contentLoader(this),this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=ft.READY,this._onContentLoaded(),!0}catch(r){throw this.contentState=ft.FAILED,r}finally{t.done()}}unloadContent(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=ft.UNLOADED,!0}updateVisibility(t,r){if(this._frameNumber===t.frameNumber)return;const s=this.parent,i=s?s._visibilityPlaneMask:It.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){const n=s?s.computedTransform:this.tileset.modelMatrix;this._updateTransform(n)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,i),this._visible=this._visibilityPlaneMask!==It.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=r}visibility(t,r){const{cullingVolume:s}=t,{boundingVolume:i}=this;return s.computeVisibilityWithPlaneMask(i,r)}contentVisibility(){return!0}distanceToTile(t){const r=this.boundingVolume;return Math.sqrt(Math.max(r.distanceSquaredTo(t.camera.position),0))}cameraSpaceZDepth({camera:t}){const r=this.boundingVolume;return no.subVectors(r.center,t.position),t.direction.dot(no)}insideViewerRequestVolume(t){const r=this._viewerRequestVolume;return!r||r.distanceSquaredTo(t.camera.position)<=0}updateExpiration(){if(Z0(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){const t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=ft.EXPIRED,this._expiredContent=this.content)}}get extras(){return this.header.extras}_initializeLodMetric(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}_initializeTransforms(t){this.transform=t.transform?new q(t.transform):new q;const r=this.parent,s=this.tileset,i=r&&r.computedTransform?r.computedTransform.clone():s.modelMatrix.clone();this.computedTransform=new q(i).multiplyRight(this.transform);const n=r&&r._initialTransform?r._initialTransform.clone():new q;this._initialTransform=new q(n).multiplyRight(this.transform)}_initializeBoundingVolumes(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)}_initializeContent(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=ft.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}_initializeRenderingState(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=It.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}_getRefine(t){return t||this.parent&&this.parent.refine||Vt.REPLACE}_isTileset(){return this.contentUrl.indexOf(".json")!==-1}_onContentLoaded(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0;break}this._isTileset()?this.hasTilesetContent=!0:this.gpuMemoryUsageInBytes=this._getGpuMemoryUsageInBytes()}_updateBoundingVolume(t){this.boundingVolume=Ys(t.boundingVolume,this.computedTransform,this.boundingVolume);const r=t.content;r&&(r.boundingVolume&&(this._contentBoundingVolume=Ys(r.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=Ys(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}_updateTransform(t=new q){const r=t.clone().multiplyRight(this.transform);r.equals(this.computedTransform)||(this.computedTransform=r,this._updateBoundingVolume(this.header))}_getLoaderSpecificOptions(t){switch(t){case"i3s":return{...this.tileset.options.i3s,_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1};case"3d-tiles":case"cesium-ion":default:return X0(this.tileset.tileset)}}}class $0 extends os{compareDistanceToCamera(t,r){return r._distanceToCamera===0&&t._distanceToCamera===0?r._centerZDepth-t._centerZDepth:r._distanceToCamera-t._distanceToCamera}updateTileVisibility(t,r){if(super.updateTileVisibility(t,r),!t.isVisibleAndInRequestVolume)return;const s=t.children.length>0;if(t.hasTilesetContent&&s){const A=t.children[0];this.updateTileVisibility(A,r),t._visible=A._visible;return}if(this.meetsScreenSpaceErrorEarly(t,r)){t._visible=!1;return}const i=t.refine===Vt.REPLACE,n=t._optimChildrenWithinParent===O0.USE_OPTIMIZATION;if(i&&n&&s&&!this.anyChildrenVisible(t,r)){t._visible=!1;return}}meetsScreenSpaceErrorEarly(t,r){const{parent:s}=t;return!s||s.hasTilesetContent||s.refine!==Vt.ADD?!1:!this.shouldRefine(t,r,!0)}}class tp{constructor(){E(this,"frameNumberMap",new Map)}register(t,r){const s=this.frameNumberMap.get(t)||new Map,i=s.get(r)||0;s.set(r,i+1),this.frameNumberMap.set(t,s)}deregister(t,r){const s=this.frameNumberMap.get(t);if(!s)return;const i=s.get(r)||1;s.set(r,i-1)}isZero(t,r){var s;return(((s=this.frameNumberMap.get(t))==null?void 0:s.get(r))||0)===0}}const zs={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"};class ep{constructor(){E(this,"_statusMap"),E(this,"pendingTilesRegister",new tp),this._statusMap={}}add(t,r,s,i){if(!this._statusMap[r]){const{frameNumber:n,viewport:{id:A}}=i;this._statusMap[r]={request:t,callback:s,key:r,frameState:i,status:zs.REQUESTED},this.pendingTilesRegister.register(A,n),t().then(o=>{this._statusMap[r].status=zs.COMPLETED;const{frameNumber:a,viewport:{id:c}}=this._statusMap[r].frameState;this.pendingTilesRegister.deregister(c,a),this._statusMap[r].callback(o,i)}).catch(o=>{this._statusMap[r].status=zs.ERROR;const{frameNumber:a,viewport:{id:c}}=this._statusMap[r].frameState;this.pendingTilesRegister.deregister(c,a),s(o)})}}update(t,r){if(this._statusMap[t]){const{frameNumber:s,viewport:{id:i}}=this._statusMap[t].frameState;this.pendingTilesRegister.deregister(i,s);const{frameNumber:n,viewport:{id:A}}=r;this.pendingTilesRegister.register(A,n),this._statusMap[t].frameState=r}}find(t){return this._statusMap[t]}hasPendingTiles(t,r){return!this.pendingTilesRegister.isZero(t,r)}}class rp extends os{constructor(t){super(t),E(this,"_tileManager"),this._tileManager=new ep}traversalFinished(t){return!this._tileManager.hasPendingTiles(t.viewport.id,this._frameNumber||0)}shouldRefine(t,r){return t._lodJudge=W0(t,r),t._lodJudge==="DIG"}updateChildTiles(t,r){const s=t.header.children||[],i=t.children,n=t.tileset;for(const A of s){const o=`${A.id}-${r.viewport.id}`,a=i&&i.find(c=>c.id===o);if(a)a&&this.updateTile(a,r);else{let c=()=>this._loadTile(A.id,n);this._tileManager.find(o)?this._tileManager.update(o,r):(n.tileset.nodePages&&(c=()=>n.tileset.nodePagesTile.formTileFromNodePages(A.id)),this._tileManager.add(c,o,h=>this._onTileLoad(h,t,o),r))}}return!1}async _loadTile(t,r){const{loader:s}=r,i=r.getTileUrl(`${r.url}/nodes/${t}`),n={...r.loadOptions,i3s:{...r.loadOptions.i3s,isTileHeader:!0}};return await we(i,s,n)}_onTileLoad(t,r,s){const i=new Ri(r.tileset,t,r,s);r.children.push(i);const n=this._tileManager.find(i.id).frameState;this.updateTile(i,n),this._frameNumber===n.frameNumber&&(this.traversalFinished(n)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(i,n)}}const sp={description:"",ellipsoid:k.WGS84,modelMatrix:new q,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,memoryCacheOverflow:1,maximumTilesSelected:0,debounceTime:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{},onTraversalComplete:e=>e,contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,memoryAdjustedScreenSpaceError:!1,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},Rr="Tiles In Tileset(s)",Zs="Tiles In Memory",Ao="Tiles In View",oo="Tiles To Render",ao="Tiles Loaded",$s="Tiles Loading",co="Tiles Unloaded",ho="Failed Tile Loads",uo="Points/Vertices",ti="Tile Memory Use",lo="Maximum Screen Space Error";class ip{constructor(t,r){E(this,"options"),E(this,"loadOptions"),E(this,"type"),E(this,"tileset"),E(this,"loader"),E(this,"url"),E(this,"basePath"),E(this,"modelMatrix"),E(this,"ellipsoid"),E(this,"lodMetricType"),E(this,"lodMetricValue"),E(this,"refine"),E(this,"root",null),E(this,"roots",{}),E(this,"asset",{}),E(this,"description",""),E(this,"properties"),E(this,"extras",null),E(this,"attributions",{}),E(this,"credits",{}),E(this,"stats"),E(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),E(this,"cartographicCenter",null),E(this,"cartesianCenter",null),E(this,"zoom",1),E(this,"boundingVolume",null),E(this,"dynamicScreenSpaceErrorComputedDensity",0),E(this,"maximumMemoryUsage",32),E(this,"gpuMemoryUsageInBytes",0),E(this,"memoryAdjustedScreenSpaceError",0),E(this,"_cacheBytes",0),E(this,"_cacheOverflowBytes",0),E(this,"_frameNumber",0),E(this,"_queryParams",{}),E(this,"_extensionsUsed",[]),E(this,"_tiles",{}),E(this,"_pendingCount",0),E(this,"selectedTiles",[]),E(this,"traverseCounter",0),E(this,"geometricError",0),E(this,"lastUpdatedVieports",null),E(this,"_requestedTiles",[]),E(this,"_emptyTiles",[]),E(this,"frameStateData",{}),E(this,"_traverser"),E(this,"_cache",new R0),E(this,"_requestScheduler"),E(this,"updatePromise",null),E(this,"tilesetInitializationPromise"),this.options={...sp,...r},this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||w0(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.loadOptions=this.options.loadOptions||{},this._traverser=this._initializeTraverser(),this._requestScheduler=new Q0({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.memoryAdjustedScreenSpaceError=this.options.maximumScreenSpaceError,this._cacheBytes=this.options.maximumMemoryUsage*1024*1024,this._cacheOverflowBytes=this.options.memoryCacheOverflow*1024*1024,this.stats=new qo({id:this.url}),this._initializeStats(),this.tilesetInitializationPromise=this._initializeTileSet(t)}destroy(){this._destroy()}isLoaded(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}get tiles(){return Object.values(this._tiles)}get frameNumber(){return this._frameNumber}get queryParams(){return new URLSearchParams(this._queryParams).toString()}setProps(t){this.options={...this.options,...t}}getTileUrl(t){if(t.startsWith("data:"))return t;let r=t;return this.queryParams.length&&(r=`${t}${t.includes("?")?"&":"?"}${this.queryParams}`),r}hasExtension(t){return this._extensionsUsed.indexOf(t)>-1}update(t=null){this.tilesetInitializationPromise.then(()=>{!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t&&this.doUpdate(t)})}async selectTiles(t=null){return await this.tilesetInitializationPromise,t&&(this.lastUpdatedVieports=t),this.updatePromise||(this.updatePromise=new Promise(r=>{setTimeout(()=>{this.lastUpdatedVieports&&this.doUpdate(this.lastUpdatedVieports),r(this._frameNumber),this.updatePromise=null},this.options.debounceTime)})),this.updatePromise}adjustScreenSpaceError(){this.gpuMemoryUsageInBytes<this._cacheBytes?this.memoryAdjustedScreenSpaceError=Math.max(this.memoryAdjustedScreenSpaceError/1.02,this.options.maximumScreenSpaceError):this.gpuMemoryUsageInBytes>this._cacheBytes+this._cacheOverflowBytes&&(this.memoryAdjustedScreenSpaceError*=1.02)}doUpdate(t){if("loadTiles"in this.options&&!this.options.loadTiles||this.traverseCounter>0)return;const r=t instanceof Array?t:[t];this._cache.reset(),this._frameNumber++,this.traverseCounter=r.length;const s=[];for(const i of r){const n=i.id;this._needTraverse(n)?s.push(n):this.traverseCounter--}for(const i of r){const n=i.id;if(this.roots[n]||(this.roots[n]=this._initializeTileHeaders(this.tileset,null)),!s.includes(n))continue;const A=T0(i,this._frameNumber);this._traverser.traverse(this.roots[n],A,this.options)}}_needTraverse(t){let r=t;return this.options.viewportTraversersMap&&(r=this.options.viewportTraversersMap[t]),r===t}_onTraversalEnd(t){const r=t.viewport.id;this.frameStateData[r]||(this.frameStateData[r]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});const s=this.frameStateData[r],i=Object.values(this._traverser.selectedTiles),[n,A]=_0(i,t,this.options.maximumTilesSelected);s.selectedTiles=n;for(const o of A)o.unselect();s._requestedTiles=Object.values(this._traverser.requestedTiles),s._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}_updateTiles(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(const t in this.frameStateData){const r=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(r.selectedTiles),this._requestedTiles=this._requestedTiles.concat(r._requestedTiles),this._emptyTiles=this._emptyTiles.concat(r._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(const t of this.selectedTiles)this._tiles[t.id]=t;this._loadTiles(),this._unloadTiles(),this._updateStats()}_tilesChanged(t,r){if(t.length!==r.length)return!0;const s=new Set(t.map(A=>A.id)),i=new Set(r.map(A=>A.id));let n=t.filter(A=>!i.has(A.id)).length>0;return n=n||r.filter(A=>!s.has(A.id)).length>0,n}_loadTiles(){for(const t of this._requestedTiles)t.contentUnloaded&&this._loadTile(t)}_unloadTiles(){this._cache.unloadTiles(this,(t,r)=>t._unloadTile(r))}_updateStats(){let t=0,r=0;for(const s of this.selectedTiles)s.contentAvailable&&s.content&&(t++,s.content.pointCount?r+=s.content.pointCount:r+=s.content.vertexCount);this.stats.get(Ao).count=this.selectedTiles.length,this.stats.get(oo).count=t,this.stats.get(uo).count=r,this.stats.get(lo).count=this.memoryAdjustedScreenSpaceError}async _initializeTileSet(t){this.type===yt.I3S&&(this.calculateViewPropsI3S(),t.root=await t.root),this.root=this._initializeTileHeaders(t,null),this.type===yt.TILES3D&&(this._initializeTiles3DTileset(t),this.calculateViewPropsTiles3D()),this.type===yt.I3S&&this._initializeI3STileset()}calculateViewPropsI3S(){var t;const r=this.tileset.fullExtent;if(r){const{xmin:i,xmax:n,ymin:A,ymax:o,zmin:a,zmax:c}=r;this.cartographicCenter=new d(i+(n-i)/2,A+(o-A)/2,a+(c-a)/2),this.cartesianCenter=new d,k.WGS84.cartographicToCartesian(this.cartographicCenter,this.cartesianCenter),this.zoom=yc(r,this.cartographicCenter,this.cartesianCenter);return}const s=(t=this.tileset.store)==null?void 0:t.extent;if(s){const[i,n,A,o]=s;this.cartographicCenter=new d(i+(A-i)/2,n+(o-n)/2,0),this.cartesianCenter=new d,k.WGS84.cartographicToCartesian(this.cartographicCenter,this.cartesianCenter),this.zoom=L0(s,this.cartographicCenter,this.cartesianCenter);return}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new d,this.zoom=1}calculateViewPropsTiles3D(){const t=this.root,{center:r}=t.boundingVolume;if(!r){console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new d,this.zoom=1;return}r[0]!==0||r[1]!==0||r[2]!==0?(this.cartographicCenter=new d,k.WGS84.cartesianToCartographic(r,this.cartographicCenter)):this.cartographicCenter=new d(0,0,-k.WGS84.radii[0]),this.cartesianCenter=r,this.zoom=v0(t.boundingVolume,this.cartographicCenter)}_initializeStats(){this.stats.get(Rr),this.stats.get($s),this.stats.get(Zs),this.stats.get(Ao),this.stats.get(oo),this.stats.get(ao),this.stats.get(co),this.stats.get(ho),this.stats.get(uo),this.stats.get(ti,"memory"),this.stats.get(lo)}_initializeTileHeaders(t,r){var s;const i=new Ri(this,t.root,r);if(r&&(r.children.push(i),i.depth=r.depth+1),this.type===yt.TILES3D){const n=[];for(n.push(i);n.length>0;){const A=n.pop();this.stats.get(Rr).incrementCount();const o=A.header.children||[];for(const a of o){const c=new Ri(this,a,A);if((s=c.contentUrl)!=null&&s.includes("?session=")){const h=new URL(c.contentUrl).searchParams.get("session");h&&(this._queryParams.session=h)}A.children.push(c),c.depth=A.depth+1,n.push(c)}}}return i}_initializeTraverser(){let t;switch(this.type){case yt.TILES3D:t=$0;break;case yt.I3S:t=rp;break;default:t=os}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}_destroyTileHeaders(t){this._destroySubtree(t)}async _loadTile(t){let r;try{this._onStartTileLoading(),r=await t.loadContent()}catch(s){this._onTileLoadError(t,s instanceof Error?s:new Error("load failed"))}finally{this._onEndTileLoading(),this._onTileLoad(t,r)}}_onTileLoadError(t,r){this.stats.get(ho).incrementCount();const s=r.message||r.toString(),i=t.url;console.error(`A 3D tile failed to load: ${t.url} ${s}`),this.options.onTileError(t,s,i)}_onTileLoad(t,r){var s,i;if(r){if(this.type===yt.I3S){const n=((i=(s=this.tileset)==null?void 0:s.nodePagesTile)==null?void 0:i.nodesInNodePages)||0;this.stats.get(Rr).reset(),this.stats.get(Rr).addCount(n)}t&&t.content&&S0(t,t.content),this.updateContentTypes(t),this._addTileToCache(t),this.options.onTileLoad(t)}}updateContentTypes(t){var r;if(this.type===yt.I3S)switch(t.header.isDracoGeometry&&(this.contentFormats.draco=!0),t.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0;break}else if(this.type===yt.TILES3D){const{extensionsRemoved:s=[]}=((r=t.content)==null?void 0:r.gltf)||{};s.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),s.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),s.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}_onStartTileLoading(){this._pendingCount++,this.stats.get($s).incrementCount()}_onEndTileLoading(){this._pendingCount--,this.stats.get($s).decrementCount()}_addTileToCache(t){this._cache.add(this,t,r=>r._updateCacheStats(t))}_updateCacheStats(t){this.stats.get(ao).incrementCount(),this.stats.get(Zs).incrementCount(),this.gpuMemoryUsageInBytes+=t.gpuMemoryUsageInBytes||0,this.stats.get(ti).count=this.gpuMemoryUsageInBytes,this.options.memoryAdjustedScreenSpaceError&&this.adjustScreenSpaceError()}_unloadTile(t){this.gpuMemoryUsageInBytes-=t.gpuMemoryUsageInBytes||0,this.stats.get(Zs).decrementCount(),this.stats.get(co).incrementCount(),this.stats.get(ti).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()}_destroy(){const t=[];for(this.root&&t.push(this.root);t.length>0;){const r=t.pop();for(const s of r.children)t.push(s);this._destroyTile(r)}this.root=null}_destroySubtree(t){const r=t,s=[];for(s.push(r);s.length>0;){t=s.pop();for(const i of t.children)s.push(i);t!==r&&this._destroyTile(t)}r.children=[]}_destroyTile(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()}_initializeTiles3DTileset(t){if(t.queryString){const r=new URLSearchParams(t.queryString),s=Object.fromEntries(r.entries());this._queryParams={...this._queryParams,...s}}if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if(this.asset.version!=="0.0"&&this.asset.version!=="1.0"&&this.asset.version!=="1.1")throw new Error("The tileset must be 3D Tiles version either 0.0 or 1.0 or 1.1.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed||[],this.extras=t.extras}_initializeI3STileset(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}function np(e){let t=0;for(const s in e.attributes){const i=e.getAttribute(s);t+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}const r=e.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}function Sc(e){const t=document.createElement("canvas");t.width=64,t.height=64;const r=t.getContext("2d");r.rect(0,0,64,64);const s=r.createLinearGradient(0,0,64,64);for(let n=0;n<e.length;n++){const A=e[n];s.addColorStop(A[0],"#"+A[1].getHexString())}r.fillStyle=s,r.fill();const i=new Ah(t);return i.needsUpdate=!0,i.minFilter=ri,i.wrapS=fn,i.wrapT=fn,i.repeat.set(2,2),i}function go(e){e.updateMatrix(),e.updateMatrixWorld(),e.matrixWorldInverse.copy(e.matrixWorld).invert();const t=new oh;return t.setFromProjectionMatrix(new it().multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse)),t}function Ap(e){const t=new Tr,r=new ah(10,5),s=new z(...e.projectPointOntoPlane([0,0,0])),i=new z(e.normal.x,e.normal.y,e.normal.z),n=new z().copy(s).add(i);r.lookAt(n),r.translate(s.x,s.y,s.z);const A=new si({color:65535,side:po}),o=new ii(r,A),a=new ch(i,s,5,16776960);return t.add(a),t.add(o),t}function Bo(e){const{boundingVolume:t}=e;let r=0;e.content&&(r=Math.min(e.content.byteLength/5e5,1));const s=new D(r,1,0),i=new hh(1,1,1),n=new it;t.halfAxes?n.copy(Tc(t.halfAxes)):t.radius&&i.scale(t.radius*2,t.radius*2,t.radius*2),i.applyMatrix4(n);const A=new uh(i),o=new lh(A,new gh({color:s}));return o.position.copy(new z(...t.center)),o}function Tc(e){const t=e;return new it().fromArray([t[0]*2,t[1]*2,t[2]*2,0,t[3]*2,t[4]*2,t[5]*2,0,t[6]*2,t[7]*2,t[8]*2,0,0,0,0,1])}function op(e,t){const r=2*Math.PI*6378137/2,s=t*r/180;let i=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return i=i*r/180,new yo(s,i)}function ap(e){let t=0;if((e==null?void 0:e.userData.mimeType)=="image/ktx2"&&e.mipmaps){for(let r=0;r<e.mipmaps.length;r++)t+=e.mipmaps[r].data.byteLength;return t}else if(e.image){const{image:r}=e,s=4;let i=[r.width,r.height];for(;i[0]>1||i[1]>1;)t+=i[0]*i[1]*s,i[0]=Math.max(Math.floor(i[0]/2),1),i[1]=Math.max(Math.floor(i[1]/2),1);return t+=1*1*s,t}else return}function _c(e){return np(e)}let dt=null,Ft=null,Yr=null,Lr=null;const fo={minHeight:0,maxHeight:300,samples:4,sampleStep:4,opacity:.5,blendingType:_i};function cp(e,t,r,s=fo){dt&&dt.dispose(),Ft||(Ft=r);const i={...fo,...s};dt=new Bh(e.width*e.devicePixelRatio,e.height*e.devicePixelRatio),dt.texture.minFilter=dn,dt.texture.magFilter=dn,dt.stencilBuffer=!1,dt.texture.format=ie,dt.texture.type=Ne,Ft.setPixelRatio(devicePixelRatio),Ft.setSize(e.width,e.height),Ft.setRenderTarget(dt),Yr=new Io,Yr.overrideMaterial=lp,Lr=t,Zt.uniforms.tPosition.value=dt.texture,Zt.uniforms.minHeight.value=i.minHeight,Zt.uniforms.maxHeight.value=i.maxHeight,Zt.uniforms.samples.value=i.samples,Zt.uniforms.sampleStep.value=i.sampleStep,Zt.uniforms.opacity.value=i.opacity,Zt.blending=i.blendingType}function hp(e){dt.setSize(e.width*e.devicePixelRatio,e.height*e.devicePixelRatio),Ft.setPixelRatio(devicePixelRatio),Ft.setSize(e.width,e.height)}function up(e){if(Ft){const t=Lr.parent;Yr.add(Lr),Ft.setRenderTarget(dt),Ft.render(Yr,e),t&&t.add(Lr),Ft.setRenderTarget(null)}}const Wr=e=>e.toString(),lp=new Ti({vertexShader:Wr`
        varying vec3 vPosition;
        void main() {
            vPosition =  (modelMatrix * vec4(position, 1.0)).xyz;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
    `,fragmentShader:Wr`
        varying vec3 vPosition;
        void main() {
            gl_FragColor = vec4(vPosition, 1.0);
        }
    `,side:po}),gp=Wr`
    #include <packing>

    varying vec2 vUv;
    varying vec3 vColor;
    uniform sampler2D tPosition;
    uniform float minHeight;
    uniform float maxHeight;
    uniform int samples;
    uniform float sampleStep;

    mat4 MVP;

    // Convert to normalized screen coordinates
    vec4 toNSC(const in vec4 v) {
        return vec4(0.5 * (v.xyz / v.w) + 0.5, v.w);
    }
    vec4 vertexDraping(
        const in sampler2D positionTex, // Position G-Buffer
        const in vec4 Vin // Vertex to drape
    ) {
        float texSize = float(textureSize(positionTex, 0).x);
        float pixelSize = 1.0 / texSize;
        vec2 stepSize = vec2(sampleStep/texSize);
        vec4 VinWorld = modelMatrix * Vin;

        vec4 lineStart = projectionMatrix * viewMatrix * vec4(VinWorld.x, minHeight, VinWorld.z, 1.0);
        vec4 lineEnd = projectionMatrix * viewMatrix * vec4(VinWorld.x, maxHeight, VinWorld.z, 1.0);

        vec4 Vout = VinWorld;

        // Binary search for line-terrain intersection
        float first = 0.0, last = 1.0;
        while(first <= last) {
            // Compute mid-point
            float mid = first + (last-first) / 2.0;
            // Compute texture coordinates along line
            vec4 texCoords = toNSC(mix(lineStart, lineEnd, mid));
            vec4 texSample = vec4(0.0); // Sample terrain
            for(int s = -samples; s < samples; s++) {
                for(int t = -samples; t < samples; t++) {
                    texSample += texture(positionTex,
                    texCoords.st + vec2(s,t) * stepSize);
                }
            }
            // Smooth samples obtain from G-Buffer
            texSample = texSample / (float(samples) * float(samples) * 4.0);
            float terrainHeight = texSample.y;
            Vout.y = terrainHeight;
           
            if((last-first) < pixelSize) { // Termination criteria
                return Vout;
            }
            // Perform intersection test
            float depthScene = toNSC(projectionMatrix * viewMatrix * Vout).y;
            if(depthScene >= texCoords.y) {
                first = mid;
            }
            else
                last = mid;
        }
        return Vout;
    }

    void main() {
        vColor = color;
        vUv = uv;
        MVP = projectionMatrix * modelViewMatrix;
        vec4 inputVertex = vec4(position, 1.0);
        vec4 outputVertex = vertexDraping(tPosition, inputVertex);
        vec4 finalPosition = projectionMatrix * viewMatrix * outputVertex;
        gl_Position = finalPosition;
    }
`,Bp=Wr`
    varying vec3 vColor;
    uniform float opacity;

    void main() {
        gl_FragColor = vec4(vColor, opacity);
    }
`,Zt=new Ti({vertexShader:gp,fragmentShader:Bp,uniforms:{tPosition:{value:null},minHeight:{value:0},maxHeight:{value:300},opacity:{value:.5},samples:{value:4},sampleStep:{value:4}},vertexColors:!0,transparent:!0,depthTest:!1,blending:_i}),Mc={SPECTRAL:[[0,new D(.3686,.3098,.6353)],[.1,new D(.1961,.5333,.7412)],[.2,new D(.4,.7608,.6471)],[.3,new D(.6706,.8667,.6431)],[.4,new D(.902,.9608,.5961)],[.5,new D(1,1,.749)],[.6,new D(.9961,.8784,.5451)],[.7,new D(.9922,.6824,.3804)],[.8,new D(.9569,.4275,.2627)],[.9,new D(.8353,.2431,.3098)],[1,new D(.6196,.0039,.2588)]],PLASMA:[[0,new D(.241,.015,.61)],[.1,new D(.387,.001,.654)],[.2,new D(.524,.025,.653)],[.3,new D(.651,.125,.596)],[.4,new D(.752,.227,.513)],[.5,new D(.837,.329,.431)],[.6,new D(.907,.435,.353)],[.7,new D(.963,.554,.272)],[.8,new D(.992,.681,.195)],[.9,new D(.987,.822,.144)],[1,new D(.94,.975,.131)]],YELLOW_GREEN:[[0,new D(.1647,.2824,.3451)],[.1,new D(.1338,.3555,.4227)],[.2,new D(.061,.4319,.4864)],[.3,new D(0,.5099,.5319)],[.4,new D(0,.5881,.5569)],[.5,new D(.137,.665,.5614)],[.6,new D(.2906,.7395,.5477)],[.7,new D(.4453,.8099,.5201)],[.8,new D(.6102,.8748,.485)],[.9,new D(.7883,.9323,.4514)],[1,new D(.9804,.9804,.4314)]],VIRIDIS:[[0,new D(.267,.005,.329)],[.1,new D(.283,.141,.458)],[.2,new D(.254,.265,.53)],[.3,new D(.207,.372,.553)],[.4,new D(.164,.471,.558)],[.5,new D(.128,.567,.551)],[.6,new D(.135,.659,.518)],[.7,new D(.267,.749,.441)],[.8,new D(.478,.821,.318)],[.9,new D(.741,.873,.15)],[1,new D(.993,.906,.144)]],INFERNO:[[0,new D(.077,.042,.206)],[.1,new D(.225,.036,.388)],[.2,new D(.373,.074,.432)],[.3,new D(.522,.128,.42)],[.4,new D(.665,.182,.37)],[.5,new D(.797,.255,.287)],[.6,new D(.902,.364,.184)],[.7,new D(.969,.516,.063)],[.8,new D(.988,.683,.072)],[.9,new D(.961,.859,.298)],[1,new D(.988,.998,.645)]],GRAYSCALE:[[0,new D(0,0,0)],[1,new D(1,1,1)]],TURBO:[[0,new D(.18995,.07176,.23217)],[.07,new D(.25107,.25237,.63374)],[.13,new D(.27628,.42118,.89123)],[.2,new D(.25862,.57958,.99876)],[.27,new D(.15844,.73551,.92305)],[.33,new D(.09267,.86554,.7623)],[.4,new D(.19659,.94901,.59466)],[.47,new D(.42778,.99419,.38575)],[.53,new D(.64362,.98999,.23356)],[.6,new D(.80473,.92452,.20459)],[.67,new D(.93301,.81236,.22667)],[.73,new D(.99314,.67408,.20348)],[.8,new D(.9836,.49291,.12849)],[.87,new D(.92105,.31489,.05475)],[.93,new D(.81608,.18462,.01809)],[1,new D(.66449,.08436,.00424)]],RAINBOW:[[0,new D(.278,0,.714)],[1/6,new D(0,0,1)],[2/6,new D(0,1,1)],[3/6,new D(0,1,0)],[4/6,new D(1,1,0)],[5/6,new D(1,.64,0)],[1,new D(1,0,0)]],CONTOUR:[[0,new D(0,0,0)],[.03,new D(0,0,0)],[.04,new D(1,1,1)],[1,new D(1,1,1)]]},fp=`
  varying vec3 vColor;
  uniform float alpha;

  void main() {
    if (vColor == vec3(0.0, 0.0, 0.0)) {
      discard;
    } else {
      gl_FragColor = vec4( vColor, alpha);
    }
  }
`,dp=`
  varying vec3 vColor;
  uniform sampler2D gradient;
  uniform sampler2D grayscale;
  attribute float intensity;
  attribute float classification;
  uniform vec3 rootCenter;
  uniform vec3 rootNormal;
  uniform vec2 elevationRange;
  uniform int coloring;
  uniform bool hideGround;
  uniform float maxIntensity;
  uniform float intensityContrast;
  uniform float pointSize;

  #ifdef USE_COLOR
  vec3 getRGB() {
      vec3 rgb = color;
      return rgb;
  }
  #endif

  vec3 getElevation(){
    vec4 world = modelMatrix * vec4( position, 1.0 );
    float diff = abs(dot(rootNormal, (vec3(world) - rootCenter)));
    float w = max(diff - elevationRange.x,0.0) / max(elevationRange.y - elevationRange.x,1.0);
    vec3 cElevation = texture2D(gradient, vec2(w,1.0-w)).rgb;

    return cElevation;
  }

  vec3 getIntensity(){
    // TODO: real contrast enhancement. Check https://github.com/yuki-koyama/enhancer/blob/master/shaders/enhancer.fs
    float intmod = pow(intensity, intensityContrast);
    vec3 cIntensity = texture2D(grayscale, vec2(intmod / maxIntensity ,1.0-(intmod / maxIntensity))).rgb;
    return cIntensity;
  }

  vec3 getClassification(){
    float classNormalized = classification / 255.0;
    vec3 cClassification = texture2D(gradient, vec2(classNormalized * 5.0,1.0-classNormalized * 5.0)).rgb;
    return cClassification;
  }

  vec3 getColor(){
      vec3 color;
      if (hideGround && classification == 2.0) {
         return vec3(0.0, 0.0, 0.0);               
      }

      if (coloring == 1) {
        color = getIntensity();
      }
      else if (coloring == 2) {
        color = getClassification();
      } else if (coloring == 3) {
        color = getElevation();
      } 
      #ifdef USE_COLOR
      else if (coloring == 4) {
        color = getRGB();
      }
      #endif
      else {
        color = vec3(1.0, 1.0, 1.0);
      }
      return color;
  }

  void main() {
      vColor = getColor();

      gl_PointSize = pointSize;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  }
`;var cn=(e=>(e[e.Intensity=1]="Intensity",e[e.Classification=2]="Classification",e[e.Elevation=3]="Elevation",e[e.RGB=4]="RGB",e[e.White=5]="White",e))(cn||{}),Xr=(e=>(e[e.FlatTexture=1]="FlatTexture",e[e.ShadedTexture=2]="ShadedTexture",e[e.ShadedNoTexture=3]="ShadedNoTexture",e))(Xr||{});const Cp=Mc.RAINBOW,Ip=typeof document<"u"?Sc(Cp):null,Ep=Mc.GRAYSCALE,mp=typeof document<"u"?Sc(Ep):null,pp={throttleRequests:!0,maxRequests:64,updateInterval:.1,maxConcurrency:1,maximumScreenSpaceError:16,memoryAdjustedScreenSpaceError:!0,maximumMemoryUsage:400,memoryCacheOverflow:128,viewDistanceScale:1,skipLevelOfDetail:!1,resetTransform:!1,updateTransforms:!0,shading:Xr.FlatTexture,transparent:!1,pointCloudColoring:cn.White,pointSize:1,worker:!0,wireframe:!1,debug:!1,gltfLoader:null,basisTranscoderPath:null,dracoDecoderPath:null,material:null,contentPostProcess:void 0,preloadTilesCount:null,collectAttributions:!1};class yp{static async load(t){const r={...pp,...t.options},{url:s}=t;let{viewport:i,renderer:n}=t;const A=r.updateInterval,o=5,a={};if(r.cesiumIONToken){a["cesium-ion"]={accessToken:r.cesiumIONToken};const w=await fc.preload(s,a);a.fetch={headers:w.headers}}r.googleApiKey&&(a.fetch={headers:{"X-GOOG-API-KEY":r.googleApiKey}},t.options.hasOwnProperty("collectAttributions")||(r.collectAttributions=!0)),t.loadingManager&&t.loadingManager.itemStart(s);const c=await we(s,qe,{...a}),h={},u={},g=[],l=new Tr,B=new Tr;r.debug||(B.visible=!1);const f={pointSize:{type:"f",value:r.pointSize},gradient:{type:"t",value:Ip},grayscale:{type:"t",value:mp},rootCenter:{type:"vec3",value:new z},rootNormal:{type:"vec3",value:new z},coloring:{type:"i",value:r.pointCloudColoring},hideGround:{type:"b",value:!0},elevationRange:{type:"vec2",value:new yo(0,400)},maxIntensity:{type:"f",value:1},intensityContrast:{type:"f",value:1},alpha:{type:"f",value:1}},C=new Ti({uniforms:f,vertexShader:dp,fragmentShader:fp,transparent:r.transparent,vertexColors:!0});let m,Q,I;r.gltfLoader?m=r.gltfLoader:(m=new Rh,r.basisTranscoderPath&&(Q=new Pt,Q.detectSupport(n??new Eo),Q.setTranscoderPath(r.basisTranscoderPath+"/"),Q.setWorkerLimit(1),m.setKTX2Loader(Q)),r.dracoDecoderPath&&(I=new Sh,I.setDecoderPath(r.dracoDecoderPath+"/"),I.setWorkerLimit(r.maxConcurrency),m.setDRACOLoader(I)));const p=new si({transparent:r.transparent}),R={maximumMemoryUsage:r.maximumMemoryUsage,maximumScreenSpaceError:r.maximumScreenSpaceError,memoryAdjustedScreenSpaceError:r.memoryAdjustedScreenSpaceError,memoryCacheOverflow:r.memoryCacheOverflow,viewDistanceScale:r.viewDistanceScale,skipLevelOfDetail:r.skipLevelOfDetail,updateTransforms:r.updateTransforms,throttleRequests:r.throttleRequests,maxRequests:r.maxRequests,contentLoader:async w=>{let L=null;switch(w.type){case Ke.POINTCLOUD:{L=wp(w,C,r,gt);break}case Ke.SCENEGRAPH:case Ke.MESH:{L=await Qp(m,w,p,r,gt);break}}if(L&&(L.visible=!1,h[w.id]=L,l.add(h[w.id]),r.debug)){const At=Bo(w);B.add(At),u[w.id]=At}},onTileLoad:async w=>{y&&(r.resetTransform&&!v&&(w==null?void 0:w.depth)<=o&&ee(w),mt=!0)},onTileUnload:w=>{g.push(w)},onTileError:(w,L)=>{console.warn("Tile error",w.id,L)},onTraversalComplete(w){return r.collectAttributions&&(P=Dp(w)),w}},y=new ip(c,{...R,loadOptions:{...a,maxConcurrency:r.maxConcurrency,worker:r.worker,gltf:{loadImages:!1},"3d-tiles":{loadGLTF:!1}}}),_=new it,G=new it,T=new z;let v=!1,P="";if(y.root.boundingVolume?(y.root.header.boundingVolume.region&&console.warn("Cannot apply a model matrix to bounding volumes of type region. Tileset stays in original geo-coordinates."),G.setPosition(y.root.boundingVolume.center[0],y.root.boundingVolume.center[1],y.root.boundingVolume.center[2])):console.warn("Bounding volume not found, no transformations applied"),r.debug){const w=Bo(y.root);B.add(w),u[y.root.id]=w}let K=!1,H=!1;f.rootCenter.value.copy(T),f.rootNormal.value.copy(new z(0,0,1).normalize()),y.stats.get("Loader concurrency").count=r.maxConcurrency,y.stats.get("Maximum mem usage").count=r.maximumMemoryUsage;let x=0,Y=null,mt=!0,W=null;const j=new z(1/0,1/0,1/0);let ut=null;l.updateMatrixWorld(!0);const X=new it().copy(l.matrixWorld),gt=new it().copy(X).invert();r.resetTransform&&ee(y.root),r.debug&&(u[y.root.id].applyMatrix4(_),B.matrixWorld.copy(l.matrixWorld));function ee(w){if(!w.boundingVolume.halfAxes)return;const L=w.boundingVolume.halfAxes,At=new it().extractRotation(Tc(L)).premultiply(new it().extractRotation(gt));if(!new gs().setFromRotationMatrix(At).equals(new gs)){v=!0;const et=new z(G.elements[12],G.elements[13],G.elements[14]);G.extractRotation(At),G.setPosition(et)}Ar()}function Ar(){_.copy(X),r.resetTransform&&_.multiply(new it().copy(G).invert()),y.modelMatrix=new q(_.toArray())}function as(w,L,At,et){if(K||!et)return;ut||(ut=new Jr({fov:et.fov/180*Math.PI,aspectRatio:et.aspect,near:et.near,far:et.far}).sseDenominator,r.debug&&console.log("Updated sse denonimator:",ut));const cs=go(et).planes.map(st=>new ot(st.normal.toArray(),st.constant)),hs=new It(cs),hn={camera:{position:j.toArray()},height:At.height*At.devicePixelRatio,frameNumber:w._frameNumber,sseDenominator:ut,cullingVolume:hs,viewport:{id:0}};w._cache.reset(),w._traverser.traverse(w.root,hn,w.options);for(const st of w.tiles)st.selected?L[st.id]?L[st.id].visible=!0:console.error("TILE SELECTED BUT NOT LOADED!!",st.id):L[st.id]&&(L[st.id].visible=!1);for(;g.length>0;){const st=g.pop();L[st.id]&&st.contentState==ft.UNLOADED&&(l.remove(L[st.id]),ei(L[st.id]),delete L[st.id]),u[st.id]&&(ei(u[st.id]),B.remove(u[st.id]),delete u[st.id])}const us=w.stats.get("Tiles Loaded").count,un=w.stats.get("Tiles Loading").count;return t.onProgress&&t.onProgress(us,us+un),t.loadingManager&&!H&&un==0&&(r.preloadTilesCount==null||us>=r.preloadTilesCount)&&(H=!0,t.loadingManager.itemEnd(t.url)),hn}function Fc(w){const L=new z,At=new dh,et=new z;w.decompose(L,At,et),l.position.copy(L),l.quaternion.copy(At),l.scale.copy(et),l.updateMatrix(),l.updateMatrixWorld(!0),X.copy(l.matrixWorld),gt.copy(X).invert(),Ar()}return{model:l,runtime:{getTileset:()=>y,getStats:()=>y.stats,getDataAttributions:()=>P,showTiles:w=>{B.visible=w},setWireframe:w=>{r.wireframe=w,l.traverse(L=>{L instanceof ii&&(L.material.wireframe=w)})},setDebug:w=>{r.debug=w,B.visible=w},setShading:w=>{r.shading=w},getTileBoxes:()=>B,setViewDistanceScale:w=>{y.options.viewDistanceScale=w,y._frameNumber++,as(y,h,i,W)},setMaximumScreenSpaceError:w=>{y.options.maximumScreenSpaceError=w,y._frameNumber++,as(y,h,i,W)},setHideGround:w=>{f.hideGround.value=w},setPointCloudColoring:w=>{f.coloring.value=w},setElevationRange:w=>{f.elevationRange.value.set(w[0],w[1])},setMaxIntensity:w=>{f.maxIntensity.value=w},setIntensityContrast:w=>{f.intensityContrast.value=w},setPointAlpha:w=>{f.alpha.value=w},getLatLongHeightFromPosition:w=>{const L=y.ellipsoid.cartesianToCartographic(new z().copy(w).applyMatrix4(new it().copy(_).invert()).toArray());return{lat:L[1],long:L[0],height:L[2]}},getPositionFromLatLongHeight:w=>{const L=y.ellipsoid.cartographicToCartesian([w.long,w.lat,w.height]);return new z(...L).applyMatrix4(_)},orientToGeocoord:w=>{const L=[w.long,w.lat,w.height],At=y.ellipsoid.cartographicToCartesian(L),et=new it().fromArray(y.ellipsoid.eastNorthUpToFixedFrame(At)),cs=new it().makeRotationFromEuler(new gs(Math.PI/2,Math.PI/2,0)),hs=new it().copy(et).multiply(cs).invert();Fc(hs)},getWebMercatorCoord:w=>op(w.lat,w.long),getCameraFrustum:w=>{const L=go(w).planes.map(et=>new ot(et.normal.toArray(),et.constant)).map(et=>Ap(et)),At=new Tr;for(const et of L)At.add(et);return At},overlayGeoJSON:(w,L)=>{if(w.applyMatrix4(_),w.updateMatrixWorld(),!n)throw new Error("GeoJSON draping requires a renderer reference via LoaderProps");return cp(i,l,n,L),w.material.dispose(),w.material=Zt,w},setViewport:w=>{i=w,ut=null,mt=!0,dt&&hp(i)},setRenderer:w=>{n=w},update:function(w,L){if(W=L,x+=w,dt&&up(L),y&&x>=A){if(!X.equals(l.matrixWorld)){x=0,X.copy(l.matrixWorld),r.updateTransforms&&Ar();const At=new z().setFromMatrixPosition(X);f.rootCenter.value.copy(At),f.rootNormal.value.copy(new z(0,0,1).applyMatrix4(X).normalize()),gt.copy(X).invert(),r.debug&&(u[y.root.id].matrixWorld.copy(_),u[y.root.id].applyMatrix4(X))}Y==null?Y=new it().copy(L.matrixWorld):(mt||bp(L,Y))&&(x=0,mt=!1,y._frameNumber++,L.getWorldPosition(j),Y.copy(L.matrixWorld),as(y,h,i,L))}},dispose:function(){for(K=!0,y._destroy();l.children.length>0;){const w=l.children[0];ei(w),l.remove(w)}for(;B.children.length>0;){const w=B.children[0];B.remove(w),w.geometry.dispose(),w.material.dispose()}Q&&Q.dispose(),I&&I.dispose()}}}}static async loadGeoJSON(t){const{url:r,height:s,featureToColor:i}=t;return we(r,$e,{worker:!1,gis:{format:"binary"}}).then(n=>{const A=n,o=new Qo,a=A.polygons.positions.value.reduce((h,u,g,l)=>{if(g%2==0){const B=[u,l[g+1],s??0],f=k.WGS84.cartographicToCartesian(B);h.push(...f)}return h},[]);if(o.setAttribute("position",new xr(a,3)),i){const h=A.polygons.numericProps[i.feature].value.reduce((u,g,l,B)=>{const f=i.colorMap(g);return u[l*3]=f.r,u[l*3+1]=f.g,u[l*3+2]=f.b,u},[]);o.setAttribute("color",new xr(h,3))}o.setIndex(new wo(A.polygons.triangles.value,1));const c=new si({transparent:!0,vertexColors:!0,opacity:.5,blending:_i});return new ii(o,c)})}}async function Qp(e,t,r,s,i){return new Promise((n,A)=>{const o=new it().makeRotationAxis(new z(1,0,0),Math.PI/2),a=t.content.gltfUpAxis!=="Z",c=new it().fromArray(t.computedTransform).premultiply(i);a&&c.multiply(o),t.content.byteLength||(t.content.byteLength=t.content.gltfArrayBuffer.byteLength),e.parse(t.content.gltfArrayBuffer,t.contentUrl?t.contentUrl.substr(0,t.contentUrl.lastIndexOf("/")+1):null,h=>{t.userData.asset=h.asset;const u=h.scenes[0];u.applyMatrix4(c),t.content.texturesByteLength=0,t.content.geometriesByteLength=0,u.traverse(g=>{if(g.type=="Mesh"){const l=g;t.content.geometriesByteLength+=_c(l.geometry);const B=l.material,f=B.map;if(f){const C=ap(f);C&&(t.content.texturesByteLength+=C)}s.material?(l.material=s.material.clone(),B.dispose()):s.shading==Xr.FlatTexture&&l.material.type!=="MeshBasicMaterial"&&(l.material=r.clone(),B.dispose()),s.shading!=Xr.ShadedNoTexture?l.material.type=="ShaderMaterial"?l.material.uniforms.map={value:f}:l.material.map=f:(f&&f.dispose(),l.material.map=null),l.material.wireframe=s.wireframe,s.contentPostProcess&&s.contentPostProcess(l)}}),t.content.gpuMemoryUsageInBytes=t.content.texturesByteLength+t.content.geometriesByteLength,n(u)},h=>{A(new Error(`error parsing gltf in tile ${t.id}: ${h}`))})})}function wp(e,t,r,s){const i={rtc_center:e.content.rtcCenter,points:e.content.attributes.positions,intensities:e.content.attributes.intensity,classifications:e.content.attributes.classification,rgb:null,rgba:null},{colors:n}=e.content.attributes;n&&n.size===3&&(i.rgb=n.value),n&&n.size===4&&(i.rgba=n.value);const A=new Qo;A.setAttribute("position",new xr(i.points,3));const o=new it().fromArray(e.computedTransform).premultiply(s);i.rgba?A.setAttribute("color",new xr(i.rgba,4)):i.rgb&&A.setAttribute("color",new Cn(i.rgb,3,!0)),i.intensities&&A.setAttribute("intensity",new wo(i.intensities,1,!0)),i.classifications&&A.setAttribute("classification",new Cn(i.classifications,1,!1)),e.content.geometriesByteLength=_c(A),e.content.gpuMemoryUsageInBytes=e.content.geometriesByteLength;const a=new fh(A,r.material||t);if(i.rtc_center){const c=i.rtc_center;o.multiply(new it().makeTranslation(c[0],c[1],c[2]))}return a.applyMatrix4(o),r.contentPostProcess&&r.contentPostProcess(a),a}function Co(e){var t,r,s,i;(t=e==null?void 0:e.uniforms)!=null&&t.map?(s=(r=e==null?void 0:e.uniforms)==null?void 0:r.map.value)==null||s.dispose():e.map&&((i=e.map)==null||i.dispose()),e.dispose()}function ei(e){e.traverse(t=>{if(t.isMesh)if(t.geometry.dispose(),t.material.isMaterial)Co(t.material);else for(const r of t.material)Co(r)});for(let t=e.children.length-1;t>=0;t--){const r=e.children[t];e.remove(r)}}function bp(e,t){return!e.matrixWorld.equals(t)}function Dp(e){const t=new Map;return e.forEach(r=>{var s,i;const n=(i=(s=r==null?void 0:r.userData)==null?void 0:s.asset)==null?void 0:i.copyright;n&&n.split(/;/g).map(A=>A.trim()).forEach(A=>{A&&t.set(A,(t.get(A)||0)+1)})}),Array.from(t).sort((r,s)=>s[1]-r[1]).map(([r])=>r).join("; ")}const Wt=Eh(Ih,Ch);Wt.scale.setScalar(1e3);const Rp=Wt.geo2world(new z(108,34,0)),Sp=Wt.geo2world(new z(108,30,1e3)),Dt=new Th("#map",{centerPostion:Rp,cameraPosition:Sp});Dt.scene.add(Wt);let Si;Dt.addEventListener("update",e=>{Si&&Si.update(e.delta,Dt.camera)});async function Tp(){const e=await yp.load({url:"https://assets.ion.cesium.com/69380/tileset.json",viewport:{width:Dt.width,height:Dt.height,devicePixelRatio:window.devicePixelRatio},options:{cesiumIONToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI3NjEwMjA4Ni00YmVkLTQyMjgtYjRmZS1lY2M3ZWFiMmFmNTYiLCJpZCI6MjYxMzMsImlhdCI6MTY3NTM2ODY4NX0.chGkGL6DkDNv5wYJQDMzWIvi9iDoVa27dgng_5ARDmo",dracoDecoderPath:"../lib/draco",resetTransform:!0,memoryAdjustedScreenSpaceError:!0,pointCloudColoring:cn.RGB}}),{model:t,runtime:r}=e;Si=r;const s=r.getTileset(),i=s.cartographicCenter[0],n=s.cartographicCenter[1],A=s.cartographicCenter[2],o=Wt.geo2world(new z(i,n,0));t.position.copy(o),t.position.setY(200),t.scale.setScalar(1.3),t.rotation.set(-Math.PI/2,0,0),Dt.scene.add(t),Dt.scene.add(r.getTileBoxes());const a=new z(o.x-400,250,o.z-200);Dt.camera.position.copy(a),Dt.controls.target.copy(o),console.log(i,n,A);const c=document.getElementById("model-loading");c&&(c.style.display="none")}Tp();mh(Wt);ph(Wt);yh(Dt,Wt);Qh(Wt);wh(Dt);bh(Dt);
